<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="description" content="eCommerce,shop,fashion" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title></title>
    <link
      rel="shortcut icon"
      href="assets/images/favicon.png"
      type="image/png"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Aoboshi+One&family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/fonts/flaticon/flaticon_pesco.css" />
    <link rel="stylesheet" href="assets/fonts/fontawesome/css/all.min.css" />
    <link
      rel="stylesheet"
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="assets/vendor/slick/slick.css" />
    <link
      rel="stylesheet"
      href="assets/vendor/nice-select/css/nice-select.css"
    />
    <link
      rel="stylesheet"
      href="assets/vendor/magnific-popup/dist/magnific-popup.css"
    />
    <link rel="stylesheet" href="assets/vendor/jquery-ui/jquery-ui.min.css" />
    <link rel="stylesheet" href="assets/vendor/aos/aos.css" />
    <link rel="stylesheet" href="assets/css/default.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"
    />

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        document
          .querySelectorAll("a[href$='.html']:not(.lang-btn)")
          .forEach((a) => {
            const href = a.getAttribute("href");
            const page = href.replace(/\.html$/, "");
            if (page === "index" || page === "") {
              a.setAttribute("href", "http://demo.webriefly.com/");
            } else {
              a.setAttribute("href", `http://demo.webriefly.com/${page}`);
            }
            a.addEventListener("click", (e) => {
              e.preventDefault();
              if (page === "index" || page === "") {
                window.parent.location.href = "http://demo.webriefly.com/";
              } else {
                window.parent.location.href = `http://demo.webriefly.com/${page}`;
              }
            });
          });
        document.querySelectorAll('a[href="#"]').forEach((a) => {
          a.addEventListener("click", (e) => e.preventDefault());
        });
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        fetch("http://147.93.45.171:1600/themeoptionsdata")
          .then((res) => {
            if (!res.ok) throw new Error("Fetch failed");
            return res.json();
          })
          .then((data) => {
            let titleTag = document.head.querySelector("title");
            if (!titleTag) {
              titleTag = document.createElement("title");
              document.head.appendChild(titleTag);
            }
            titleTag.textContent =
              data.site_title || data.seo_title || "Website";

            let desc = document.querySelector('meta[name="description"]');
            if (!desc) {
              desc = document.createElement("meta");
              desc.name = "description";
              document.head.appendChild(desc);
            }
            desc.content = data.seo_description || "";

            let og = document.querySelector('meta[property="og:image"]');
            if (!og) {
              og = document.createElement("meta");
              og.setAttribute("property", "og:image");
              document.head.appendChild(og);
            }
            og.content = data.seo_og_image_url || "";

            const url = `http://147.93.45.171:1600/uploads/${
              data.lazy_placeholder_image
            }?v=${Date.now()}`;
            const oldIcon = document.querySelector(
              'link[rel="icon"], link[rel="shortcut icon"]'
            );
            if (oldIcon) oldIcon.remove();

            const link = document.createElement("link");
            link.rel = "icon";
            link.type = "image/png";
            link.href = url;
            document.head.appendChild(link);
          })
          .catch((e) => console.error("Theme load error:", e));
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        function makeAbsolute(u) {
          if (!u) return u;
          if (/^https?:\/\//i.test(u)) return u;
          return window.location.origin + (u.startsWith("/") ? u : "/" + u);
        }

        function withUploads(u) {
          if (!u) return u;
          if (u.startsWith("http://147.93.45.171:1600/uploads/"))
            return makeAbsolute(u);
          return makeAbsolute(
            "http://147.93.45.171:1600/uploads/" + u.replace(/^\/+/, "")
          );
        }

        function toSlug(str = "") {
          return str
            .toLowerCase()
            .trim()
            .replace(/\s+/g, "-")
            .replace(/[^\w-]+/g, "");
        }

        function stripTags(str = "") {
          return String(str).replace(/<[^>]*>/g, "");
        }

        Promise.all([
          fetch("http://147.93.45.171:1600/productpagedata").then((r) =>
            r.json()
          ),
          fetch("http://147.93.45.171:1600/blogpostdata").then((r) => r.json()),
        ])
          .then(([products, blogs]) => {
            products = Array.isArray(products)
              ? products
              : products.items || [];
            blogs = Array.isArray(blogs) ? blogs : blogs.items || [];

            const featuredProducts = products.slice(0, 10);
            const featuredBlogs = blogs.slice(0, 5);

            const productSchema = featuredProducts.map((p) => {
              const slug = p.slug
                ? p.slug
                : toSlug(p.name || p.title || p.id || "");
              const productUrl = makeAbsolute(`/shop-details/${slug}`);
              return {
                "@type": "Product",
                name: p.name || p.title || "",
                image: withUploads(p.image || (p.images && p.images[0]) || ""),
                description: stripTags(p.description || ""),
                brand: { "@type": "Brand", name: p.brand || "" },
                sku: p.sku || p.id || "",
                offers: {
                  "@type": "Offer",
                  url: productUrl,
                  priceCurrency: p.currency || "USD",
                  price:
                    p.price_sale != null
                      ? p.price_sale
                      : p.price != null
                      ? p.price
                      : undefined,
                  availability: p.stockstatus
                    ? "https://schema.org/InStock"
                    : "https://schema.org/OutOfStock",
                },
                aggregateRating:
                  p.ratingCount || p.ratingValue
                    ? {
                        "@type": "AggregateRating",
                        ratingValue: p.ratingValue || 4.5,
                        bestRating: p.bestRating || 5,
                        ratingCount: p.ratingCount || 0,
                      }
                    : undefined,
              };
            });

            const blogSchema = featuredBlogs.map((b) => ({
              "@type": "BlogPosting",
              headline: b.title || "",
              image: withUploads(b.image || ""),
              description: stripTags(b.excerpt || b.description || ""),
              url: makeAbsolute(b.url || `/blog/${b.slug || b.id || ""}`),
              datePublished: b.datePublished || b.published_at || undefined,
              author: { "@type": "Person", name: b.author_name || "Admin" },
            }));

            const schemaData = {
              "@context": "https://schema.org",
              "@graph": [
                {
                  "@type": "Organization",
                  name: "PESCO",
                  url: window.location.origin + "/",
                  logo: makeAbsolute("/Tonic.svg"),
                  description:
                    "PESCO is a leading eCommerce platform offering healthcare and wellness products.",
                  contactPoint: {
                    "@type": "ContactPoint",
                    telephone: "+1-800-654-3210",
                    contactType: "customer service",
                    areaServed: "US",
                    availableLanguage: "English",
                  },
                },
                {
                  "@type": "WebSite",
                  name: "PESCO",
                  url: window.location.origin + "/",
                  description: "Shop the latest healthcare products at PESCO.",
                  keywords:
                    "PESCO, Ecommerce, healthcare, online pharmacy, wellness products",
                },
                {
                  "@type": "LocalBusiness",
                  name: "PESCO Healthcare Store",
                  url: window.location.origin + "/",
                  image: makeAbsolute("/Tonic.svg"),
                  description:
                    "PESCO's physical store provides healthcare and wellness products.",
                  address: {
                    "@type": "PostalAddress",
                    streetAddress: "123 Healthcare Street",
                    addressLocality: "New York",
                    addressRegion: "NY",
                    postalCode: "10001",
                    addressCountry: "US",
                  },
                  telephone: "+1-800-654-3210",
                  areaServed: "US",
                },
                ...productSchema,
                ...blogSchema,
              ].filter(Boolean),
            };

            const script = document.createElement("script");
            script.type = "application/ld+json";
            script.text = JSON.stringify(schemaData);
            document.head.appendChild(script);
          })
          .catch((err) => console.error("Schema error", err));
      });
    </script>
  </head>

  <style>
    .post-thumbnails img {
      width: 700px;
      height: 380px;
      object-fit: cover;
    }

    .post-content1 img {
      width: 330px !important;
      height: 200px !important;
      object-fit: cover;
    }

    .post-content2 img {
      width: 342px !important;
      height: 223px !important;
      object-fit: cover;
    }

    @media (max-width: 576px) {
      .post-content1 img {
        width: 100% !important;
        height: 200px !important;
      }

      .post-content2 img {
        width: 100% !important;
        height: 200px !important;
      }
    }

    .deal-week img {
      width: 775px;
      height: 590px;
    }

    .simply-countdown {
      display: flex;
      justify-content: center;
      gap: 25px;
    }

    .countdown-section {
      text-align: center;
      border: 2px solid #ddd;
      border-radius: 50%;
      width: 96px;
      height: 94px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .countdown-amount {
      font-size: 32px;
      font-weight: 900;
      color: #1e1e1e;
    }
    .countdown-label {
      font-size: 14px;
      margin-top: 2px;
      color: #888;
      font-weight: 900;
    }

    .product-thumbnail .cart-button {
      opacity: 0;
      transition: opacity 0.3s;
    }

    .product-thumbnail:hover .cart-button {
      opacity: 1;
    }

    .category-img img {
      width: 262px;
      height: 250px;
    }

    .category-item.style-one.text-center {
      margin-bottom: 20px;
    }

    .banner-img1 img {
      width: 338px;
      height: 357px;
    }

    .price-amount {
      margin: 0;
      font-size: 40px;
      font-weight: 600;
      color: inherit;
    }

    .feature-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
      line-height: 1.2;
    }

    .banner-title {
      margin: 0;
      font-size: 1.125rem;
      font-weight: 600;
      line-height: 1.2;
    }

    .title {
      margin: 0;
      font-size: 1.125rem;
      font-weight: 600;
      line-height: 1.2;
    }

    .feature-title {
      margin: 0;
      font-size: 0.875rem;
      font-weight: 600;
      line-height: 1.2;
    }
  </style>

  <body>
    <div class="preloader">
      <div class="loader">
        <img src="assets/images/loader.gif" alt="Loader" />
      </div>
    </div>

    <div class="offcanvas__overlay"></div>

    <div class="sidemenu-wrapper-cart">
      <div class="sidemenu-content">
        <div class="widget widget-shopping-cart">
          <h4>My cart</h4>
          <div class="sidemenu-cart-close"><i class="far fa-times"></i></div>
          <div class="widget-shopping-cart-content">
            <ul class="pesco-mini-cart-list"></ul>
            <div class="cart-mini-total">
              <div class="cart-total">
                <span><strong>Subtotal:</strong></span>
                <span class="amount"
                  >1 Ã— <span><span class="currency">$</span>00.00</span></span
                >
              </div>
            </div>
            <div class="cart-button-box">
              <a href="checkout.html" class="theme-btn style-one"
                >Proceed to checkout</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <header class="header-area">
      <div class="search-header-main">
        <div class="container">
          <div class="search-header-inner">
            <div class="site-branding">
              <a href="index.html" class="brand-logo">
                <img
                  src="assets/images/logo/logo-main.png"
                  alt="Logo"
                  width="216"
                  height="66"
                  style="width: auto; height: auto; max-width: 100%"
                  srcset="
                    assets/images/logo/logo-main.png    1x,
                    assets/images/logo/logo-main@2x.png 2x
                  "
                />
              </a>
            </div>

            <div class="product-search-category">
              <form action="#">
                <select class="wide">
                  <option>All Categories</option>
                  <option>Man Shirts</option>
                  <option>Denim Jeans</option>
                  <option>Casual Suit</option>
                  <option>Summer Dress</option>
                  <option>Sweaters</option>
                  <option>Jackets</option>
                </select>
                <div class="form-group">
                  <input
                    type="text"
                    placeholder="Enter Search Products"
                    required
                  />
                  <button class="search-btn" type="button">
                    <i class="far fa-search" aria-hidden="true"></i>
                    <span class="visually-hidden">Search</span>
                  </button>
                </div>
              </form>
            </div>
            <div class="hotline-support item-rtl">
              <div class="icon">
                <i class="flaticon-support"></i>
              </div>
              <div class="info">
                <span>24/7 Support</span>
                <h5><a href="tel:+941234567894">+94 123 4567 894</a></h5>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="header-navigation style-one">
        <div class="container">
          <div class="primary-menu">
            <div class="site-branding d-lg-none d-block">
              <a href="index.html" class="brand-logo">
                <img
                  src="assets/images/logo/logo-main.png"
                  srcset="
                    assets/images/logo/logo-main.png    1x,
                    assets/images/logo/logo-main@2x.png 2x
                  "
                  alt="Logo"
                  width="216"
                  height="66"
                  style="width: auto; height: auto; max-width: 100%"
                />
              </a>
            </div>

            <div class="nav-inner-menu">
              <div class="main-categories-wrap d-none d-lg-block">
                <a class="categories-btn-active" href="/shops">
                  <span class="fas fa-list"></span
                  ><span class="text"
                    >Products Category<i class="fas fa-angle-down"></i
                  ></span>
                </a>
                <div
                  class="categories-dropdown-wrap categories-dropdown-active"
                >
                  <div class="categori-dropdown-item">
                    <ul>
                      <li>
                        <a href="shops.html">
                          <img
                            src="assets/images/icon/shirt.png"
                            alt="Shirts"
                          />Man Shirts</a
                        >
                      </li>
                      <li>
                        <a href="shops.html">
                          <img
                            src="assets/images/icon/denim.png"
                            alt="Jeans"
                          />Denim Jeans</a
                        >
                      </li>
                      <li>
                        <a href="shops.html">
                          <img
                            src="assets/images/icon/suit.png"
                            alt="Suit"
                          />Casual Suit</a
                        >
                      </li>
                      <li>
                        <a href="shops.html">
                          <img
                            src="assets/images/icon/dress.png"
                            alt="Dress"
                          />Summer Dress</a
                        >
                      </li>
                      <li>
                        <a href="shops.html">
                          <img
                            src="assets/images/icon/sweaters.png"
                            alt="Sweaters"
                          />Sweaters</a
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="more_slide_open">
                    <div class="categori-dropdown-item">
                      <ul>
                        <li>
                          <a href="#"
                            ><img
                              src="assets/images/icon/jacket.png"
                              alt="Jackets"
                            />Jackets</a
                          >
                        </li>
                      </ul>
                    </div>
                  </div>
                  <div class="more_categories">
                    <span class="icon"></span> <span>Show more...</span>
                  </div>
                </div>
              </div>
              <div class="pesco-nav-main">
                <div class="pesco-nav-menu">
                  <div class="nav-search mb-40 d-block d-lg-none">
                    <div class="form-group">
                      <input
                        type="search"
                        class="form_control"
                        placeholder="Search Here"
                        name="search"
                      />
                      <button class="search-btn" type="button">
                        <i class="far fa-search" aria-hidden="true"></i>
                        <span class="visually-hidden">Search</span>
                      </button>
                    </div>
                  </div>
                  <div class="pesco-tabs style-three d-block d-lg-none">
                    <ul class="nav nav-tabs mb-30" role="tablist">
                      <li>
                        <button
                          class="nav-link active"
                          data-bs-toggle="tab"
                          data-bs-target="#nav1"
                          role="tab"
                        >
                          Menu
                        </button>
                      </li>
                      <li>
                        <button
                          class="nav-link"
                          data-bs-toggle="tab"
                          data-bs-target="#nav2"
                          role="tab"
                        >
                          Category
                        </button>
                      </li>
                    </ul>
                    <div class="tab-content">
                      <div class="tab-pane fade show active" id="nav1">
                        <nav class="main-menu">
                          <ul>
                            <li class="menu-item has-children">
                              <a href="index.html">Home</a>
                              <ul class="sub-menu">
                                <li><a href="index.html">Home 01</a></li>
                                <li><a href="index-2.html">Home 02</a></li>
                              </ul>
                            </li>
                            <li class="menu-item has-children">
                              <a href="/shops-grid">Shop</a>
                              <ul class="sub-menu">
                                <li><a href="shops-grid.html">Shop Grid</a></li>
                                <li>
                                  <a href="shops.html">Shop left Sidebar</a>
                                </li>
                                <li>
                                  <a href="shops-right-sidebar.html"
                                    >Shop Right Sidebar</a
                                  >
                                </li>
                                <li>
                                  <a href="shop-details.html"
                                    >Product Details</a
                                  >
                                </li>
                                <li><a href="cart.html">Cart</a></li>
                                <li><a href="checkout.html">Checkout</a></li>
                                <li><a href="wishlists.html">Wishlist</a></li>
                              </ul>
                            </li>
                            <li class="menu-item has-children">
                              <a href="/blogs">Blog</a>
                              <ul class="sub-menu">
                                <li><a href="blogs.html">Our Blog</a></li>
                                <li>
                                  <a href="blog-details.html">Blog Details</a>
                                </li>
                              </ul>
                            </li>
                            <li class="menu-item has-children">
                              <a href="/about-us">Pages</a>
                              <ul class="sub-menu">
                                <li><a href="about-us.html">About Us</a></li>
                                <li><a href="faq.html">Faqs</a></li>
                              </ul>
                            </li>
                            <li class="menu-item">
                              <a href="contact.html">Contact</a>
                            </li>
                          </ul>
                        </nav>
                      </div>
                      <div class="tab-pane fade" id="nav2">
                        <div class="categori-dropdown-item">
                          <ul>
                            <li>
                              <a href="shops.html">
                                <img
                                  src="assets/images/icon/shirt.png"
                                  alt="Shirts"
                                />Man Shirts</a
                              >
                            </li>
                            <li>
                              <a href="shops.html">
                                <img
                                  src="assets/images/icon/denim.png"
                                  alt="Jeans"
                                />Denim Jeans</a
                              >
                            </li>
                            <li>
                              <a href="shops.html">
                                <img
                                  src="assets/images/icon/suit.png"
                                  alt="Suit"
                                />Casual Suit</a
                              >
                            </li>
                            <li>
                              <a href="shops.html">
                                <img
                                  src="assets/images/icon/dress.png"
                                  alt="Dress"
                                />Summer Dress</a
                              >
                            </li>
                            <li>
                              <a href="shops.html">
                                <img
                                  src="assets/images/icon/sweaters.png"
                                  alt="Sweaters"
                                />Sweaters</a
                              >
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="hotline-support d-flex d-lg-none mt-30">
                    <div class="icon">
                      <i class="flaticon-support"></i>
                    </div>
                    <div class="info">
                      <span>24/7 Support</span>
                      <h5><a href="tel:+941234567894">+94 123 4567 894</a></h5>
                    </div>
                  </div>
                  <nav class="main-menu d-none d-lg-block">
                    <ul>
                      <li class="menu-item has-children">
                        <a href="index.html">Home</a>
                        <ul class="sub-menu">
                          <li><a href="index.html">Home 01</a></li>
                          <li><a href="index-2.html">Home 02</a></li>
                        </ul>
                      </li>
                      <li class="menu-item has-children">
                        <a href="/shops-grid">Shop</a>
                        <ul class="sub-menu">
                          <li><a href="shops-grid.html">Shop Grid</a></li>
                          <li><a href="shops.html">Shop left Sidebar</a></li>
                          <li>
                            <a href="shops-right-sidebar.html"
                              >Shop Right Sidebar</a
                            >
                          </li>
                          <li>
                            <a href="shop-details.html">Product Details</a>
                          </li>
                          <li><a href="cart.html">Cart</a></li>
                          <li><a href="checkout.html">Checkout</a></li>
                          <li><a href="wishlists.html">Wishlist</a></li>
                        </ul>
                      </li>
                      <li class="menu-item has-children">
                        <a href="/blogs">Blog</a>
                        <ul class="sub-menu">
                          <li><a href="blogs.html">Our Blog</a></li>
                          <li><a href="blog-details.html">Blog Details</a></li>
                        </ul>
                      </li>
                      <li class="menu-item has-children">
                        <a href="/about-us">Pages</a>
                        <ul class="sub-menu">
                          <li><a href="about-us.html">About Us</a></li>
                          <li><a href="faq.html">Faqs</a></li>
                        </ul>
                      </li>
                      <li class="menu-item">
                        <a href="contact.html">Contact</a>
                      </li>
                    </ul>
                  </nav>
                </div>
              </div>
            </div>
            <div class="nav-right-item style-one">
              <ul>
                <li>
                  <div class="deals d-lg-block d-none">
                    <i class="far fa-fire-alt"></i>Deal
                  </div>
                </li>
                <li>
                  <a href="wishlists.html">
                    <div class="wishlist-btn d-lg-block d-none">
                      <i class="far fa-heart"></i>
                      <span class="pro-count" id="pro-counts1">00</span>
                    </div>
                  </a>
                </li>

                <li>
                  <div class="cart-button d-flex align-items-center">
                    <div class="icon">
                      <i class="fas fa-shopping-bag"></i
                      ><span class="pro-count" id="pro-counts">00</span>
                    </div>
                  </div>
                </li>
              </ul>
              <div class="navbar-toggler d-block d-lg-none">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="main-bg">
      <section class="hero-section">
        <div class="hero-wrapper-one">
          <div class="container">
            <div class="hero-dots"></div>
            <div class="hero-slider-one">
              <div class="single-hero-slider">
                <div class="row align-items-center">
                  <div class="col-lg-6">
                    <div class="hero-content style-one mb-50">
                      <span class="sub-heading">Best for your categories</span>
                      <h1>
                        Exclusive Collection <br />
                        in <span>Our Online</span> Store
                      </h1>
                      <p>
                        Discover our exclusive collection available only in our
                        online store. Shop now for unique and premium items that
                        you won't find anywhere else.
                      </p>
                      <ul>
                        <li>
                          <div class="price-box">
                            <div class="currency" aria-hidden="true">$</div>

                            <div class="text">
                              <span class="discount">Discount Price</span>

                              <p class="price-amount">
                                <span class="visually-hidden">Price: </span>
                                <span class="amount">140.00</span>
                              </p>
                            </div>
                          </div>
                        </li>

                        <li>
                          <img
                            src="assets/images/hero/line-1.png"
                            srcset="
                              assets/images/hero/line-1.png    1x,
                              assets/images/hero/line-1@2x.png 2x
                            "
                            alt="Hero Line"
                            width="284"
                            height="44"
                            style="width: auto; height: auto; max-width: 100%"
                          />
                        </li>

                        <li>
                          <a href="shops.html" class="theme-btn style-one"
                            >Shop Now</a
                          >
                        </li>
                      </ul>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="hero-image-box">
                      <div class="hero-image">
                        <img
                          src="https://avatars.mds.yandex.net/i?id=07a62907c914895af835c42858d22addc8b9abd7-5611890-images-thumbs&n=500"
                          srcset="
                            https://avatars.mds.yandex.net/i?id=07a62907c914895af835c42858d22addc8b9abd7-5611890-images-thumbs&n=500  1x,
                            https://avatars.mds.yandex.net/i?id=07a62907c914895af835c42858d22addc8b9abd7-5611890-images-thumbs&n=1000 2x
                          "
                          alt="Hero Image"
                          style="width: 460px; height: 550px; object-fit: cover"
                        />
                        <div
                          class="hero-shape bg_cover"
                          style="
                            background-image: url(assets/images/hero/hero-one-shape1.png);
                          "
                        ></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="single-hero-slider">
                <div class="row align-items-center">
                  <div class="col-lg-6">
                    <div class="hero-content style-one mb-50">
                      <span class="sub-heading">Best for your categories</span>
                      <h1>
                        Exclusive Collection <br />
                        in <span>Our Online</span> Store
                      </h1>
                      <p>
                        Discover our exclusive collection available only in our
                        online store. Shop now for unique and premium items that
                        you won't find anywhere else.
                      </p>
                      <ul>
                        <li>
                          <div class="price-box">
                            <div class="currency" aria-hidden="true">$</div>

                            <div class="text">
                              <span class="discount">Discount Price</span>

                              <p class="price-amount">
                                <span class="visually-hidden">Price: </span>
                                <span class="amount">140.00</span>
                              </p>
                            </div>
                          </div>
                        </li>

                        <li>
                          <img
                            src="assets/images/hero/line-1.png"
                            srcset="
                              assets/images/hero/line-1.png    1x,
                              assets/images/hero/line-1@2x.png 2x
                            "
                            alt="Hero Line"
                            width="284"
                            height="44"
                            style="width: auto; height: auto; max-width: 100%"
                          />
                        </li>

                        <li>
                          <a href="shops.html" class="theme-btn style-one"
                            >Shop Now</a
                          >
                        </li>
                      </ul>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="hero-image-box">
                      <div class="hero-image">
                        <img
                          src="https://avatars.mds.yandex.net/i?id=1a9aed14f46f993bbb117471924bf8973e38019d-5235524-images-thumbs&n=500"
                          srcset="
                            https://avatars.mds.yandex.net/i?id=1a9aed14f46f993bbb117471924bf8973e38019d-5235524-images-thumbs&n=500  1x,
                            https://avatars.mds.yandex.net/i?id=1a9aed14f46f993bbb117471924bf8973e38019d-5235524-images-thumbs&n=1000 2x
                          "
                          alt="Hero Image"
                          style="width: 460px; height: 550px; object-fit: cover"
                        />
                        <div
                          class="hero-shape bg_cover"
                          style="
                            background-image: url(assets/images/hero/hero-one-shape1.png);
                          "
                        ></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="single-hero-slider">
                <div class="row align-items-center">
                  <div class="col-lg-6">
                    <div class="hero-content style-one mb-50">
                      <span class="sub-heading">Best for your categories</span>
                      <h1>
                        Exclusive Collection <br />
                        in <span>Our Online</span> Store
                      </h1>
                      <p>
                        Discover our exclusive collection available only in our
                        online store. Shop now for unique and premium items that
                        you won't find anywhere else.
                      </p>
                      <ul>
                        <li>
                          <div class="price-box">
                            <div class="currency" aria-hidden="true">$</div>

                            <div class="text">
                              <span class="discount">Discount Price</span>
                              <p class="price-amount">
                                <span class="visually-hidden">Price: </span>
                                <span class="amount">140.00</span>
                              </p>
                            </div>
                          </div>
                        </li>

                        <li>
                          <img
                            src="assets/images/hero/line-1.png"
                            srcset="
                              assets/images/hero/line-1.png    1x,
                              assets/images/hero/line-1@2x.png 2x
                            "
                            alt="Hero Line"
                            width="284"
                            height="44"
                            style="width: auto; height: auto; max-width: 100%"
                          />
                        </li>

                        <li>
                          <a href="shops.html" class="theme-btn style-one"
                            >Shop Now</a
                          >
                        </li>
                      </ul>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="hero-image-box">
                      <div class="hero-image">
                        <img
                          src="https://avatars.mds.yandex.net/i?id=62ab96b1b3e353cb70232e304a225d4feab48b5f-16455012-images-thumbs&n=500"
                          srcset="
                            https://avatars.mds.yandex.net/i?id=62ab96b1b3e353cb70232e304a225d4feab48b5f-16455012-images-thumbs&n=500  1x,
                            https://avatars.mds.yandex.net/i?id=62ab96b1b3e353cb70232e304a225d4feab48b5f-16455012-images-thumbs&n=1000 2x
                          "
                          alt="Hero Image"
                          style="width: 460px; height: 550px; object-fit: cover"
                        />
                        <div
                          class="hero-shape bg_cover"
                          style="
                            background-image: url(assets/images/hero/hero-one-shape1.png);
                          "
                        ></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="animated-headline-area primary-dark-bg pt-25 pb-25">
        <div class="headline-wrap style-one">
          <span class="marquee-wrap">
            <span class="marquee-inner left">
              <span class="marquee-item"
                ><b>Women</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Shirts</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Jackets</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Jeans</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Blazer</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Men</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Jackets</b><i class="fas fa-bahai"></i
              ></span>
            </span>
            <span class="marquee-inner left">
              <span class="marquee-item"
                ><b>Women</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Shirts</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Jackets</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Jeans</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Blazer</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Men</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Jackets</b><i class="fas fa-bahai"></i
              ></span>
            </span>
            <span class="marquee-inner left">
              <span class="marquee-item"
                ><b>Women</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Shirts</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Jackets</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Jeans</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Blazer</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Men</b><i class="fas fa-bahai"></i
              ></span>
              <span class="marquee-item"
                ><b>Jackets</b><i class="fas fa-bahai"></i
              ></span>
            </span>
          </span>
        </div>
      </section>

      <section class="features-section pt-130">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <div
                class="features-wrapper"
                data-aos="fade-up"
                data-aos-delay="10"
                data-aos-duration="1000"
              >
                <div class="iconic-box-item icon-left-box mb-25">
                  <div class="icon">
                    <i class="fas fa-shipping-fast"></i>
                  </div>
                  <div class="content">
                    <h3 class="feature-title">Free Shipping</h3>
                    <p>You get your items delivered without any extra cost.</p>
                  </div>
                </div>
                <div class="divider mb-25">
                  <img src="assets/images/divider.png" alt="divider" />
                </div>
                <div class="iconic-box-item icon-left-box mb-25">
                  <div class="icon">
                    <i class="fas fa-microphone"></i>
                  </div>
                  <div class="content">
                    <h5>Great Support 24/7</h5>
                    <p>
                      Our customer support team is available around the clock
                    </p>
                  </div>
                </div>
                <div class="divider mb-25">
                  <img src="assets/images/divider.png" alt="divider" />
                </div>
                <div class="iconic-box-item icon-left-box mb-25">
                  <div class="icon">
                    <i class="far fa-handshake"></i>
                  </div>
                  <div class="content">
                    <h5>Return Available</h5>
                    <p>
                      Making it easy to return any items if you're not
                      satisfied.
                    </p>
                  </div>
                </div>
                <div class="divider mb-25">
                  <img src="assets/images/divider.png" alt="divider" />
                </div>
                <div class="iconic-box-item icon-left-box mb-25">
                  <div class="icon">
                    <i class="fas fa-sack-dollar"></i>
                  </div>
                  <div class="content">
                    <h5>Secure Payment</h5>
                    <p>Shop with confidence knowing that our secure payment</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="category-section pt-125 overflow-hidden">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-lg-6 col-md-8">
              <div
                class="section-title mb-50"
                data-aos="fade-right"
                data-aos-delay="10"
                data-aos-duration="800"
              >
                <div class="sub-heading d-inline-flex align-items-center">
                  <i class="flaticon-sparkler"></i>
                  <span class="sub-title">Categories</span>
                </div>
                <h2>Browse Top Category</h2>
              </div>
            </div>
            <div class="col-lg-6 col-md-4">
              <div
                class="category-arrows style-one mb-60"
                data-aos="fade-left"
                data-aos-delay="15"
                data-aos-duration="1000"
              ></div>
            </div>
          </div>
        </div>
        <div
          class="category-slider-one"
          data-aos="fade-up"
          data-aos-delay="20"
          data-aos-duration="1200"
        >
          <div class="category-item style-one text-center">
            <div class="category-img">
              <img
                src="assets/images/category/category-1.png"
                alt="category image"
              />
            </div>
            <div class="category-content">
              <a href="index.html" class="category-btn">Man Shirts</a>
            </div>
          </div>
          <div class="category-item style-one text-center">
            <div class="category-img">
              <img
                src="assets/images/category/category-2.png"
                alt="category image"
              />
            </div>
            <div class="category-content">
              <a href="index.html" class="category-btn">Denim Jeans</a>
            </div>
          </div>
          <div class="category-item style-one text-center">
            <div class="category-img">
              <img
                src="assets/images/category/category-3.png"
                alt="category image"
              />
            </div>
            <div class="category-content">
              <a href="index.html" class="category-btn">Casual Suit</a>
            </div>
          </div>
          <div class="category-item style-one text-center">
            <div class="category-img">
              <img
                src="assets/images/category/category-4.png"
                alt="category image"
              />
            </div>
            <div class="category-content">
              <a href="index.html" class="category-btn">Summer Dress</a>
            </div>
          </div>
          <div class="category-item style-one text-center">
            <div class="category-img">
              <img
                src="assets/images/category/category-5.png"
                alt="category image"
              />
            </div>
            <div class="category-content">
              <a href="index.html" class="category-btn">Sweaters</a>
            </div>
          </div>
          <div class="category-item style-one text-center">
            <div class="category-img">
              <img
                src="assets/images/category/category-6.png"
                alt="category image"
              />
            </div>
            <div class="category-content">
              <a href="index.html" class="category-btn">Jackets</a>
            </div>
          </div>
          <div class="category-item style-one text-center">
            <div class="category-img">
              <img
                src="assets/images/category/category-4.png"
                alt="category image"
              />
            </div>
            <div class="category-content">
              <a href="index.html" class="category-btn">Summer Dress</a>
            </div>
          </div>
        </div>
      </section>

      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const BASE_IMAGE_URL = "http://147.93.45.171:1600/uploads/";
          const sliderRoot =
            document.querySelector("#category-slider") ||
            document.querySelector(".category-slider-one");
          if (!sliderRoot) return;

          function escapeText(s) {
            return String(s == null ? "" : s)
              .replace(/&/g, "&amp;")
              .replace(/</g, "&lt;")
              .replace(/>/g, "&gt;")
              .replace(/"/g, "&quot;")
              .replace(/'/g, "&#39;");
          }

          let listEl = sliderRoot.querySelector(".category-slider-list");
          if (!listEl) {
            listEl = document.createElement("ul");
            listEl.className = "category-slider-list";
            listEl.setAttribute("role", "list");
            sliderRoot.innerHTML = "";
            sliderRoot.appendChild(listEl);
          }

          function createCategoryItem(item) {
            const li = document.createElement("li");
            li.className = "category-item";
            li.setAttribute("role", "listitem");

            const imgWrap = document.createElement("div");
            imgWrap.className = "category-img";

            const img = document.createElement("img");
            const name =
              item && item.name ? String(item.name).trim() : "Category";
            const imageFilename =
              item && item.image ? String(item.image).trim() : "default.png";
            img.alt = escapeText(name);
            img.loading = "lazy";
            img.decoding = "async";

            if (item && item.width && item.height) {
              img.width = parseInt(item.width, 10) || null;
              img.height = parseInt(item.height, 10) || null;
            }

            img.src = BASE_IMAGE_URL + imageFilename;

            imgWrap.appendChild(img);

            const content = document.createElement("div");
            content.className = "category-content";

            const link = document.createElement("a");
            link.className = "category-btn";
            link.href = "/shop";
            link.textContent = name;
            link.setAttribute("aria-label", `Browse ${name} category`);

            content.appendChild(link);

            li.appendChild(imgWrap);
            li.appendChild(content);

            return li;
          }

          function loadCategories() {
            fetch("http://147.93.45.171:1600/productcatdata", {
              cache: "no-store",
            })
              .then(function (res) {
                if (!res.ok) throw new Error("Network response was not ok");
                return res.json();
              })
              .then(function (data) {
                if (!Array.isArray(data)) return;

                listEl.innerHTML = "";

                const categories = data.filter(function (c) {
                  const published =
                    String(c.status || "").toLowerCase() === "published";
                  const featured =
                    String(c.is_featured || "").toLowerCase() === "yes";
                  return published && featured;
                });

                const toRender = categories.length
                  ? categories
                  : data.filter(function (c) {
                      return (
                        String(c.status || "").toLowerCase() === "published"
                      );
                    });

                toRender.forEach(function (cat) {
                  listEl.appendChild(createCategoryItem(cat));
                });

                const live = document.getElementById("site-live-announcer");
                if (live) {
                  live.textContent = `${toRender.length} categories loaded.`;
                }

                try {
                  if (typeof initCategorySlider === "function") {
                    initCategorySlider();
                  } else if (
                    window.jQuery &&
                    typeof jQuery === "function" &&
                    jQuery.fn &&
                    jQuery.fn.slick
                  ) {
                    const $el = jQuery(
                      ".category-slider-one .category-slider-list"
                    );
                    if ($el.hasClass("slick-initialized")) {
                      $el.slick("refresh");
                    } else {
                      $el.slick({
                        slidesToShow: 4,
                        slidesToScroll: 1,
                        responsive: [
                          { breakpoint: 1200, settings: { slidesToShow: 3 } },
                          { breakpoint: 900, settings: { slidesToShow: 2 } },
                          { breakpoint: 600, settings: { slidesToShow: 1 } },
                        ],
                        accessibility: true,
                        dots: false,
                        arrows: true,
                      });
                    }
                  } else if (window.Swiper) {
                    if (
                      sliderRoot.swiper &&
                      typeof sliderRoot.swiper.update === "function"
                    ) {
                      sliderRoot.swiper.update();
                    } else {
                      new Swiper(sliderRoot, {
                        slidesPerView: 4,
                        spaceBetween: 16,
                        breakpoints: {
                          1200: { slidesPerView: 4 },
                          900: { slidesPerView: 3 },
                          600: { slidesPerView: 2 },
                          0: { slidesPerView: 1 },
                        },
                        a11y: true,
                        keyboard: { enabled: true, onlyInViewport: true },
                        navigation: {
                          nextEl: ".swiper-button-next",
                          prevEl: ".swiper-button-prev",
                        },
                      });
                    }
                  }
                } catch (err) {
                  console.warn("Could not auto-refresh slider:", err);
                }
              })
              .catch(function (err) {
                console.error("Failed to load category data:", err);
                const live = document.getElementById("site-live-announcer");
                if (live) live.textContent = "Failed to load categories.";
              });
          }

          if (!document.getElementById("site-live-announcer")) {
            const live = document.createElement("div");
            live.id = "site-live-announcer";
            live.setAttribute("role", "status");
            live.setAttribute("aria-live", "polite");
            live.className = "visually-hidden";
            document.body.appendChild(live);
          }

          loadCategories();

          const observer = new MutationObserver(function (mutations) {
            for (const m of mutations) {
              for (const n of m.addedNodes) {
                if (!(n instanceof HTMLElement)) continue;
                if (n === sliderRoot || n.contains(sliderRoot)) {
                  loadCategories();
                  return;
                }
              }
            }
          });
          observer.observe(document.body, { childList: true, subtree: true });
        });
      </script>

      <section class="banner-section pt-130">
        <div class="container">
          <div class="row" id="flash-row">
            <div class="col-lg-6 banner-flashes">
              <div
                class="banner-item style-one bg-one mb-40"
                data-aos="fade-up"
                data-aos-delay="10"
                data-aos-duration="900"
              >
                <div class="shape shape-one">
                  <span
                    ><img src="assets/images/banner/discount.png" alt="shape"
                  /></span>
                </div>
                <div class="shape shape-two">
                  <span
                    ><img src="assets/images/banner/line.png" alt="shape"
                  /></span>
                </div>
                <div class="banner-img banner-img1">
                  <img src="" alt="Image" />
                </div>
                <div class="banner-content">
                  <span>UP TO <span class="off"></span></span>
                  <h4></h4>
                  <a href="shops.html" class="theme-btn style-one">Shop Now</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <script>
        document.addEventListener("DOMContentLoaded", async () => {
          const API_BASE = "http://147.93.45.171:1600";
          const ROW_ID = "flash-row";
          const row = document.getElementById(ROW_ID);
          if (!row) return;

          const template = row.querySelector(".banner-flashes");
          if (!template) {
            console.warn("Missing .banner-flashes template inside #" + ROW_ID);
            return;
          }

          let live = document.getElementById("site-live-announcer");
          if (!live) {
            live = document.createElement("div");
            live.id = "site-live-announcer";
            live.setAttribute("role", "status");
            live.setAttribute("aria-live", "polite");
            live.className = "visually-hidden";
            document.body.appendChild(live);
          }

          function parseMoney(val) {
            if (!val && val !== 0) return NaN;
            try {
              return parseFloat(String(val).replace(/[^0-9.]/g, "")) || NaN;
            } catch {
              return NaN;
            }
          }

          async function fetchFlashSales() {
            const url = API_BASE + "/flashsalesmaindata";
            const res = await fetch(url, { cache: "no-store" });
            if (!res.ok) throw new Error(`HTTP ${res.status}`);
            const data = await res.json();
            return data;
          }

          function showNoOffers(targetEl) {
            if (!targetEl) return;
            targetEl.innerHTML =
              '<div class="col-12 text-center"><p>No offers available.</p></div>';
            live.textContent = "No flash offers available.";
            if (window.AOS) AOS.refresh();
          }

          try {
            let sales = [];
            try {
              sales = await fetchFlashSales();
            } catch (err) {
              console.error("Failed to fetch flash sales:", err);
              showNoOffers(row);
              sales = [];
            }

            if (!Array.isArray(sales) || sales.length === 0) {
              showNoOffers(row);
            } else {
              const today = new Date();
              const valid = sales.filter((item) => {
                if (!item || !item.end_date) return false;
                const end = new Date(item.end_date + "T23:59:59");
                return !isNaN(end) && end >= today;
              });

              if (valid.length === 0) {
                showNoOffers(row);
              } else {
                row.innerHTML = "";
                valid.slice(0, 2).forEach((item, idx) => {
                  const slot = template.cloneNode(true);
                  if (slot.id) slot.removeAttribute("id");

                  const bannerItem = slot.querySelector(".banner-item");
                  if (bannerItem) {
                    if (idx === 0) {
                      bannerItem.classList.remove("bg-two");
                      bannerItem.classList.add("bg-one");
                      bannerItem.setAttribute("data-aos-delay", "10");
                      bannerItem.setAttribute("data-aos-duration", "900");
                    } else {
                      bannerItem.classList.remove("bg-one");
                      bannerItem.classList.add("bg-two");
                      bannerItem.setAttribute("data-aos-delay", "20");
                      bannerItem.setAttribute("data-aos-duration", "1100");
                    }
                  }

                  const imgEl = slot.querySelector(".banner-img img");
                  if (imgEl) {
                    const filename =
                      item && item.image ? String(item.image).trim() : "";
                    imgEl.src = filename
                      ? `${API_BASE}/uploads/${filename}`
                      : "";
                    imgEl.alt =
                      item && item.product_name
                        ? String(item.product_name)
                        : "Flash offer image";
                    imgEl.loading = "lazy";
                    imgEl.decoding = "async";
                    if (item && item.width && item.height) {
                      const w = parseInt(item.width, 10);
                      const h = parseInt(item.height, 10);
                      if (!isNaN(w) && !isNaN(h)) {
                        imgEl.width = w;
                        imgEl.height = h;
                      }
                    }
                  }

                  const orig = parseMoney(item && item.price);
                  const sale = parseMoney(item && item.price_sale);
                  let pct = 0;
                  if (!isNaN(orig) && !isNaN(sale) && orig > 0) {
                    pct = Math.round(((orig - sale) / orig) * 100);
                  } else {
                    pct = 0;
                  }
                  const offEl = slot.querySelector(".off");
                  if (offEl) {
                    offEl.textContent = pct + "%";
                    offEl.setAttribute("aria-label", `Discount ${pct} percent`);
                  }

                  const titleEl =
                    slot.querySelector(".banner-title") ||
                    slot.querySelector("h4");
                  if (titleEl) {
                    titleEl.textContent =
                      item && item.product_name
                        ? String(item.product_name)
                        : "Product";
                    const nodeName = titleEl.nodeName.toLowerCase();
                    if (
                      nodeName !== "h1" &&
                      nodeName !== "h2" &&
                      nodeName !== "h3" &&
                      nodeName !== "h4" &&
                      nodeName !== "h5" &&
                      nodeName !== "h6"
                    ) {
                      titleEl.setAttribute("role", "heading");
                      titleEl.setAttribute("aria-level", "3");
                    }
                  }

                  row.appendChild(slot);
                });

                live.textContent = `${Math.min(
                  valid.length,
                  2
                )} flash offer(s) loaded.`;
                if (window.AOS) AOS.refresh();
              }
            }
          } catch (err) {
            console.error("Rendering error:", err);
            showNoOffers(row);
          }

          const section = document.getElementById("best-deal");
          if (!section) return;

          let sale;
          try {
            const data = await fetchFlashSales();
            if (!Array.isArray(data) || data.length === 0) {
              section.innerHTML = `
        <div class="container">
          <div class="row">
            <div class="col-lg-12 text-center py-5">
              <p>No offers available.</p>
            </div>
          </div>
        </div>`;
              live.textContent = "No best-deal offers available.";
              if (window.AOS) AOS.refresh();
              return;
            }
            sale = data[0];
          } catch (err) {
            console.error("Best-deal fetch error:", err);
            section.innerHTML = `
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center py-5">
            <p>No offers available.</p>
          </div>
        </div>
      </div>`;
            live.textContent = "No best-deal offers available.";
            if (window.AOS) AOS.refresh();
            return;
          }

          const imgEl2 = document.querySelector(".deal-img img");
          if (imgEl2) {
            const filename =
              sale && sale.image ? String(sale.image).trim() : "";
            imgEl2.src = filename ? `${API_BASE}/uploads/${filename}` : "";
            imgEl2.alt =
              sale && sale.product_name
                ? String(sale.product_name)
                : "Deal image";
            imgEl2.loading = "lazy";
            imgEl2.decoding = "async";
            if (sale && sale.width && sale.height) {
              const w = parseInt(sale.width, 10);
              const h = parseInt(sale.height, 10);
              if (!isNaN(w) && !isNaN(h)) {
                imgEl2.width = w;
                imgEl2.height = h;
              }
            }
          }

          const subHeading = document.querySelector(
            ".deal-content .sub-heading"
          );
          if (subHeading) {
            subHeading.innerHTML = "";
            const icon = document.createElement("i");
            icon.className = "fas fa-tags";
            icon.setAttribute("aria-hidden", "true");
            subHeading.appendChild(icon);
            const textNode = document.createTextNode(
              "Deal of the " + (sale && sale.name ? sale.name : "")
            );
            subHeading.appendChild(textNode);
          }

          const countdownEl = document.getElementById("flashsale-countdown");
          if (!countdownEl || !sale || !sale.end_date) {
            if (countdownEl) countdownEl.textContent = "";
            return;
          }

          countdownEl.setAttribute("role", "status");
          countdownEl.setAttribute("aria-live", "polite");

          const endDate = new Date(sale.end_date + "T23:59:59");
          if (isNaN(endDate)) {
            countdownEl.textContent = "";
            return;
          }

          let intervalId = null;
          function plural(n, singular) {
            return n === 1 ? singular : singular + "s";
          }

          function updateCountdown() {
            const diff = endDate - new Date();
            if (diff < 0) {
              section.innerHTML = `
        <div class="container">
          <div class="row">
            <div class="col-lg-12 text-center py-5">
              <p>No offers available.</p>
            </div>
          </div>
        </div>`;
              live.textContent = "Flash sale ended.";
              if (intervalId) clearInterval(intervalId);
              if (window.AOS) AOS.refresh();
              return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / (1000 * 60)) % 60);
            const seconds = Math.floor((diff / 1000) % 60);

            countdownEl.innerHTML = "";
            const parts = [
              { n: days, label: plural(days, "day") },
              { n: hours, label: plural(hours, "hour") },
              { n: minutes, label: plural(minutes, "minute") },
              { n: seconds, label: plural(seconds, "second") },
            ];

            parts.forEach((part) => {
              const sec = document.createElement("div");
              sec.className = "countdown-section";
              const amt = document.createElement("span");
              amt.className = "countdown-amount";
              amt.textContent = String(part.n);
              const lbl = document.createElement("span");
              lbl.className = "countdown-label";
              lbl.textContent = part.label;
              sec.appendChild(amt);
              sec.appendChild(lbl);
              countdownEl.appendChild(sec);
            });

            live.textContent = `Flash sale ends in ${days} day${
              days !== 1 ? "s" : ""
            }, ${hours} hour${hours !== 1 ? "s" : ""}, ${minutes} minute${
              minutes !== 1 ? "s" : ""
            }.`;
            if (window.AOS) AOS.refresh();
          }

          updateCountdown();
          intervalId = setInterval(updateCountdown, 1000);
        });
      </script>

      <section class="features-products pt-90">
        <div class="container">
          <div class="row">
            <div class="col-lg-6">
              <div
                class="section-title mb-50 text-center text-lg-start"
                data-aos="fade-right"
                data-aos-delay="10"
                data-aos-duration="1000"
              >
                <div class="sub-heading d-inline-flex align-items-center">
                  <i class="flaticon-sparkler"></i>
                  <span class="sub-title">Feature Products</span>
                </div>
                <h2>Our Features Collection</h2>
              </div>
            </div>

            <div class="col-lg-6">
              <div
                class="pesco-tabs style-one mb-50"
                data-aos="fade-left"
                data-aos-delay="15"
                data-aos-duration="1200"
              >
                <ul class="nav nav-tabs" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link active"
                      id="tab-best-sellers"
                      data-bs-toggle="tab"
                      data-bs-target="#cat1"
                      type="button"
                      role="tab"
                      aria-controls="cat1"
                      aria-selected="true"
                    >
                      Best Sellers
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link"
                      id="tab-new-products"
                      data-bs-toggle="tab"
                      data-bs-target="#cat2"
                      type="button"
                      role="tab"
                      aria-controls="cat2"
                      aria-selected="false"
                    >
                      New Products
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link"
                      id="tab-sale-products"
                      data-bs-toggle="tab"
                      data-bs-target="#cat3"
                      type="button"
                      role="tab"
                      aria-controls="cat3"
                      aria-selected="false"
                    >
                      Sale Products
                    </button>
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-lg-12">
              <div
                class="tab-content"
                data-aos="fade-up"
                data-aos-duration="1200"
              >
                <div class="tab-pane fade show active" id="cat1">
                  <div class="row justify-content-center"></div>
                </div>

                <div class="tab-pane fade" id="cat2">
                  <div class="row justify-content-center"></div>
                </div>

                <div class="tab-pane fade" id="cat3">
                  <div class="row justify-content-center"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <script>
        document.addEventListener("DOMContentLoaded", () => {
          function escapeHTML(str) {
            return String(str || "")
              .replace(/&/g, "&amp;")
              .replace(/</g, "&lt;")
              .replace(/>/g, "&gt;")
              .replace(/"/g, "&quot;")
              .replace(/'/g, "&#39;");
          }

          let liveRegion = document.getElementById("site-live-announcer");
          if (!liveRegion) {
            liveRegion = document.createElement("div");
            liveRegion.id = "site-live-announcer";
            liveRegion.setAttribute("role", "status");
            liveRegion.setAttribute("aria-live", "polite");
            liveRegion.className = "visually-hidden";
            document.body.appendChild(liveRegion);
          }
          function announce(text) {
            liveRegion.textContent = "";
            setTimeout(() => (liveRegion.textContent = text), 50);
          }

          function showBanner(msg, type = "success") {
            const b = document.createElement("div");
            b.className = `banner ${type}`;
            b.textContent = msg;
            Object.assign(b.style, {
              position: "fixed",
              top: "10px",
              left: "50%",
              transform: "translateX(-50%)",
              padding: "10px 20px",
              background: type === "success" ? "#4caf50" : "#f44336",
              color: "#fff",
              borderRadius: "4px",
              zIndex: 9999,
              boxShadow: "0 2px 6px rgba(0,0,0,0.3)",
            });
            document.body.appendChild(b);
            setTimeout(() => b.remove(), 3000);
          }

          async function fetchWithRetries(
            url,
            opts = {},
            maxRetries = 4,
            baseDelay = 300
          ) {
            for (let attempt = 0; attempt <= maxRetries; attempt++) {
              try {
                const cacheBust = `_=${Date.now()}`;
                const sep = url.includes("?") ? "&" : "?";
                const res = await fetch(url + sep + cacheBust, opts);
                if (!res.ok) throw new Error(`HTTP ${res.status}`);
                const text = await res.text();
                try {
                  return JSON.parse(text);
                } catch {
                  throw new Error("Invalid JSON: " + text.slice(0, 200));
                }
              } catch (err) {
                console.debug(
                  `fetchWithRetries attempt ${attempt} failed:`,
                  err.message || err
                );
                if (attempt === maxRetries) throw err;
                await new Promise((r) =>
                  setTimeout(r, baseDelay * Math.pow(2, attempt))
                );
              }
            }
          }

          async function postJson(url, payload = {}) {
            const res = await fetch(url, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            });
            const text = await res.text();
            if (!res.ok) {
              try {
                const body = JSON.parse(text);
                throw new Error(body.message || JSON.stringify(body));
              } catch {
                throw new Error(text || `HTTP ${res.status}`);
              }
            }
            try {
              return JSON.parse(text);
            } catch {
              return text;
            }
          }

          function makeSlug(name = "product") {
            return String(name)
              .toLowerCase()
              .replace(/\s+/g, "-")
              .replace(/[^\w-]+/g, "");
          }

          const listEl = document.querySelector(".pesco-mini-cart-list");
          const badgeEl = document.querySelector("#pro-counts");
          const wishlistEl = document.querySelector("#pro-counts1");
          const subtotalEl = document.querySelector(".cart-mini-total .amount");

          function makeCard(p = {}) {
            const price =
              parseFloat(
                String(p.price || p.price_sale || 0).replace(/[^0-9.]/g, "")
              ) || 0;
            const sale =
              parseFloat(String(p.price_sale || 0).replace(/[^0-9.]/g, "")) ||
              0;
            const slug = makeSlug(p.name);
            const safeName = escapeHTML(p.name || "");
            const safeStore = escapeHTML(p.store || "");
            const safeImage = escapeHTML(p.image || "");
            const safeSku = escapeHTML(p.sku || "");
            const safeStock = escapeHTML(p.stockstatus || "");
            const ariaNameForAddToWish = `Add ${safeName} to wishlist`;
            const ariaNameForQuickView = `View details for ${safeName}`;
            const ariaNameForAddToCart = `Add ${safeName} to cart`;

            const col = document.createElement("div");
            col.className = "col-xl-3 col-lg-4 col-sm-6";
            col.innerHTML = `
      <div class="product-item style-one mb-40" data-aos="fade-up">
        <div class="product-thumbnail">
          <a href="/shop-details/${slug}" class="w-100 h-100" aria-label="Open ${safeName} details">
            <img src="http://147.93.45.171:1600/uploads/${safeImage}" alt="${safeName}">
          </a>

          <div class="discount">${escapeHTML(p.label || "")}</div>

          <div class="hover-content">
            <a href="/shop-details/${slug}" class="icon-btn add-to-wishlist"
               data-name="${safeName}"
               data-store="${safeStore}"
               data-image="${safeImage}"
               data-price="${price}"
               data-price_sale="${sale}"
               data-sku="${safeSku}"
               data-stockstatus="${safeStock}"
               aria-label="${ariaNameForAddToWish}"
               role="button">
              <i class="fa fa-heart" aria-hidden="true"></i>
            </a>

            <a href="/shop-details/${slug}" class="img-popup icon-btn"
               aria-label="${ariaNameForQuickView}">
              <i class="fa fa-eye" aria-hidden="true"></i>
            </a>
          </div>

          <div class="cart-button">
            <a href="/shop-details/${slug}" class="cart-btn add-to-cart"
               data-name="${safeName}"
               data-store="${safeStore}"
               data-image="${safeImage}"
               data-price="${price}"
               data-price_sale="${sale}"
               data-quantity="1"
               aria-label="${ariaNameForAddToCart}"
               role="button">
              <i class="far fa-shopping-basket" aria-hidden="true"></i>
              <span class="text">Add To Cart</span>
            </a>
          </div>
        </div>

        <div class="product-info-wrap">
          <div class="product-info">
            <ul class="ratings rating5" aria-hidden="true">
              ${'<li><i class="fas fa-star" aria-hidden="true"></i></li>'.repeat(
                5
              )}
              <li><a href="/shop-details/${slug}">(${Math.floor(
              Math.random() * 100
            )})</a></li>
            </ul>
            <h3 class="title">
              <a href="/shop-details/${slug}" aria-label="Open ${safeName} details">${safeName}</a>
            </h3>
          </div>

          <div class="product-price">
            <span class="price prev-price"><span class="currency"></span>$${sale.toFixed(
              2
            )}</span>
            <span class="price new-price"><span class="currency"></span>$${price.toFixed(
              2
            )}</span>
          </div>
        </div>
     </div>`;

            return col;
          }

          let productsRendered = false;
          let renderInProgress = false;

          function ensureRow(catSelector) {
            let row = document.querySelector(
              catSelector + " .row.justify-content-center"
            );
            if (!row) {
              const cat = document.querySelector(catSelector);
              if (cat) {
                row = document.createElement("div");
                row.className = "row justify-content-center";
                cat.appendChild(row);
              }
            }
            return row;
          }

          async function loadFeatureProducts() {
            if (renderInProgress) return;
            renderInProgress = true;

            const bestRow = ensureRow("#cat1");
            const newRow = ensureRow("#cat2");
            const saleRow = ensureRow("#cat3");

            if (bestRow) bestRow.innerHTML = "";
            if (newRow) newRow.innerHTML = "";
            if (saleRow) saleRow.innerHTML = "";

            try {
              const products = await fetchWithRetries(
                "http://147.93.45.171:1600/productpagedata",
                {},
                5,
                300
              );
              if (!Array.isArray(products) || products.length === 0) {
                renderInProgress = false;
                return;
              }
              products.forEach((p) => {
                const target =
                  (p.label === "Sale" && saleRow) ||
                  (p.label === "New" && newRow) ||
                  bestRow;
                if (target) target.appendChild(makeCard(p));
              });
              productsRendered = true;
              if (typeof AOS !== "undefined") AOS.refresh();
            } catch (err) {
              console.error("Failed to load products:", err.message || err);
              announce("Failed to load featured products.");
            } finally {
              renderInProgress = false;
            }
          }

          async function loadSidebarCart() {
            try {
              const items = await fetchWithRetries(
                "http://147.93.45.171:1600/allcartdata",
                {},
                3,
                200
              );
              const seen = new Set();
              const unique = (items || []).filter((i) => {
                if (seen.has(i.name)) return false;
                seen.add(i.name);
                return true;
              });

              if (!listEl) return;

              listEl.innerHTML = "";
              if (!unique.length) {
                listEl.innerHTML = `<li class="sidebar-cart-item sidebar-cart-empty">Your cart is empty.</li>`;
                if (subtotalEl) subtotalEl.textContent = "$0.00";
                announce("Your cart is empty.");
                return;
              }

              let total = 0;
              unique.forEach((item) => {
                const price = parseFloat(item.price_sale) || 0;
                const qty = parseInt(item.quantity || 1, 10);
                total += price * qty;
                const slug = makeSlug(item.name);
                const safeName = escapeHTML(item.name);
                const safeImage = escapeHTML(item.image);
                listEl.insertAdjacentHTML(
                  "beforeend",
                  `
            <li class="sidebar-cart-item" data-id="${
              item.id || ""
            }" data-price="${price}" data-qty="${qty}">
              <a class="remove-cart" href="#" aria-label="Remove ${safeName} from cart" role="button">
                <i class="far fa-trash-alt" aria-hidden="true"></i>
              </a>
              <a href="/shop-details/${slug}" aria-label="Open ${safeName} details">
                <img src="http://147.93.45.171:1600/uploads/${safeImage}" alt="${safeName}"/>
                ${safeName}
              </a>
              <span class="quantity">
                ${qty} Ã— <span><span class="currency">$</span>${price.toFixed(
                    2
                  )}</span>
              </span>
            </li>`
                );
              });

              if (subtotalEl) subtotalEl.textContent = `$${total.toFixed(2)}`;
              announce(
                `${unique.length} items in cart, total ${total.toFixed(
                  2
                )} dollars.`
              );
            } catch (err) {
              console.error("Sidebar load error:", err);
              announce("Could not load cart.");
            }
          }

          async function updateCounts() {
            try {
              const items = await fetchWithRetries(
                "http://147.93.45.171:1600/allcartdata",
                {},
                3,
                200
              );
              const seen = new Set();
              const unique = (items || []).filter((i) => {
                if (seen.has(i.name)) return false;
                seen.add(i.name);
                return true;
              });
              if (badgeEl)
                badgeEl.textContent = String(unique.length).padStart(2, "0");
            } catch {
              if (badgeEl) badgeEl.textContent = "00";
            }

            try {
              const items2 = await fetchWithRetries(
                "http://147.93.45.171:1600/wishlistdata",
                {},
                3,
                200
              );
              const seen2 = new Set();
              const unique2 = (items2 || []).filter((i) => {
                if (seen2.has(i.product_name)) return false;
                seen2.add(i.product_name);
                return true;
              });
              if (wishlistEl)
                wishlistEl.textContent = String(unique2.length).padStart(
                  2,
                  "0"
                );
            } catch {
              if (wishlistEl) wishlistEl.textContent = "00";
            }
          }

          document.body.addEventListener("click", async (e) => {
            const rem = e.target.closest(".remove-cart");
            if (rem) {
              e.preventDefault();
              const li = rem.closest(".sidebar-cart-item");
              const id = li?.dataset?.id;
              const name =
                li
                  ?.querySelector("a[href^='/shop-details']")
                  ?.textContent?.trim() || "product";
              if (!id) {
                showBanner("Could not remove item: missing id.", "error");
                announce("Could not remove item.");
                return;
              }
              try {
                const res = await fetch(
                  `http://147.93.45.171:1600/deletecart/${id}`,
                  { method: "DELETE" }
                );
                if (!res.ok) throw new Error(`HTTP ${res.status}`);
                const body = await res.json().catch(() => ({}));
                if (body && body.success === false)
                  throw new Error(body.message || "Delete failed");
                li.remove();
                let newTotal = 0;
                listEl
                  .querySelectorAll(
                    "li.sidebar-cart-item:not(.sidebar-cart-empty)"
                  )
                  .forEach((itemLi) => {
                    const price = parseFloat(itemLi.dataset.price) || 0;
                    const qty = parseInt(itemLi.dataset.qty || "1", 10);
                    newTotal += price * qty;
                  });
                if (subtotalEl)
                  subtotalEl.textContent = `$${newTotal.toFixed(2)}`;
                showBanner("Product removed from cart.", "success");
                announce(`${name} removed from cart.`);
                updateCounts().catch(() => {});
              } catch (err) {
                console.error("Delete error:", err);
                showBanner("Could not remove item.", "error");
                announce("Could not remove item from cart.");
              }
              return;
            }

            const cartBtn = e.target.closest(".add-to-cart");
            const wishBtn = e.target.closest(".add-to-wishlist");

            if (!cartBtn && !wishBtn) return;

            e.preventDefault();

            const userId = localStorage.getItem("user_id");
            if (!userId) {
              const message = wishBtn
                ? "Please log in to add to wishlist."
                : "Please log in to add to cart.";
              showBanner(message, "error");
              announce(message);
              return;
            }

            try {
              if (cartBtn) {
                const payload = {
                  user_id: parseInt(userId, 10),
                  name: cartBtn.dataset.name,
                  store: cartBtn.dataset.store,
                  image: cartBtn.dataset.image,
                  price: parseFloat(cartBtn.dataset.price) || 0,
                  price_sale: parseFloat(cartBtn.dataset.price_sale) || 0,
                  quantity: parseInt(cartBtn.dataset.quantity || "1", 10),
                };
                await postJson("http://147.93.45.171:1600/addcart", payload);
                showBanner("Product added to cart!", "success");
                announce(`${payload.name} added to cart.`);
                loadSidebarCart().catch((e) =>
                  console.debug("loadSidebarCart failed:", e)
                );
                updateCounts().catch((e) =>
                  console.debug("updateCounts failed:", e)
                );
              } else if (wishBtn) {
                const payload = {
                  user_id: parseInt(userId, 10),
                  product_name: wishBtn.dataset.name,
                  store: wishBtn.dataset.store,
                  image: wishBtn.dataset.image,
                  price: parseFloat(wishBtn.dataset.price) || 0,
                  price_sale: parseFloat(wishBtn.dataset.price_sale) || 0,
                  sku: wishBtn.dataset.sku,
                  stockstatus: wishBtn.dataset.stockstatus,
                };
                await postJson(
                  "http://147.93.45.171:1600/wishlistpost",
                  payload
                );
                showBanner("Product added to wishlist!", "success");
                announce(`${payload.product_name} added to wishlist.`);
                updateCounts().catch((e) =>
                  console.debug("updateCounts failed:", e)
                );
              }
            } catch (err) {
              console.error("Error:", err);
              const msg =
                (cartBtn
                  ? "Add to cart failed: "
                  : "Add to wishlist failed: ") + (err.message || err);
              showBanner(msg, "error");
              announce(msg);
            }
          });

          const checkoutBtn = document.querySelector(
            ".cart-button-box a[href*='checkout.html']"
          );
          if (checkoutBtn && listEl) {
            checkoutBtn.addEventListener("click", (e) => {
              e.preventDefault();
              const items = Array.from(
                listEl.querySelectorAll("li.sidebar-cart-item")
              )
                .filter((li) => !li.classList.contains("sidebar-cart-empty"))
                .map((li) => {
                  const price = parseFloat(li.dataset.price) || 0;
                  const quantity = parseInt(li.dataset.qty || "1", 10);
                  const rawSrc =
                    li.querySelector("img")?.getAttribute("src") || "";
                  const image = rawSrc.split("/").pop() || "";
                  return {
                    id: li.dataset.id,
                    name:
                      li
                        .querySelector("a[href^='/shop-details']")
                        ?.textContent.trim() || "",
                    image,
                    price,
                    quantity,
                    lineTotal: price * quantity,
                  };
                });
              const subtotal = items.reduce((sum, it) => sum + it.lineTotal, 0);
              const total = subtotal;
              localStorage.setItem(
                "checkout_cart",
                JSON.stringify({ items, subtotal, total })
              );
              window.location.href = checkoutBtn.href;
            });
          }

          function startWhenReady() {
            if (
              document.querySelector("#cat1") &&
              document.querySelector("#cat2") &&
              document.querySelector("#cat3")
            ) {
              loadFeatureProducts().catch((e) =>
                console.debug("Initial loadFeatureProducts failed:", e)
              );
            } else {
              setTimeout(startWhenReady, 150);
            }
          }
          startWhenReady();
          loadSidebarCart().catch((e) =>
            console.debug("Initial loadSidebarCart failed:", e)
          );
          updateCounts().catch((e) =>
            console.debug("Initial updateCounts failed:", e)
          );
          setInterval(updateCounts, 5000);

          window.addEventListener("pageshow", (event) => {
            if (event.persisted || performance.navigation.type === 2)
              loadFeatureProducts();
          });

          window.addEventListener("load", () => {
            if (!productsRendered) loadFeatureProducts();
          });

          const observer = new MutationObserver((mutations) => {
            if (productsRendered || renderInProgress) return;
            let sawContainer = false;
            for (const m of mutations) {
              if (m.addedNodes && m.addedNodes.length) {
                for (const n of m.addedNodes) {
                  if (!(n instanceof HTMLElement)) continue;
                  if (
                    n.matches &&
                    (n.matches("#cat1") ||
                      n.matches("#cat2") ||
                      n.matches("#cat3") ||
                      (n.querySelector &&
                        (n.querySelector("#cat1") ||
                          n.querySelector("#cat2") ||
                          n.querySelector("#cat3"))))
                  ) {
                    sawContainer = true;
                    break;
                  }
                }
              }
              if (sawContainer) break;
            }
            if (sawContainer) loadFeatureProducts();
          });
          observer.observe(document.body, { childList: true, subtree: true });

          window.__pesco_reloadCart = loadSidebarCart;
          window.__pesco_reloadCounts = updateCounts;
        });
      </script>

      <div
        id="image-lightbox"
        style="
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.9);
          justify-content: center;
          align-items: center;
          z-index: 9999;
          flex-direction: column;
        "
      >
        <div
          style="
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
          "
        >
          <button
            id="lightbox-prev"
            style="
              position: absolute;
              left: 20px;
              top: 50%;
              transform: translateY(-50%);
              font-size: 22px;
              color: white;
              background: none;
              border: none;
              cursor: pointer;
            "
          >
            <i class="fas fa-play" style="transform: rotate(180deg)"></i>
          </button>

          <div style="position: relative; display: inline-block">
            <img
              id="lightbox-image"
              src=""
              alt="Product"
              style="
                width: 336px;
                height: 400px;
                object-fit: contain;
                border-radius: 4px;
              "
            />

            <div
              id="lightbox-counter"
              style="
                position: absolute;
                bottom: 0px;
                right: -2px;
                color: #fff;
                padding: 4px 8px;
                border-radius: 12px;
                font-size: 14px;
              "
            >
              1 of 0
            </div>

            <button
              id="lightbox-close"
              style="
                position: absolute;
                top: 0;
                right: -8px;
                font-size: 36px;
                color: white;
                border: none;
                border-radius: 50%;
                width: 32px;
                height: 32px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0;
                z-index: 10;
              "
            >
              Ã—
            </button>
          </div>

          <button
            id="lightbox-next"
            style="
              position: absolute;
              right: 20px;
              top: 50%;
              transform: translateY(-50%);
              font-size: 22px;
              color: white;
              background: none;
              border: none;
              cursor: pointer;
            "
          >
            <i class="fas fa-play"></i>
          </button>
        </div>
      </div>

      <script>
        document.addEventListener("DOMContentLoaded", () => {
          const imageLightbox = document.getElementById("image-lightbox");
          const lightboxImg = document.getElementById("lightbox-image");
          const counterEl = document.getElementById("lightbox-counter");
          const btnPrev = document.getElementById("lightbox-prev");
          const btnNext = document.getElementById("lightbox-next");
          const btnClose = document.getElementById("lightbox-close");

          let imageUrls = [];
          let currentIndex = 0;

          function collectImageUrls() {
            imageUrls = Array.from(document.querySelectorAll(".img-popup"))
              .map((a) => a.dataset.img)
              .filter(Boolean);
          }

          function showLightbox(idx) {
            if (!imageUrls.length) return;
            currentIndex =
              ((idx % imageUrls.length) + imageUrls.length) % imageUrls.length;
            lightboxImg.src = imageUrls[currentIndex];
            counterEl.textContent = `${currentIndex + 1} of ${
              imageUrls.length
            }`;
            imageLightbox.style.display = "flex";
            window.scrollTo({ top: 0, behavior: "instant" });
          }

          function closeLightbox() {
            imageLightbox.style.display = "none";
            lightboxImg.src = "";
          }

          document.body.addEventListener("click", (e) => {
            const a = e.target.closest(".img-popup");
            if (!a) return;
            e.preventDefault();
            collectImageUrls();

            const img = a.dataset.img || a.getAttribute("href") || "";
            let idx = imageUrls.indexOf(img);
            if (idx === -1) {
              if (img) {
                imageUrls.push(img);
                idx = imageUrls.length - 1;
              } else {
                return;
              }
            }
            showLightbox(idx);
          });

          window.addEventListener("keydown", (e) => {
            if (imageLightbox.style.display !== "flex") return;
            if (e.key === "Escape") closeLightbox();
            if (e.key === "ArrowLeft") showLightbox(currentIndex - 1);
            if (e.key === "ArrowRight") showLightbox(currentIndex + 1);
          });

          if (btnPrev)
            btnPrev.addEventListener("click", () =>
              showLightbox(currentIndex - 1)
            );
          if (btnNext)
            btnNext.addEventListener("click", () =>
              showLightbox(currentIndex + 1)
            );
          if (btnClose) btnClose.addEventListener("click", closeLightbox);

          const watchTarget =
            document.querySelector(".shop-page-wrapper .row") || document.body;
          const mo = new MutationObserver(() => {
            setTimeout(collectImageUrls, 50);
          });
          mo.observe(watchTarget, { childList: true, subtree: true });

          collectImageUrls();
        });
      </script>

      <section class="work-processing-section pt-30 pb-90">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <div
                class="section-title text-center mb-60"
                data-aos="fade-up"
                data-aos-delay="10"
                data-aos-duration="800"
              >
                <div class="sub-heading d-inline-flex align-items-center">
                  <i class="flaticon-sparkler"></i>
                  <span class="sub-title">Work Processing</span>
                  <i class="flaticon-sparkler"></i>
                </div>
                <h2>How it Work processing</h2>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xl-3 col-sm-6">
              <div
                class="iconic-box-item style-two mb-40"
                data-aos="fade-up"
                data-aos-duration="1000"
              >
                <div class="sn-number">01</div>
                <div class="icon">
                  <i class="flaticon-searching"></i>
                </div>
                <div
                  class="content"
                  role="region"
                  aria-labelledby="heading-browsing-choosing"
                >
                  <h3 id="heading-browsing-choosing" class="feature-title">
                    Browsing &amp; Choosing
                  </h3>
                  <p>
                    This is where customers visit your online store, browse your
                    products.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-sm-6">
              <div
                class="iconic-box-item style-two mb-40"
                data-aos="fade-up"
                data-aos-duration="1200"
              >
                <div class="sn-number">02</div>
                <div class="icon">
                  <i class="flaticon-payment-method"></i>
                </div>
                <div class="content">
                  <h6>Checkout & Payment</h6>
                  <p>
                    Once they have picked their items, customers proceed to
                    checkout.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-sm-6">
              <div
                class="iconic-box-item style-two mb-40"
                data-aos="fade-up"
                data-aos-duration="1400"
              >
                <div class="sn-number">03</div>
                <div class="icon">
                  <i class="flaticon-currency"></i>
                </div>
                <div class="content">
                  <h6>Order Fulfillment</h6>
                  <p>
                    After the order is placed, it's sent to your fulfillment
                    team.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-sm-6">
              <div
                class="iconic-box-item style-two mb-40"
                data-aos="fade-up"
                data-aos-duration="1600"
              >
                <div class="sn-number">04</div>
                <div class="icon">
                  <i class="flaticon-delivery"></i>
                </div>
                <div class="content">
                  <h6>Delivery to Customer</h6>
                  <p>
                    The packed order is then sent off with a shipping carrier
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="best-deal" class="best-deal-section">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <div
                class="offer-deal-wrapper bg_cover"
                data-aos="fade-up"
                data-aos-duration="1400"
                style="background-image: url(assets/images/bg/deal-bg-1.png)"
              >
                <div class="deal-img deal-week">
                  <span>
                    <img
                      src="assets/images/banner/deal-1.png"
                      alt="Deal Image"
                    />
                  </span>
                </div>
                <div class="deal-content">
                  <span class="sub-heading">
                    <i class="fas fa-tags"></i>Deal of the Week
                  </span>
                  <h2>
                    Hurry Up! Offer ends in. Get <span>UP TO 80% OFF</span>
                  </h2>

                  <div
                    class="simply-countdown mb-60"
                    id="flashsale-countdown"
                  ></div>

                  <div class="shop-button">
                    <a href="/shops" class="theme-btn style-one">Shop Now</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="testimonial-section">
        <div
          class="testimonial-wrapper overflow-x-hidden pt-190 pb-90 white-bg"
        >
          <div class="shape svg-shape1">
            <img
              src="assets/images/testimonial/tl-svgTop.svg"
              alt="svg shape"
            />
          </div>
          <div class="shape svg-shape2">
            <img
              src="assets/images/testimonial/tl-svgBottom.svg"
              alt="svg shape"
            />
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-4">
                <div
                  class="section-content-box mb-40"
                  data-aos="fade-right"
                  data-aos-delay="30"
                  data-aos-duration="800"
                >
                  <div class="section-title mb-50">
                    <h2>What Our Clients Say About Us</h2>
                  </div>
                  <div class="testimonial-arrows style-one"></div>
                </div>
              </div>

              <div class="col-lg-8">
                <div
                  class="testimonial-slider-one"
                  data-aos="fade-left"
                  data-aos-delay="50"
                  data-aos-duration="1000"
                ></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const BASE_IMAGE_URL = "http://147.93.45.171:1600/uploads/";

          const sliderContainer = document.querySelector(
            ".testimonial-slider-one"
          );
          if (!sliderContainer) return;

          function createTestimonialItem(item) {
            const wrap = document.createElement("div");
            wrap.className = "testimonial-item style-one mb-40";

            const content = document.createElement("div");
            content.className = "testimonial-content";

            const p = document.createElement("p");
            p.innerHTML = item.content || "";
            content.appendChild(p);

            const authorQuote = document.createElement("div");
            authorQuote.className =
              "author-quote-item d-flex justify-content-between align-items-center";

            const authorItem = document.createElement("div");
            authorItem.className = "author-item";

            const authorThumb = document.createElement("div");
            authorThumb.className = "author-thumb";
            const img = document.createElement("img");
            img.alt = item.name || "author image";
            img.src = item.image
              ? BASE_IMAGE_URL + item.image
              : BASE_IMAGE_URL + "author-1.png";
            authorThumb.appendChild(img);

            const authorInfo = document.createElement("div");
            authorInfo.className = "author-info";
            const h5 = document.createElement("h5");
            h5.textContent = item.name || "";
            authorInfo.appendChild(h5);

            const ul = document.createElement("ul");
            ul.className = "ratings rating5";
            for (let i = 0; i < 5; i++) {
              const li = document.createElement("li");
              li.innerHTML = '<i class="fas fa-star"></i>';
              ul.appendChild(li);
            }
            authorInfo.appendChild(ul);

            authorItem.appendChild(authorThumb);
            authorItem.appendChild(authorInfo);

            const quoteIcon = document.createElement("div");
            quoteIcon.className = "quote-icon";
            quoteIcon.innerHTML =
              '<i class="flaticon flaticon-right-quote"></i>';

            authorQuote.appendChild(authorItem);
            authorQuote.appendChild(quoteIcon);

            content.appendChild(authorQuote);
            wrap.appendChild(content);

            return wrap;
          }

          fetch("http://147.93.45.171:1600/gettestimonials")
            .then(function (res) {
              if (!res.ok) throw new Error("Network response was not ok");
              return res.json();
            })
            .then(function (data) {
              if (!Array.isArray(data)) return;

              sliderContainer.innerHTML = "";

              const visible = data.filter(
                (t) => String(t.status || "").toLowerCase() === "published"
              );

              const toRender = visible.length ? visible : data;

              toRender.forEach(function (t) {
                sliderContainer.appendChild(createTestimonialItem(t));
              });

              try {
                if (typeof initTestimonialSlider === "function") {
                  initTestimonialSlider();
                } else if (window.jQuery && jQuery.fn && jQuery.fn.slick) {
                  const $el = jQuery(".testimonial-slider-one");
                  if ($el.hasClass("slick-initialized")) {
                    $el.slick("refresh");
                  } else {
                    $el.slick();
                  }
                } else if (window.Swiper && sliderContainer.swiper) {
                  sliderContainer.swiper.update();
                }
              } catch (err) {
                console.warn("Could not refresh testimonial slider:", err);
              }
            })
            .catch(function (err) {
              console.error("Failed to load testimonials:", err);
            });
        });
      </script>

      <section class="blog-page-section pt-120 pb-95">
        <div class="container">
          <div class="row">
            <div
              class="col-lg-12 text-center mb-60"
              data-aos="fade-up"
              data-aos-duration="1000"
            >
              <div class="sub-heading d-inline-flex align-items-center">
                <i class="flaticon-sparkler"></i>
                <span class="sub-title">Our Blogs</span>
                <i class="flaticon-sparkler"></i>
              </div>
              <h2>Explore our Articles</h2>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6">
              <div
                class="blog-post-item style-one mb-25"
                data-aos="fade-up"
                data-aos-duration="1200"
              >
                <div class="post-thumbnail post-thumbnails">
                  <img
                    src="assets/images/blog/blog-big-1.png"
                    alt="Post Thumbnail"
                  />
                </div>
                <div class="post-content">
                  <h3 class="title"><a href="blog-details.html"></a></h3>
                  <p></p>
                </div>
              </div>
            </div>

            <div class="col-lg-6">
              <div class="row">
                <div class="col-sm-6">
                  <div
                    class="blog-post-item style-two mb-25"
                    data-aos="fade-up"
                    data-aos-duration="1400"
                  >
                    <div class="post-thumbnail post-content1">
                      <img
                        src="assets/images/blog/blog-sm-1.png"
                        alt="Post Thumbnail"
                      />
                    </div>
                    <div class="post-content post-content1">
                      <h3 class="title"><a href="blog-details.html"></a></h3>
                      <div class="post-meta">
                        <span><a href="#"></a></span
                        ><span><a href="#"></a></span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="newsletter-section pb-95">
        <div class="container">
          <div
            class="newsletter-wrapper white-bg p-r z-1"
            data-aos="fade-up"
            data-aos-duration="1000"
          >
            <div class="newsletter-shape pattern-one">
              <span
                ><img
                  src="assets/images/newsletter/pattern-1.png"
                  alt="Pattern Shape"
              /></span>
            </div>
            <div class="newsletter-shape pattern-two">
              <span
                ><img
                  src="assets/images/newsletter/pattern-2.png"
                  alt="Pattern Shape"
              /></span>
            </div>
            <div class="newsletter-shape shape-one">
              <span
                ><img src="assets/images/newsletter/shape-1.png" alt="Shape"
              /></span>
            </div>

            <div class="row">
              <div class="col-lg-6">
                <div class="newsletter-content-box">
                  <span class="sub-text">Our Newsletter</span>
                  <h3>
                    Get weekly update. Sign up and get up to
                    <span>20% off</span> your first purchase
                  </h3>
                  <form>
                    <div class="form-group">
                      <input
                        type="email"
                        class="form_control"
                        placeholder="Write your Email Address"
                        name="email"
                        required
                      />
                      <button class="theme-btn style-one" type="submit">
                        Subscribe
                      </button>
                    </div>
                  </form>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="newsletter-image">
                  <img
                    src="https://avatars.mds.yandex.net/i?id=802770c3379c394673fcc33bea11d6b7952ceffd-4012107-images-thumbs&n=13"
                    alt="Image"
                    style="width: 511px; height: 360px"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const form = document.querySelector(".newsletter-section form");
        if (!form) return;

        function showBanner(msg, type = "success") {
          const b = document.createElement("div");
          b.className = `banner ${type}`;
          b.textContent = msg;
          Object.assign(b.style, {
            position: "fixed",
            top: "10px",
            left: "50%",
            transform: "translateX(-50%)",
            padding: "10px 20px",
            background: type === "success" ? "#4caf50" : "#f44336",
            color: "#fff",
            borderRadius: "4px",
            zIndex: 9999,
            boxShadow: "0 2px 6px rgba(0,0,0,0.3)",
          });
          document.body.appendChild(b);
          setTimeout(() => b.remove(), 3000);
        }

        form.addEventListener("submit", async (e) => {
          e.preventDefault();
          const input = form.querySelector('input[name="email"]');
          const email = input.value.trim();
          if (!email) {
            showBanner("Please enter a valid email.", "error");
            return;
          }

          try {
            const res = await fetch(
              "http://147.93.45.171:1600/newsletterpost",
              {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ email }),
              }
            );
            const text = await res.text();
            if (res.ok) {
              showBanner("Subscribed successfully!", "success");
              form.reset();
            } else {
              showBanner(text || "Subscription failed.", "error");
            }
          } catch (err) {
            console.error("Newsletter error:", err);
            showBanner("Network error, please try again.", "error");
          }
        });
      });
    </script>

    <footer class="footer-main">
      <div class="footer-bg-wrapper gray-light-bg pt-0">
        <div class="footer-shape shape-one">
          <span
            ><img src="assets/images/footer/shape-1.png" alt="shape"
          /></span>
        </div>
        <div class="footer-widget-area pb-80">
          <div class="container">
            <div class="row">
              <div class="col-xl-3 col-sm-6">
                <div
                  class="footer-widget about-company-widget mb-40"
                  data-aos="fade-up"
                  data-aos-delay="10"
                  data-aos-duration="1000"
                >
                  <div class="widget-content">
                    <a href="index.html" class="footer-logo"
                      ><img
                        src="assets/images/logo/logo-main.png"
                        alt="Brand Logo"
                    /></a>

                    <p>
                      Pesco is an exciting International brand we provide high
                      quality cloths
                    </p>
                    <ul class="ct-info-list mb-30">
                      <li>
                        <i class="fas fa-envelope"></i>
                        <a href="mailto:info@mydomain.com">info@mydomain.com</a>
                      </li>
                      <li>
                        <i class="fas fa-phone-alt"></i>
                        <a href="mailto:info@mydomain.com">info@mydomain.com</a>
                      </li>
                    </ul>
                    <ul
                      class="social-link"
                      aria-label="Find us on social media"
                    >
                      <li class="social-label">Find Us:</li>
                      <li>
                        <a
                          href="https://www.facebook.com/"
                          target="_blank"
                          aria-label="Visit us on Facebook"
                        >
                          <i class="fab fa-facebook-f" aria-hidden="true"></i>
                        </a>
                      </li>
                      <li>
                        <a
                          href="https://www.instagram.com/"
                          target="_blank"
                          aria-label="Visit us on Instagram"
                        >
                          <i class="fab fa-instagram" aria-hidden="true"></i>
                        </a>
                      </li>
                      <li>
                        <a
                          href="https://in.linkedin.com/"
                          target="_blank"
                          aria-label="Visit us on LinkedIn"
                        >
                          <i class="fab fa-linkedin-in" aria-hidden="true"></i>
                        </a>
                      </li>
                      <li>
                        <a
                          href="https://x.com/"
                          target="_blank"
                          aria-label="Visit us on X (Twitter)"
                        >
                          <i class="fab fa-twitter" aria-hidden="true"></i>
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-md-6 col-sm-6">
                <div
                  class="footer-widget footer-nav-widget mb-40"
                  data-aos="fade-up"
                  data-aos-delay="15"
                  data-aos-duration="1200"
                >
                  <div class="widget-content">
                    <h4 class="widget-title">Customer Services</h4>
                    <ul class="widget-menu">
                      <li>
                        <img
                          src="assets/images/icon/star-3.svg"
                          alt="star icon"
                        /><a href="shops.html">Collections & Delivery</a>
                      </li>
                      <li>
                        <img
                          src="assets/images/icon/star-3.svg"
                          alt="star icon"
                        /><a href="shops.html">Returns & Refunds</a>
                      </li>
                      <li>
                        <img
                          src="assets/images/icon/star-3.svg"
                          alt="star icon"
                        /><a href="shops.html">Terms & Conditions</a>
                      </li>
                      <li>
                        <img
                          src="assets/images/icon/star-3.svg"
                          alt="star icon"
                        /><a href="shops.html">Delivery Return</a>
                      </li>
                      <li>
                        <img
                          src="assets/images/icon/star-3.svg"
                          alt="star icon"
                        /><a href="shops.html">Store Locations</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-md-6 col-sm-6">
                <div
                  class="footer-widget footer-nav-widget mb-40"
                  data-aos="fade-up"
                  data-aos-delay="20"
                  data-aos-duration="1400"
                >
                  <div class="widget-content">
                    <h4 class="widget-title">Quick Link</h4>
                    <ul class="widget-menu">
                      <li>
                        <img
                          src="assets/images/icon/star-3.svg"
                          alt="star icon"
                        /><a href="shops.html">Privacy Policy</a>
                      </li>
                      <li>
                        <img
                          src="assets/images/icon/star-3.svg"
                          alt="star icon"
                        /><a href="shops.html">Terms Of Use</a>
                      </li>

                      <li>
                        <img
                          src="assets/images/icon/star-3.svg"
                          alt="star icon"
                        /><a href="faq.html">FAQ</a>
                      </li>

                      <li>
                        <img
                          src="assets/images/icon/star-3.svg"
                          alt="star icon"
                        /><a href="contact.html">Contact</a>
                      </li>

                      <li>
                        <img
                          src="assets/images/icon/star-3.svg"
                          alt="star icon"
                        /><a href="shops.html">Login / Register</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="col-xl-3 col-sm-6">
                <div
                  class="footer-widget footer-recent-post-widget"
                  data-aos="fade-up"
                  data-aos-delay="25"
                  data-aos-duration="1600"
                >
                  <h4 class="widget-title">Recent Post</h4>
                  <div class="widget-content" id="recent-posts-container"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="copyright-area">
          <div class="container">
            <div class="row align-items-center">
              <div class="col-lg-6">
                <div class="copyright-text">
                  <p>
                    &copy; 2025. All rights reserved by <span>Pixelfit</span>
                  </p>
                </div>

                <script>
                  document.addEventListener("DOMContentLoaded", () => {
                    const p = document.querySelector(".copyright-text p");
                    if (!p) return;
                    p.innerHTML = p.innerHTML.replace(
                      /\b\d{4}\b/,
                      new Date().getFullYear()
                    );
                  });
                </script>
              </div>
              <div class="col-lg-6">
                <div class="payment-method text-lg-end">
                  <a href="#"
                    ><img
                      src="assets/images/footer/payment-method.png"
                      alt="payment-method"
                  /></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", async function () {
        const slugify = (s) =>
          String(s || "")
            .toLowerCase()
            .trim()
            .replace(/[^a-z0-9\s-]/g, "")
            .replace(/\s+/g, "-");

        const imageSrc = (img) => {
          if (!img) return "";
          const str = String(img).trim();
          if (/^https?:\/\//i.test(str)) return str;
          if (str.startsWith("/")) return str;
          return "http://147.93.45.171:1600/uploads/" + encodeURIComponent(str);
        };

        let posts;
        try {
          const res = await fetch("http://147.93.45.171:1600/blogpostdata");
          if (!res.ok) throw new Error("Network error");
          posts = await res.json();
        } catch (err) {
          console.error("Failed to load blog posts:", err);
          return;
        }

        if (posts[0]) {
          const big = posts[0];
          const bigEl = document.querySelector(".blog-post-item.style-one");
          const fmtDate = (iso) =>
            new Date(iso).toLocaleDateString("en-US", {
              year: "numeric",
              month: "long",
              day: "numeric",
            });

          const thumbContainer = bigEl.querySelector(".post-thumbnails");
          thumbContainer.innerHTML = `
                <a href="/blog-details/${slugify(
                  big.name
                )}" class="w-100 h-100">
                  <img src="${imageSrc(big.image)}" alt="${big.name}">
                </a>
              `;

          const bigLink = bigEl.querySelector(".title a");
          bigLink.href = `/blog-details/${slugify(big.name)}`;
          const titleWords = big.name.split(" ");
          bigLink.textContent =
            titleWords.slice(0, 8).join(" ") +
            (titleWords.length > 8 ? "â€¦" : "");

          const previewWords = big.description.split(/\s+/);
          bigEl.querySelector(".post-content p").textContent =
            previewWords.length > 48
              ? previewWords.slice(0, 48).join(" ") + "â€¦"
              : big.description;
        }

        const smallContainer = document.querySelector(".col-lg-6 > .row");
        const smallTemplate = smallContainer.querySelector(".col-sm-6");
        if (smallTemplate && posts.length > 1) {
          const fmtDate = (iso) =>
            new Date(iso).toLocaleDateString("en-US", {
              year: "numeric",
              month: "long",
              day: "numeric",
            });
          const templateClone = smallTemplate.cloneNode(true);
          smallContainer.innerHTML = "";

          posts.slice(1, 5).forEach((data) => {
            const card = templateClone.cloneNode(true);

            const thumbDiv = card.querySelector(".post-thumbnail");
            thumbDiv.innerHTML = `
                  <a href="/blog-details/${slugify(data.name)}">
                    <img src="${imageSrc(data.image)}" alt="${data.name}">
                  </a>
                `;

            const linkWords = data.name.split(" ");
            const linkElem = card.querySelector(".title a");
            linkElem.href = `/blog-details/${slugify(data.name)}`;
            linkElem.textContent =
              linkWords.slice(0, 6).join(" ") +
              (linkWords.length > 6 ? "â€¦" : "");

            const oldMeta = card.querySelector(".post-meta");
            if (oldMeta) oldMeta.remove();
            const meta = document.createElement("div");
            meta.className = "post-meta";
            meta.innerHTML = `
                  <span><a href="/blog-details/${slugify(data.name)}">${
              data.author_name || ""
            }</a></span>
                  <span><a href="/blog-details/${slugify(data.name)}">${fmtDate(
              data.date
            )}</a></span>
                `;
            card.querySelector(".post-content").appendChild(meta);

            smallContainer.appendChild(card);
          });

          if (window.AOS && typeof AOS.init === "function") {
            AOS.init({
              once: false,
              duration: 1000,
              easing: "ease-in-out",
              mirror: true,
            });
          }
        }

        try {
          const sorted = [...posts].sort(
            (a, b) => new Date(b.date) - new Date(a.date)
          );
          const topPosts = sorted.slice(0, 3);
          const container = document.getElementById("recent-posts-container");

          function formatDate(dateStr) {
            return new Date(dateStr).toLocaleDateString("en-US", {
              year: "numeric",
              month: "long",
              day: "numeric",
            });
          }

          topPosts.forEach((post) => {
            const html = `
                  <div class="recent-post-item">
                    <div class="thumb">
                      <a href="/blog-details/${slugify(
                        post.name
                      )}" class="w-100 h-100">
                        <img src="${imageSrc(post.image)}" alt="${post.name}">
                      </a>
                    </div>
                    <div class="content">
                      <h4><a href="/blog-details/${slugify(post.name)}">${
              post.name
            }</a></h4>
                      <span>
                        <a href="/blog-details/${slugify(post.name)}">
                          ${formatDate(post.date)}
                        </a>
                      </span>
                    </div>
                  </div>
                `;
            container.insertAdjacentHTML("beforeend", html);
          });
        } catch (error) {
          console.error("Error loading recent posts:", error);
        }

        const extras = posts.slice(5);
        const perPage = 3;
        const totalPages = Math.ceil(extras.length / perPage);
        let currentPage = 1;

        const fourEls = document.querySelectorAll(".blog-post-item.style-four");
        const pagUl = document.querySelector(".pesco-pagination ul");

        const fmtDate2 = (iso) =>
          new Date(iso).toLocaleDateString("en-US", {
            year: "numeric",
            month: "long",
            day: "numeric",
          });

        function renderPage(page) {
          const start = (page - 1) * perPage;
          fourEls.forEach((el, idx) => {
            const data = extras[start + idx];
            if (!data) {
              el.style.display = "none";
              return;
            }
            el.style.display = "";

            const thumb = el.querySelector(".post-thumbnail");
            thumb.innerHTML = `
                  <a href="/blog-details/${slugify(data.name)}">
                    <img src="${imageSrc(data.image)}" alt="${data.name}">
                  </a>
                `;

            const link = el.querySelector(".title a");
            link.href = `/blog-details/${slugify(data.name)}`;
            link.textContent = data.name;

            const w = data.description.split(/\s+/);
            el.querySelector(".post-content p").textContent =
              w.length > 36 ? w.slice(0, 36).join(" ") + "â€¦" : data.description;

            const spans = el.querySelectorAll(".post-meta span a");
            if (spans.length >= 2) {
              spans[0].textContent = data.tags || data.categories || "";
              spans[1].textContent = fmtDate2(data.date);
            }
          });
        }

        function buildPager() {
          pagUl.innerHTML = `
                <li><a href="#" data-page="${currentPage - 1}">
                  <i class="far fa-angle-left"></i>
                </a></li>
              `;
          for (let i = 1; i <= totalPages; i++) {
            pagUl.insertAdjacentHTML(
              "beforeend",
              `<li>
                    <a href="#" data-page="${i}"${
                i === currentPage ? ' class="active"' : ""
              }>
                      ${i}
                    </a>
                  </li>`
            );
          }
          pagUl.insertAdjacentHTML(
            "beforeend",
            `<li><a href="#" data-page="${currentPage + 1}">
                  <i class="far fa-angle-right"></i>
                </a></li>`
          );
        }

        renderPage(currentPage);
        buildPager();

        pagUl.parentElement.addEventListener("click", (e) => {
          e.preventDefault();
          const a = e.target.closest("a[data-page]");
          if (!a) return;
          const pg = +a.dataset.page;
          if (pg < 1 || pg > totalPages || pg === currentPage) return;
          currentPage = pg;
          renderPage(pg);
          buildPager();
          if (window.AOS && typeof AOS.refresh === "function") AOS.refresh();
        });
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const searchForm = document.querySelector(
          ".product-search-category form"
        );
        const searchInput = searchForm.querySelector('input[type="text"]');

        const dropdown = document.createElement("div");
        dropdown.className = "header-search-autocomplete";
        Object.assign(dropdown.style, {
          position: "absolute",
          top: "100%",
          left: 0,
          right: 0,
          background: "#fff",
          border: "1px solid #ddd",
          zIndex: 1000,
          maxHeight: "300px",
          overflowY: "auto",
          display: "none",
        });
        searchForm.style.position = "relative";
        searchForm.appendChild(dropdown);

        searchForm.addEventListener("submit", (e) => {
          e.preventDefault();
          window.location.href = "/shops-grid";
        });

        let timer;
        searchInput.addEventListener("input", () => {
          clearTimeout(timer);
          const q = searchInput.value.trim();
          if (q.length < 2) {
            dropdown.style.display = "none";
            return;
          }
          timer = setTimeout(() => {
            fetch("http://147.93.45.171:1600/productpagedata")
              .then((r) => r.json())
              .then((products) => {
                const matches = products
                  .filter((p) => p.name.toLowerCase().includes(q.toLowerCase()))
                  .slice(0, 5);

                if (!matches.length) {
                  dropdown.innerHTML = `<div style="padding:10px;color:#666">No matching products found at this time.</div>`;
                } else {
                  dropdown.innerHTML =
                    matches
                      .map((p) => {
                        const priceHTML = p.price_sale
                          ? `<strong style="color:#000">${p.price}</strong> <del style="color:#999" class="text-secondary fw-bold ms-2">${p.price_sale}</del>`
                          : `<strong class="text-secondary fw-bold" style="color:#000">${p.price}</strong>`;

                        return `
                <div class="autocomplete-item" data-name="${(
                  p.name || ""
                ).replace(
                  /"/g,
                  "&quot;"
                )}" style="display:flex;align-items:center;padding:8px;cursor:pointer;border-bottom:1px solid #eee">
                  <img src="http://147.93.45.171:1600/uploads/${p.image}" 
                      alt="${(p.name || "").replace(/"/g, "&quot;")}" 
                      style="width:40px;height:40px;object-fit:cover;margin-right:10px;">
                  <div>
                    <div style="font-weight:600;color:#333" class="text-dark fw-bold">${
                      p.name
                    }</div>
                    <div style="font-size:0.85em;margin-top:4px;">${priceHTML}</div>
                  </div>
                </div>
              `;
                      })
                      .join("") +
                    `<div class="autocomplete-show-all" style="padding:10px;text-align:center;color:#e74c3c;font-weight:600;cursor:pointer">
                  Show all results
                </div>`;
                }
                dropdown.style.display = "block";
              })
              .catch(() => {
                dropdown.innerHTML = `<div style="padding:10px;color:red;">Error loading results.</div>`;
                dropdown.style.display = "block";
              });
          }, 300);
        });

        dropdown.addEventListener("click", (e) => {
          const item = e.target.closest(".autocomplete-item");
          if (item) {
            window.location.href = "/shops-grid";
            return;
          }
          if (e.target.closest(".autocomplete-show-all")) {
            window.location.href = "/shops-grid";
          }
        });

        document.addEventListener("click", (e) => {
          if (!searchForm.contains(e.target)) {
            dropdown.style.display = "none";
          }
        });
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", async () => {
        try {
          const res = await fetch("http://147.93.45.171:1600/get-theme-logo");
          if (!res.ok) throw new Error("Failed to fetch logo data");

          const data = await res.json();
          const logoUrl = data.logo_url;
          if (!logoUrl) throw new Error("Logo URL not found in API response");

          const highResLogo = `http://147.93.45.171:1600/uploads/${logoUrl}`;
          const retinaLogo = highResLogo.replace(/(\.\w+)$/, "@2x$1");

          const logoImgs = [
            ...document.querySelectorAll(".brand-logo img"),
            ...document.querySelectorAll(".site-branding .brand-logo img"),
            ...document.querySelectorAll(".footer-logo img"),
          ];

          logoImgs.forEach((img) => {
            img.src = highResLogo;
            img.srcset = `${highResLogo} 1x, ${retinaLogo} 2x`;
            img.style.width = "auto";
            img.style.height = "auto";
            img.alt = data.alt_text || "Logo";

            img.addEventListener("error", () => {
              console.warn("Logo image failed to load:", highResLogo);
              img.src = "assets/images/logo/logo-main.png";
            });
          });
        } catch (error) {
          console.error("Logo load error:", error);
        }
      });
    </script>

    <div class="back-to-top"><i class="far fa-angle-up"></i></div>
    <script src="assets/vendor/jquery-3.7.1.min.js"></script>
    <script src="assets/vendor/popper/popper.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/vendor/slick/slick.min.js"></script>
    <script src="assets/vendor/magnific-popup/dist/jquery.magnific-popup.min.js"></script>
    <script src="assets/vendor/nice-select/js/jquery.nice-select.min.js"></script>
    <script src="assets/vendor/jquery-ui/jquery-ui.min.js"></script>
    <script src="assets/vendor/simplyCountdown.min.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/js/theme.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
  </body>
</html>
