<!DOCTYPE html>
<html lang="zxx">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="description" content="" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title></title>
    <link
      rel="shortcut icon"
      href="assets/img/favicon.png"
      type="images/x-icon"
    />
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/fontawesome.css" />
    <link rel="stylesheet" href="assets/css/animate.css" />
    <link rel="stylesheet" href="assets/css/metisMenu.css" />
    <link rel="stylesheet" href="assets/css/uikit.min.css" />
    <link rel="stylesheet" href="assets/css/jquery-ui.css" />
    <link rel="stylesheet" href="assets/css/slick.css" />
    <link rel="stylesheet" href="assets/css/magnific-popup.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        fetch("/themeoptionsdata")
          .then((res) => {
            if (!res.ok) throw new Error("Fetch failed");
            return res.json();
          })
          .then((data) => {
            let titleTag = document.head.querySelector("title");
            if (!titleTag) {
              titleTag = document.createElement("title");
              document.head.appendChild(titleTag);
            }
            titleTag.textContent =
              data.site_title || data.seo_title || "Website";

            let desc = document.querySelector('meta[name="description"]');
            if (!desc) {
              desc = document.createElement("meta");
              desc.name = "description";
              document.head.appendChild(desc);
            }
            desc.content = data.seo_description || "";

            let og = document.querySelector('meta[property="og:image"]');
            if (!og) {
              og = document.createElement("meta");
              og.setAttribute("property", "og:image");
              document.head.appendChild(og);
            }
            og.content = data.seo_og_image_url || "";

            const url = `/uploads/${
              data.lazy_placeholder_image
            }?v=${Date.now()}`;
            const oldIcon = document.querySelector(
              'link[rel="icon"], link[rel="shortcut icon"]'
            );
            if (oldIcon) oldIcon.remove();

            const link = document.createElement("link");
            link.rel = "icon";
            link.type = "image/png";
            link.href = url;
            document.head.appendChild(link);
          })
          .catch((e) => console.error("Theme load error:", e));
      });
    </script>

    <base target="_parent" />
    <!-- <script>
      document.addEventListener("DOMContentLoaded", () => {
        document
          .querySelectorAll("a[href$='.html']:not(.lang-btn)")
          .forEach((a) => {
            const href = a.getAttribute("href");
            const page = href.replace(/\.html$/, "");
            if (page === "index" || page === "") {
              a.setAttribute("href", "http://srv689968.hstgr.cloud/");
            } else {
              a.setAttribute("href", `http://srv689968.hstgr.cloud/${page}`);
            }
            a.addEventListener("click", (e) => {
              e.preventDefault();
              if (page === "index" || page === "") {
                window.parent.location.href = "http://srv689968.hstgr.cloud/";
              } else {
                window.parent.location.href = `http://srv689968.hstgr.cloud/${page}`;
              }
            });
          });
        document.querySelectorAll('a[href="#"]').forEach((a) => {
          a.addEventListener("click", (e) => e.preventDefault());
        });
      });
    </script> -->
  </head>

  <style>
    .tab-content-2 {
      height: 140px;
    }

    .add-banner__img img {
      width: 225px;
      height: 278px;
      object-fit: cover;
      box-shadow: 0.1px 0.1px 0.5px 0px black;
    }

    .thumb-index img {
      width: 230px;
      height: 172px;
      box-shadow: 0.1px 0.1px 0.5px 0px black;
    }

    .thumb-index1 img {
      width: 130px;
      height: 170px;
      box-shadow: 0.1px 0.1px 0.5px 0px black;
    }

    .rd-banner__img img {
      width: 360px;
      height: 401px;
      box-shadow: 0.1px 0.1px 0.5px 0px black;
    }

    .tab-product__slide {
      display: flex;
      flex-wrap: nowrap;
      gap: 10px;
      overflow-x: auto;
      scrollbar-width: none;
    }

    .tab-product__item {
      width: 182px !important;
      flex: 0 0 auto;
      box-sizing: border-box;
      text-align: center;
    }

    #rdm-myTabContent .row {
      display: flex;
      flex-wrap: wrap;
    }

    .tall-card {
      height: 487px;
    }

    .tall-card1 {
      height: 735px !important;
    }

    .tall-card .tab-content {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .tall-card img {
      width: 239px !important;
      height: 231px !important;
    }

    .progress-index {
      background-color: #63b820 !important;
    }

    .rd-product-index {
      height: 350px;
    }

    .custom-countdown {
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .cd-box {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: sans-serif;
    }

    .cd-time {
      width: 35px;
      height: 35px;
      background-color: #ff8c1a;
      color: white;
      font-weight: bold;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      margin-bottom: 3px;
    }

    .cd-box small {
      font-size: 11px;
      color: #929292;
      font-weight: 500;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }

    .rd-product__slide-item {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 20px;
    }

    .product__item {
      width: 100%;
    }

    @media (min-width: 992px) {
      .rd-product__slide-item {
        flex-wrap: wrap;
      }

      .product__item {
        flex: 0 0 calc(25% - 15px);
      }
    }
  </style>

  <body>
    <div class="body_wrap" id="translatable">
      <div class="preloder_part">
        <div class="spinner">
          <div class="dot1"></div>
          <div class="dot2"></div>
        </div>
      </div>

      <div class="progress-wrap">
        <svg
          class="progress-circle svg-content"
          width="100%"
          height="100%"
          viewBox="-1 -1 102 102"
        >
          <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
        </svg>
      </div>

      <header class="header header__style-one">
        <div class="header__top-info-wrap d-none d-lg-block">
          <div class="container">
            <div class="header__top-info ul_li_between mt-none-10">
              <ul class="ul_li mt-10">
                <li><i class="far fa-map-marker-alt"></i>Store Location</li>
                <li><i class="far fa-truck"></i>Track Your Order</li>
                <li><i class="fas fa-phone"></i>Call Us For Enquiry</li>
                <li>
                  <i class="fas fa-heart"></i>Welcome to Radios. We provides
                  Best Electronics item
                </li>
              </ul>

              <div class="header__top-right ul_li mt-10">
                <div class="date" id="current-date">
                  <i class="fal fa-calendar-alt"></i>
                </div>

                <div class="header__social ml-25">
                  <a href="https://www.facebook.com/" target="_blank"
                    ><i class="fab fa-facebook-f"></i
                  ></a>
                  <a href="https://www.twitter.com/" target="_blank"
                    ><i class="fab fa-twitter"></i
                  ></a>
                  <a href="https://www.instagram.com/" target="_blank"
                    ><i class="fab fa-instagram"></i
                  ></a>
                  <a href="https://www.youtube.com/" target="_blank"
                    ><i class="fab fa-youtube"></i
                  ></a>
                  <a href="https://www.pinterest.com/" target="_blank"
                    ><i class="fab fa-pinterest"></i
                  ></a>
                </div>
              </div>

              <script>
                document.addEventListener("DOMContentLoaded", function () {
                  const dateElement = document.getElementById("current-date");

                  const days = [
                    "Sunday",
                    "Monday",
                    "Tuesday",
                    "Wednesday",
                    "Thursday",
                    "Friday",
                    "Saturday",
                  ];
                  const months = [
                    "January",
                    "February",
                    "March",
                    "April",
                    "May",
                    "June",
                    "July",
                    "August",
                    "September",
                    "October",
                    "November",
                    "December",
                  ];

                  const now = new Date();
                  const dayName = days[now.getDay()];
                  const monthName = months[now.getMonth()];
                  const date = now.getDate();
                  const year = now.getFullYear();

                  dateElement.innerHTML = `<i class="fal fa-calendar-alt"></i> ${dayName}, ${monthName} ${date}, ${year}`;
                });
              </script>
            </div>
          </div>
        </div>

        <div class="container">
          <div class="header__middle ul_li_between justify-content-xs-center">
            <div class="header__logo">
              <a href="index.html">
                <img src="assets/img/logo/logo.svg" alt="" />
              </a>
            </div>

            <form class="header__search-box" action="#">
              <div class="select-box">
                <select id="category" name="category">
                  <option value="">All Categories</option>
                </select>
              </div>
              <input
                type="text"
                name="search"
                id="search"
                placeholder="Search For Products"
                required
              />
              <button type="submit"><i class="far fa-search"></i></button>
            </form>

            <script>
              document.addEventListener("DOMContentLoaded", async () => {
                const select = document.getElementById("category");
                const searchForm = document.querySelector(
                  ".header__search-box"
                );
                const searchInput =
                  searchForm.querySelector('input[type="text"]');

                const dropdown = document.createElement("div");
                dropdown.className = "header-search-autocomplete";
                Object.assign(dropdown.style, {
                  position: "absolute",
                  top: "100%",
                  left: 0,
                  right: 0,
                  background: "#fff",
                  border: "1px solid #ddd",
                  zIndex: 1000,
                  maxHeight: "300px",
                  overflowY: "auto",
                  display: "none",
                });
                searchForm.style.position = "relative";
                searchForm.appendChild(dropdown);

                const catsMap = {};
                try {
                  const res = await fetch("/productcatdata");
                  if (!res.ok) throw new Error(res.status);
                  const cats = await res.json();
                  cats
                    .filter(
                      (c) => c.status === "Published" || c.status === "Draft"
                    )
                    .sort((a, b) => new Date(b.date) - new Date(a.date))
                    .forEach((c) => {
                      catsMap[c.id] = c.name;
                      const opt = document.createElement("option");
                      opt.value = c.id;
                      opt.textContent = c.name;
                      select.appendChild(opt);
                    });
                } catch {
                  const errOpt = document.createElement("option");
                  errOpt.value = "";
                  errOpt.text = "Unable to load categories";
                  select.appendChild(errOpt);
                }

                let timer;
                searchInput.addEventListener("input", () => {
                  clearTimeout(timer);
                  const q = searchInput.value.trim();
                  const catId = select.value;
                  if (q.length < 2) {
                    dropdown.style.display = "none";
                    return;
                  }
                  timer = setTimeout(() => {
                    fetch("/productpagedata")
                      .then((r) => r.json())
                      .then((products) => {
                        let list = products;

                        if (catId) {
                          const catName = catsMap[catId];
                          list = list.filter(
                            (p) =>
                              p.categories &&
                              p.categories
                                .split(",")
                                .map((s) => s.trim())
                                .includes(catName)
                          );
                        }

                        const matches = list
                          .filter((p) =>
                            p.name.toLowerCase().includes(q.toLowerCase())
                          )
                          .slice(0, 5);

                        if (!matches.length) {
                          dropdown.innerHTML = `<div style="padding:10px;color:#666">No products found.</div>`;
                        } else {
                          dropdown.innerHTML =
                            matches
                              .map((p) => {
                                const priceHTML = p.price_sale
                                  ? `<strong style="color:#000">${p.price_sale}</strong> <del style="color:#999">${p.price}</del>`
                                  : `<strong style="color:#000">${p.price}</strong>`;
                                return `
                            <div class="autocomplete-item" 
                                 style="display:flex;align-items:center;padding:8px;cursor:pointer;border-bottom:1px solid #eee"
                                 data-name="${encodeURIComponent(p.name)}">
                              <img src="/uploads/${p.image}" 
                                   alt="${p.name}" 
                                   style="width:40px;height:40px;object-fit:cover;margin-right:10px;">
                              <div>
                                <div style="font-weight:600;color:#333">${
                                  p.name
                                }</div>
                                <div style="font-size:0.85em;margin-top:4px;">${priceHTML}</div>
                              </div>
                            </div>`;
                              })
                              .join("") +
                            `
                          <div class="autocomplete-show-all" 
                               style="padding:10px;text-align:center;color:#e74c3c;font-weight:600;cursor:pointer">
                            Show all results
                          </div>`;
                        }

                        dropdown.style.display = "block";
                      })
                      .catch(() => {
                        dropdown.innerHTML = `<div style="padding:10px;color:red;">Error loading results.</div>`;
                        dropdown.style.display = "block";
                      });
                  }, 300);
                });

                dropdown.addEventListener("click", (e) => {
                  const item = e.target.closest(".autocomplete-item");
                  if (item) {
                    const name = decodeURIComponent(item.dataset.name);
                    const params = new URLSearchParams({
                      search: name,
                      category: select.value,
                    });
                    window.location.href = `shop.html?${params}`;
                    return;
                  }
                  if (e.target.closest(".autocomplete-show-all")) {
                    const params = new URLSearchParams({
                      search: searchInput.value.trim(),
                      category: select.value,
                    });
                    window.location.href = `shop.html?${params}`;
                  }
                });

                document.addEventListener("click", (e) => {
                  if (!searchForm.contains(e.target))
                    dropdown.style.display = "none";
                });

                searchForm.addEventListener("submit", (e) => {
                  e.preventDefault();
                  const params = new URLSearchParams({
                    search: searchInput.value.trim(),
                    category: select.value,
                  });
                  window.location.href = `shop.html?${params}`;
                });
              });
            </script>

            <div class="header__lang ul_li">
              <div class="header__language mr-15">
                <ul>
                  <li>
                    <a href="#!" class="lang-btn"
                      >USD <i class="far fa-chevron-down"></i
                    ></a>
                    <ul class="lang_sub_list">
                      <li><a href="#">USD</a></li>
                      <li><a href="#">BDT</a></li>
                      <li><a href="#">EUR</a></li>
                    </ul>
                  </li>
                </ul>
              </div>

              <div class="header__language">
                <ul>
                  <li style="position: relative">
                    <a href="#" class="lang-btn">
                      <span class="current-lang">English</span>
                      <i class="far fa-chevron-down"></i>
                    </a>
                    <ul class="lang_sub_list">
                      <li>
                        <a href="#" class="lang-select" data-lang="en"
                          >English</a
                        >
                      </li>
                      <li>
                        <a href="#" class="lang-select" data-lang="ar"
                          >Arabic</a
                        >
                      </li>
                      <li>
                        <a href="#" class="lang-select" data-lang="bn"
                          >Bangla</a
                        >
                      </li>
                    </ul>
                  </li>
                </ul>
              </div>
            </div>

            <div class="header__icons ul_li">
              <div class="icon">
                <a href="account.html"
                  ><img src="assets/img/icon/user.svg" alt=""
                /></a>
              </div>

              <div class="icon wishlist-icon">
                <a href="#!">
                  <img src="assets/img/icon/heart.svg" alt="" />
                  <span class="count" id="wishlist-data">0</span>
                </a>
              </div>

              <div class="cart_btn icon">
                <img src="assets/img/icon/shopping_bag.svg" alt="" />
                <span class="count" id="cart-data">0</span>
              </div>
            </div>
          </div>
        </div>

        <div
          class="header__cat-wrap"
          data-uk-sticky="top: 250; animation: uk-animation-slide-top;"
        >
          <div class="container">
            <div class="header__wrap ul_li_between">
              <div class="header__cat ul_li">
                <div class="hamburger_menu">
                  <a href="javascript:void(0);" class="active">
                    <div class="icon bar">
                      <span><i class="fal fa-bars"></i></span>
                    </div>
                  </a>
                </div>
                <ul class="category ul_li">
                  <li>
                    <a href="shop.html"
                      ><span
                        ><img src="assets/img/icon/hc_01.svg" alt="" /></span
                      >Laptops & Computers</a
                    >
                  </li>
                  <li>
                    <a href="shop.html"
                      ><span
                        ><img src="assets/img/icon/hc_02.svg" alt="" /></span
                      >CC Tv & Camera</a
                    >
                  </li>
                  <li>
                    <a href="shop.html"
                      ><span
                        ><img src="assets/img/icon/hc_03.svg" alt="" /></span
                      >Home Equipment</a
                    >
                  </li>
                  <li>
                    <a href="shop.html"
                      ><span
                        ><img src="assets/img/icon/hc_04.svg" alt="" /></span
                      >Tv & Audios</a
                    >
                  </li>
                  <li>
                    <a href="shop.html"
                      ><span
                        ><img src="assets/img/icon/hc_05.svg" alt="" /></span
                      >Printers & Ink</a
                    >
                  </li>
                  <li>
                    <a href="shop.html"
                      ><span
                        ><img src="assets/img/icon/hc_06.svg" alt="" /></span
                      >Gaming & Fun</a
                    >
                  </li>
                </ul>
              </div>

              <div class="login-sign-btn">
                <a class="thm-btn" href="account.html">
                  <span class="btn-wrap">
                    <span>Login / Sign Up</span>
                    <span>Login / Sign Up</span>
                  </span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </header>

      <aside class="slide-bar">
        <div class="close-mobile-menu">
          <a href="javascript:void(0);"><i class="fal fa-times"></i></a>
        </div>

        <div class="cart_sidebar">
          <button type="button" class="cart_close_btn">
            <i class="fal fa-times"></i>
          </button>
          <h2 class="heading_title text-uppercase">
            Cart Items - <span>0</span>
          </h2>

          <div class="cart_items_list"></div>

          <div class="total_price text-uppercase">
            <span>Sub Total:</span>
            <span>$00.00</span>
          </div>

          <ul class="btns_group ul_li">
            <li>
              <a href="cart.html" class="thm-btn">
                <span class="btn-wrap">
                  <span>View Cart</span>
                  <span>View Cart</span>
                </span>
              </a>
            </li>
            <li>
              <a href="checkout.html" class="thm-btn thm-btn__black">
                <span class="btn-wrap">
                  <span>Checkout</span>
                  <span>Checkout</span>
                </span>
              </a>
            </li>
          </ul>
        </div>

        <script>
          document.addEventListener("DOMContentLoaded", () => {
            const wishlistCountEl = document.getElementById("wishlist-data");
            const cartCountEl = document.getElementById("cart-data");

            const cartListEl = document.querySelector(
              ".cart_sidebar .cart_items_list"
            );
            const subtotalEl = document.querySelector(
              ".cart_sidebar .total_price span:last-child"
            );
            const sidebarCountEl = document.querySelector(
              ".cart_sidebar h2 span"
            );
            const headerCartCount = cartCountEl;

            async function loadWishlist() {
              try {
                const res = await fetch("/wishlistdata");
                const data = await res.json();
                if (!Array.isArray(data)) return;

                const uniqueNames = new Set(
                  data.map((item) => item.product_name)
                );

                wishlistCountEl.textContent = uniqueNames.size;
              } catch (err) {
                console.error("Wishlist Load Error:", err);
              }
            }

            async function loadCart() {
              try {
                const res = await fetch("/allcartdata");
                const data = await res.json();
                if (!Array.isArray(data)) return;

                const seen = new Set();
                const unique = [];
                let subtotal = 0;

                for (let item of data) {
                  if (!seen.has(item.name)) {
                    seen.add(item.name);
                    unique.push(item);
                    subtotal += parseFloat(item.price.replace("$", "")) || 0;
                  }
                }

                cartListEl.innerHTML = unique
                  .map(
                    (item) => `
                  <div class="cart_item" data-id="${item.id}">
                    <div class="item_image">
                      <img src="/uploads/${
                        item.image || "assets/img/product/default.png"
                      }" />
                    </div>
                    <div class="item_content">
                      <h4 class="item_title text-start">${item.name}</h4>
                      <span class="item_price text-start">${item.price}</span>
                      <button type="button" class="remove_btn">
                        <i class="fal fa-times"></i>
                      </button>
                    </div>
                  </div>
                `
                  )
                  .join("");

                const count = unique.length;
                cartCountEl.textContent = count;
                sidebarCountEl.textContent = count;
                subtotalEl.textContent = subtotal.toFixed(2);
              } catch (err) {
                console.error("Cart Load Error:", err);
              }
            }

            cartListEl.addEventListener("click", async (e) => {
              const btn = e.target.closest(".remove_btn");
              if (!btn) return;

              const itemEl = btn.closest(".cart_item");
              const id = itemEl.dataset.id;

              try {
                const res = await fetch(`/deletecart/${id}`, {
                  method: "DELETE",
                });
                const json = await res.json();
                if (res.ok && json.success) {
                  loadCart();
                } else {
                  console.error("Delete failed:", json.message);
                }
              } catch (err) {
                console.error("Delete request error:", err);
              }
            });

            document
              .querySelector('a[href="checkout.html"]')
              ?.addEventListener("click", () => {
                const items = Array.from(
                  cartListEl.querySelectorAll(".cart_item")
                ).map((el) => {
                  const price =
                    parseFloat(
                      el
                        .querySelector(".item_price")
                        .textContent.replace("$", "")
                    ) || 0;
                  return {
                    id: el.dataset.id,
                    name: el.querySelector(".item_title").textContent,
                    price,
                    quantity: 1,
                    lineTotal: price,
                    image: el
                      .querySelector("img")
                      .getAttribute("src")
                      .replace("/uploads/", ""),
                  };
                });
                const subtotal = parseFloat(subtotalEl.textContent) || 0;
                localStorage.setItem(
                  "checkout_cart",
                  JSON.stringify({ items, subtotal, total: subtotal })
                );
              });

            loadWishlist();
            loadCart();
            setInterval(loadWishlist, 3000);
            setInterval(loadCart, 3000);
          });
        </script>

        <nav class="side-mobile-menu">
          <div class="header-mobile-search">
            <form role="search" method="get" action="#">
              <input type="text" placeholder="Search Keywords" />
              <button type="submit"><i class="ti-search"></i></button>
            </form>
          </div>
          <ul id="mobile-menu-active">
            <li class="dropdown">
              <a href="#">Home</a>
              <ul class="sub-menu">
                <li><a href="index.html">Home One</a></li>
                <li><a href="home-2.html">Home Two</a></li>
                <li><a href="home-3.html">Home Three</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#">Shop</a>
              <ul class="sub-menu">
                <li><a href="shop.html">Shop Default</a></li>
                <li><a href="shop-left-sidebar.html">Shop Left Sidebar</a></li>
                <li><a href="shop-single.html">Shop Single</a></li>
                <li><a href="cart.html">Shop Cart</a></li>
                <li><a href="checkout.html">Shop Checkout</a></li>
                <li><a href="account.html">Account</a></li>
              </ul>
            </li>
            <li><a href="shop.html">Accesories</a></li>
            <li class="dropdown">
              <a href="#!">Blog</a>
              <ul class="sub-menu">
                <li><a href="news.html">Blog</a></li>
                <li><a href="news-single.html">Blog Details</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#!">Pages</a>
              <ul class="submenu">
                <li><a href="about.html">About Us</a></li>
                <li><a href="account.html">Account</a></li>
                <li><a href="404.html">404</a></li>
              </ul>
            </li>
            <li>
              <a href="contact.html"> Contact </a>
            </li>
          </ul>
        </nav>
      </aside>

      <div class="body-overlay"></div>

      <main>
        <div
          class="hero hero__height ul_li"
          data-background="assets/img/bg/hero_bg.jpg"
        >
          <div class="container">
            <div class="row align-items-center mt-none-30">
              <div class="col-lg-9 mt-30">
                <div class="row align-items-center flex-row-reverse mt-none-30">
                  <div class="col-lg-7 mt-30">
                    <div class="hero__product">
                      <div class="hero__product-wrap">
                        <div class="hero__product-carousel">
                          <div class="hero__product-item">
                            <img src="assets/img/product/img_52.png" alt="" />
                          </div>
                          <div class="hero__product-item">
                            <img src="assets/img/product/img_53.png" alt="" />
                          </div>
                          <div class="hero__product-item">
                            <img src="assets/img/product/img_54.png" alt="" />
                          </div>
                          <div class="hero__product-item">
                            <img src="assets/img/product/img_52.png" alt="" />
                          </div>
                          <div class="hero__product-item">
                            <img src="assets/img/product/img_54.png" alt="" />
                          </div>
                        </div>
                        <div class="hero__product-carousel-nav">
                          <div class="hero__product-item-nav">
                            <div class="image">
                              <img src="assets/img/product/img_52.png" alt="" />
                            </div>
                          </div>
                          <div class="hero__product-item-nav">
                            <div class="image">
                              <img src="assets/img/product/img_53.png" alt="" />
                            </div>
                          </div>
                          <div class="hero__product-item-nav">
                            <div class="image">
                              <img src="assets/img/product/img_54.png" alt="" />
                            </div>
                          </div>
                          <div class="hero__product-item-nav">
                            <div class="image">
                              <img src="assets/img/product/img_52.png" alt="" />
                            </div>
                          </div>
                          <div class="hero__product-item-nav">
                            <div class="image">
                              <img src="assets/img/product/img_54.png" alt="" />
                            </div>
                          </div>
                        </div>
                        <span class="hero__product-offer">
                          <span class="discount">29<span>%</span></span>
                          <span>off</span>
                        </span>
                      </div>
                    </div>
                  </div>

                  <div class="col-lg-5 mt-30">
                    <div class="hero__content">
                      <span class="subtitle">100% Best Product</span>
                      <h2 class="title">
                        Waterma Watch <br />
                        Beats Studio
                      </h2>
                      <p>Widescreen 4k ultra Laptop</p>
                      <h3 class="price">$ 1800.99 / <span>$2860</span></h3>
                      <div class="mxw_343 mb-20">
                        <div
                          class="product__progress progress h-16 color-primary"
                        >
                          <div
                            class="progress-bar"
                            role="progressbar"
                            style="width: 50%"
                            aria-valuenow="50"
                            aria-valuemin="0"
                            aria-valuemax="100"
                          ></div>
                        </div>
                        <div class="ul_li_between mb-6">
                          <span class="product__available"
                            >Available: <span>334</span></span
                          >
                          <span class="product__available"
                            >Stock: <span>180</span></span
                          >
                        </div>
                      </div>
                      <a class="hero__btn" href="#!"
                        >Shop Now <i class="far fa-long-arrow-right"></i
                      ></a>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mt-30">
                <div class="hot-deal__slide-wrap style-2 bg-white">
                  <h2 class="section-heading mb-25">
                    <span>Top Product</span>
                  </h2>

                  <div class="hot-deal__slide tx-arrow">
                    <div class="hot-deal__item text-center">
                      <div class="thumb">
                        <a href="#!">
                          <img src="assets/img/product/img_55.png" alt="" />
                        </a>
                      </div>
                      <div class="content">
                        <ul class="rating-star ul_li_center mr-10">
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="far fa-star"></i></li>
                          <li><i class="far fa-star"></i></li>
                        </ul>
                        <h2 class="title mb-15">
                          <a href="#!">Asus 2022 Vivobook</a>
                        </h2>
                        <h4 class="product__price mb-20">
                          <span class="new">$30.52</span
                          ><span class="old">$28.52</span>
                        </h4>
                        <div class="mxw_216 m-auto">
                          <div
                            class="product__progress progress mb-6 h-8 color-primary"
                          >
                            <div
                              class="progress-bar"
                              role="progressbar"
                              style="width: 50%"
                              aria-valuenow="50"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          </div>
                          <div class="ul_li_between">
                            <span class="product__available"
                              >Available: <span>334</span></span
                            >
                            <span class="product__available"
                              >Sold: <span>180</span></span
                            >
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="hot-deal__item text-center">
                      <div class="thumb">
                        <a href="#!">
                          <img src="assets/img/product/img_55.png" alt="" />
                        </a>
                      </div>
                      <div class="content">
                        <ul class="rating-star ul_li_center mr-10">
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="far fa-star"></i></li>
                          <li><i class="far fa-star"></i></li>
                        </ul>
                        <h2 class="title mb-15">
                          <a href="#!">Asus 2022 Vivobook</a>
                        </h2>
                        <h4 class="product__price mb-20">
                          <span class="new">$30.52</span
                          ><span class="old">$28.52</span>
                        </h4>
                        <div class="mxw_216 m-auto">
                          <div
                            class="product__progress progress mb-6 h-8 color-primary"
                          >
                            <div
                              class="progress-bar"
                              role="progressbar"
                              style="width: 50%"
                              aria-valuenow="50"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          </div>
                          <div class="ul_li_between">
                            <span class="product__available"
                              >Available: <span>334</span></span
                            >
                            <span class="product__available"
                              >Sold: <span>180</span></span
                            >
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="hot-deal__item text-center">
                      <div class="thumb">
                        <a href="#!">
                          <img src="assets/img/product/img_55.png" alt="" />
                        </a>
                      </div>
                      <div class="content">
                        <ul class="rating-star ul_li_center mr-10">
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="far fa-star"></i></li>
                          <li><i class="far fa-star"></i></li>
                        </ul>
                        <h2 class="title mb-15">
                          <a href="#!">Asus 2022 Vivobook</a>
                        </h2>
                        <h4 class="product__price mb-20">
                          <span class="new">$30.52</span
                          ><span class="old">$28.52</span>
                        </h4>
                        <div class="mxw_216 m-auto">
                          <div
                            class="product__progress progress mb-6 h-8 color-primary"
                          >
                            <div
                              class="progress-bar"
                              role="progressbar"
                              style="width: 50%"
                              aria-valuenow="50"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          </div>
                          <div class="ul_li_between">
                            <span class="product__available"
                              >Available: <span>334</span></span
                            >
                            <span class="product__available"
                              >Sold: <span>180</span></span
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="feature pt-40 pb-30">
          <div class="container">
            <div class="feature__wrap ul_li">
              <div class="feature__item ul_li">
                <div class="icon">
                  <img src="assets/img/icon/feat_01.svg" alt="" />
                </div>
                <div class="content">
                  <h3>Free Shipping</h3>
                  <p>Free shipping over $100</p>
                </div>
              </div>
              <div class="feature__item ul_li">
                <div class="icon">
                  <img src="assets/img/icon/feat_02.svg" alt="" />
                </div>
                <div class="content">
                  <h3>Payment Secure</h3>
                  <p>Got 100% Payment Safe</p>
                </div>
              </div>
              <div class="feature__item ul_li">
                <div class="icon">
                  <img src="assets/img/icon/feat_03.svg" alt="" />
                </div>
                <div class="content">
                  <h3>Support 24/7</h3>
                  <p>Top quialty 24/7 Support</p>
                </div>
              </div>
              <div class="feature__item ul_li">
                <div class="icon">
                  <img src="assets/img/icon/feat_04.svg" alt="" />
                </div>
                <div class="content">
                  <h3>100% Money Back</h3>
                  <p>Cutomers Money Backs</p>
                </div>
              </div>
              <div class="feature__item ul_li">
                <div class="icon">
                  <img src="assets/img/icon/feat_05.svg" alt="" />
                </div>
                <div class="content">
                  <h3>Quality Products</h3>
                  <p>We Insure Product Quailty</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-product pt-40 pb-40">
          <div class="container">
            <div class="product__nav-wrap ul_li_between mb-20">
              <h2 class="section-heading">
                <span>Hot <span>New Arrival</span> You May Like</span>
              </h2>

              <ul
                class="product__nav rd-tab-nav nav nav-tabs"
                id="vd-myTab"
                role="tablist"
              >
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="vd-tab-01"
                    data-bs-toggle="tab"
                    data-bs-target="#vd-tab1"
                    type="button"
                    role="tab"
                    aria-controls="vd-tab1"
                    aria-selected="true"
                  >
                    Recent
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="vd-tab-02"
                    data-bs-toggle="tab"
                    data-bs-target="#vd-tab2"
                    type="button"
                    role="tab"
                    aria-controls="vd-tab2"
                    aria-selected="false"
                  >
                    Best Seller
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="vd-tab-03"
                    data-bs-toggle="tab"
                    data-bs-target="#vd-tab3"
                    type="button"
                    role="tab"
                    aria-controls="vd-tab3"
                    aria-selected="false"
                  >
                    Top
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link active"
                    id="vd-tab-04"
                    data-bs-toggle="tab"
                    data-bs-target="#vd-tab4"
                    type="button"
                    role="tab"
                    aria-controls="vd-tab4"
                    aria-selected="false"
                  >
                    New Arrivals
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="vd-tab-05"
                    data-bs-toggle="tab"
                    data-bs-target="#vd-tab5"
                    type="button"
                    role="tab"
                    aria-controls="vd-tab5"
                    aria-selected="false"
                  >
                    top rating
                  </button>
                </li>
              </ul>
            </div>

            <div class="vd-products">
              <div class="tab-content tab_has_slider" id="vd-myTabContent">
                <div
                  class="tab-pane fade"
                  id="vd-tab1"
                  role="tabpanel"
                  aria-labelledby="vd-tab-01"
                >
                  <div class="tab-product__slide tx-arrow"></div>
                </div>

                <div
                  class="tab-pane fade"
                  id="vd-tab2"
                  role="tabpanel"
                  aria-labelledby="vd-tab-02"
                >
                  <div class="tab-product__slide tx-arrow"></div>
                </div>

                <div
                  class="tab-pane fade"
                  id="vd-tab3"
                  role="tabpanel"
                  aria-labelledby="vd-tab-03"
                >
                  <div class="tab-product__slide tx-arrow"></div>
                </div>

                <div
                  class="tab-pane fade show active"
                  id="vd-tab4"
                  role="tabpanel"
                  aria-labelledby="vd-tab-04"
                >
                  <div class="tab-product__slide tx-arrow"></div>
                </div>

                <div
                  class="tab-pane fade"
                  id="vd-tab5"
                  role="tabpanel"
                  aria-labelledby="vd-tab-05"
                >
                  <div class="tab-product__slide tx-arrow"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <script>
          document.addEventListener("DOMContentLoaded", async () => {
            const res = await fetch("/productpagedata");
            const prods = await res.json();
            if (!Array.isArray(prods)) return;

            prods.sort((a, b) => new Date(b.date) - new Date(a.date));

            const buckets = {
              "vd-tab1": (p) => true,
              "vd-tab2": (p) => p.label === "Hot",
              "vd-tab3": (p) => p.label === "New",
              "vd-tab4": (p) => p.label === "New",
              "vd-tab5": (p) => p.label === "Hot",
            };

            const initSlider = (sliderEl, itemCount) => {
              if ($(sliderEl).hasClass("slick-initialized")) {
                $(sliderEl).slick("unslick");
              }

              $(sliderEl).slick({
                slidesToShow: Math.min(itemCount, 7),
                slidesToScroll: 1,
                autoplay: false,
                infinite: true,
                arrows: true,
                dots: false,
                responsive: [
                  {
                    breakpoint: 1200,
                    settings: { slidesToShow: Math.min(itemCount, 6) },
                  },
                  {
                    breakpoint: 992,
                    settings: { slidesToShow: Math.min(itemCount, 4) },
                  },
                  {
                    breakpoint: 576,
                    settings: { slidesToShow: Math.min(itemCount, 2) },
                  },
                ],
              });
            };

            Object.entries(buckets).forEach(([paneId, filterFn]) => {
              const pane = document.getElementById(paneId);
              const sliderEl = pane?.querySelector(".tab-product__slide");
              if (!sliderEl) return;

              const seen = new Set();
              const items = prods
                .filter((p) => filterFn(p) && !seen.has(p.id) && seen.add(p.id))
                .slice(0, 7);

              sliderEl.innerHTML = items
                .map(
                  (p) => `
                <div class="tab-product__item tx-product text-center">
                  <div class="thumb">
                    <a href="shop-single.html?id=${p.id}">
                      <img src="/uploads/${p.image}" alt="${p.name}" />
                    </a>
                  </div>
                  <div class="content">
                    <div class="product__review ul_li_center">
                      <ul class="rating-star ul_li mr-10">
                        <li><i class="fas fa-star"></i></li>
                        <li><i class="fas fa-star"></i></li>
                        <li><i class="fas fa-star"></i></li>
                        <li><i class="far fa-star"></i></li>
                        <li><i class="far fa-star"></i></li>
                      </ul>
                      <span>(${Math.floor(Math.random() * 100)})</span>
                    </div>
                    <h3 class="title">
                      <a href="shop-single.html?id=${p.id}">
                        ${p.name.split(" ").slice(0, 4).join(" ")}${
                    p.name.split(" ").length > 4 ? "…" : ""
                  }
                      </a>
                    </h3>
                    <span class="price">
                      ( ${p.price} - <span class="old-price">${
                    p.price_sale
                  }</span> )
                    </span>
                  </div>
                  <ul class="product__action">
                    <li>
                      <a href="/uploads/${p.image}" class="img-popup icon-btn">
                        <i class="far fa-compress-alt"></i>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="add-to-cart icon-btn"
                         data-id="${p.id}"
                         data-name="${p.name}"
                         data-store="${p.store}"
                         data-image="${p.image}"
                         data-price="${p.price}"
                         data-price_sale="${p.price_sale}">
                        <i class="far fa-shopping-basket"></i>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="add-to-wishlist icon-btn"
                         data-id="${p.id}"
                         data-name="${p.name}"
                         data-store="${p.store}"
                         data-image="${p.image}"
                         data-price="${parseFloat(
                           p.price.replace(/[^0-9.]/g, "")
                         )}"
                         data-price_sale="${parseFloat(
                           p.price_sale.replace(/[^0-9.]/g, "")
                         )}"
                         data-sku="${p.sku}"
                         data-stockstatus="${p.stockstatus}">
                        <i class="far fa-heart"></i>
                      </a>
                    </li>
                  </ul>
                  <span class="badge-skew">${p.label}</span>
                </div>
              `
                )
                .join("");

              initSlider(sliderEl, items.length);
            });
          });
        </script>

        <div
          id="image-lightbox"
          style="
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
            z-index: 9999;
            flex-direction: column;
          "
        >
          <div
            style="
              position: relative;
              display: flex;
              align-items: center;
              justify-content: center;
              width: 100%;
              height: 100%;
            "
          >
            <button
              id="lightbox-prev"
              style="
                position: absolute;
                left: 20px;
                top: 50%;
                transform: translateY(-50%);
                font-size: 22px;
                color: white;
                background: none;
                border: none;
                cursor: pointer;
              "
            >
              <i class="fas fa-play" style="transform: rotate(180deg)"></i>
            </button>

            <div style="position: relative; display: inline-block">
              <img
                id="lightbox-image"
                src=""
                alt="Product"
                style="
                  width: 336px;
                  height: 400px;
                  object-fit: contain;
                  border-radius: 4px;
                "
              />

              <div
                id="lightbox-counter"
                style="
                  position: absolute;
                  bottom: 0px;
                  right: -2px;
                  color: #fff;
                  padding: 4px 8px;
                  border-radius: 12px;
                  font-size: 14px;
                "
              >
                1 of 0
              </div>

              <button
                id="lightbox-close"
                style="
                  position: absolute;
                  top: 0;
                  right: -8px;
                  font-size: 30px;
                  color: white;
                  background: none;
                  border: none;
                  border-radius: 50%;
                  width: 32px;
                  height: 32px;
                  cursor: pointer;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  padding: 0;
                  z-index: 10;
                "
              >
                ×
              </button>
            </div>

            <button
              id="lightbox-next"
              style="
                position: absolute;
                right: 20px;
                top: 50%;
                transform: translateY(-50%);
                font-size: 22px;
                color: white;
                background: none;
                border: none;
                cursor: pointer;
              "
            >
              <i class="fas fa-play"></i>
            </button>
          </div>
        </div>

        <div class="rd-slide-product">
          <div class="container">
            <div class="row mt-none-30">
              <div class="col-lg-3 mt-30">
                <div
                  class="product-category"
                  data-background="assets/img/bg/cat_bg.jpg"
                >
                  <h2 class="section-heading mb-25">
                    <span><span>Catagory</span></span>
                  </h2>

                  <ul class="list-unstyled"></ul>
                </div>
              </div>

              <div class="col-lg-9 mt-30">
                <div class="rd-slide-products">
                  <h2 class="section-heading mb-25">
                    <span>Trending Product</span>
                  </h2>
                  <div class="rd-product__slide tx-arrow"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <script>
          document.addEventListener("DOMContentLoaded", function () {
            const lightbox = document.getElementById("image-lightbox");
            const lightboxImg = document.getElementById("lightbox-image");
            const counterEl = document.getElementById("lightbox-counter");
            const lightboxClose = document.getElementById("lightbox-close");
            const lightboxPrev = document.getElementById("lightbox-prev");
            const lightboxNext = document.getElementById("lightbox-next");

            let currentImages = [];
            let currentIndex = 0;

            fetch("/productpagedata")
              .then((res) => res.json())
              .then((data) => {
                const hotProducts = data
                  .filter((p) => p.label === "Hot")
                  .sort((a, b) => new Date(b.date) - new Date(a.date))
                  .slice(0, 8);

                const slideWrapper =
                  document.querySelector(".rd-product__slide");
                slideWrapper.innerHTML = "";

                const slideItem = document.createElement("div");
                slideItem.className = "rd-product__slide-item";

                currentImages = hotProducts.map((p) => `/uploads/${p.image}`);

                hotProducts.forEach((p, i) => {
                  const card = document.createElement("div");
                  card.className = "product__item";
                  card.innerHTML = `
                    <div class="product__img product__img1 text-center border-top-0">
                      <a href="shop-single.html?id=${p.id}">
                        <img src="/uploads/${p.image}" alt="${p.name}" />
                      </a>
                    </div>
                    <div class="product__content">
                      <div class="product__review ul_li_center">
                        <ul class="rating-star ul_li mr-10">
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="far fa-star"></i></li>
                          <li><i class="far fa-star"></i></li>
                        </ul>
                        <span>(${Math.floor(Math.random() * 100)})</span>
                      </div>
                      <h2 class="product__title">
                        <a href="shop-single.html?id=${p.id}">${p.name}</a>
                      </h2>
                      <h4 class="product__price">
                        <span class="new">${p.price}</span>
                        <span class="old">${p.price_sale}</span>
                        <span class="d-none">${p.sku}</span>
                        <span class="d-none">${p.stockstatus}</span>
                        <span class="d-none">${p.store}</span>
                      </h4>
                    </div>
                    <ul class="product__action">
                      <li>
                        <a href="#" class="img-popup icon-btn" data-index="${i}">
                          <i class="far fa-compress-alt"></i>
                        </a>
                      </li>
                      <li>
                        <a href="#" class="add-to-cart icon-btn"
                           data-id="${p.id}"
                           data-name="${p.name}"
                           data-store="${p.store}"
                           data-price="${p.price.replace(/[^0-9.]/g, "")}"
                           data-price_sale="${p.price_sale.replace(
                             /[^0-9.]/g,
                             ""
                           )}"
                           data-image="${p.image}">
                          <i class="far fa-shopping-basket"></i>
                        </a>
                      </li>
                      <li>
                        <a href="#" class="add-to-wishlist icon-btn"
                           data-id="${p.id}"
                           data-name="${p.name}"
                           data-store="${p.store}"
                           data-price="${p.price.replace(/[^0-9.]/g, "")}"
                           data-price_sale="${p.price_sale.replace(
                             /[^0-9.]/g,
                             ""
                           )}"
                           data-image="${p.image}"
                           data-sku="${p.sku}"
                           data-stockstatus="${p.stockstatus}">
                          <i class="far fa-heart"></i>
                        </a>
                      </li>
                    </ul>
                    <span class="badge-skew">${p.label}</span>
                  `;
                  slideItem.appendChild(card);
                });

                slideWrapper.appendChild(slideItem);
              })
              .catch((err) => {
                console.error("Failed to load Hot Products:", err);
              });

            // Lightbox open
            document.body.addEventListener("click", (e) => {
              const popup = e.target.closest(".img-popup");
              if (popup) {
                e.preventDefault();
                currentIndex = +popup.dataset.index;
                openLightbox(currentImages[currentIndex]);
              }
            });

            function openLightbox(src) {
              lightboxImg.src = src;
              counterEl.textContent = `${currentIndex + 1} of ${
                currentImages.length
              }`;
              lightbox.style.display = "flex";
            }

            lightboxClose.addEventListener("click", () => {
              lightbox.style.display = "none";
            });

            lightboxNext.addEventListener("click", () => {
              currentIndex = (currentIndex + 1) % currentImages.length;
              openLightbox(currentImages[currentIndex]);
            });

            lightboxPrev.addEventListener("click", () => {
              currentIndex =
                (currentIndex - 1 + currentImages.length) %
                currentImages.length;
              openLightbox(currentImages[currentIndex]);
            });

            // Cart & Wishlist click handler
            document.body.addEventListener("click", async (e) => {
              const cartBtn = e.target.closest(".add-to-cart");
              const wishBtn = e.target.closest(".add-to-wishlist");
              if (!cartBtn && !wishBtn) return;

              e.preventDefault();

              const userId = localStorage.getItem("user_id");
              if (!userId) {
                showBanner("Please log in to perform that action.", "error");
                return;
              }

              // Add to Cart
              if (cartBtn) {
                try {
                  const res = await fetch("/addcart", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                      user_id: +userId,
                      name: cartBtn.dataset.name,
                      store: cartBtn.dataset.store,
                      price: cartBtn.dataset.price,
                      price_sale: cartBtn.dataset.price_sale,
                      image: cartBtn.dataset.image,
                      quantity: 1,
                    }),
                  });
                  if (res.ok) {
                    showBanner("Product added to cart!", "success");
                    if (typeof loadSidebarCart === "function")
                      loadSidebarCart();
                    if (typeof updateCounts === "function") updateCounts();
                  } else {
                    showBanner("Add to cart failed.", "error");
                  }
                } catch (err) {
                  console.error("Cart error:", err);
                  showBanner("Add to cart failed.", "error");
                }
                return;
              }

              // Add to Wishlist
              if (wishBtn) {
                try {
                  const res = await fetch("/wishlistpost", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                      user_id: +userId,
                      product_name: wishBtn.dataset.name,
                      store: wishBtn.dataset.store,
                      price: wishBtn.dataset.price,
                      price_sale: wishBtn.dataset.price_sale,
                      image: wishBtn.dataset.image,
                      sku: wishBtn.dataset.sku,
                      stockstatus: wishBtn.dataset.stockstatus,
                    }),
                  });
                  if (res.ok) {
                    showBanner("Product added to wishlist!", "success");
                    if (typeof updateCounts === "function") updateCounts();
                  } else {
                    showBanner("Add to wishlist failed.", "error");
                  }
                } catch (err) {
                  console.error("Wishlist error:", err);
                  showBanner("Add to wishlist failed.", "error");
                }
              }
            });

            // Success/Error banner
            function showBanner(msg, type = "success") {
              document.querySelectorAll(".banner").forEach((el) => el.remove());
              const b = document.createElement("div");
              b.className = `banner ${type}`;
              b.textContent = msg;
              Object.assign(b.style, {
                position: "fixed",
                top: "10px",
                left: "50%",
                transform: "translateX(-50%)",
                padding: "10px 20px",
                background: type === "success" ? "#4caf50" : "#f44336",
                color: "#fff",
                borderRadius: "4px",
                zIndex: 9999,
                boxShadow: "0 2px 6px rgba(0,0,0,0.3)",
              });
              document.body.appendChild(b);
              setTimeout(() => b.remove(), 3000);
            }
          });
        </script>

        <script>
          document.addEventListener("DOMContentLoaded", async () => {
            const catRes = await fetch("/productcatdata");
            let cats = await catRes.json();
            const ul = document.querySelector(".product-category ul");
            if (!Array.isArray(cats) || !ul) return;

            cats = cats.filter(
              (cat) => cat.status === "Published" || cat.status === "Draft"
            );

            const visible = cats.slice(0, 10);
            const hidden = cats.slice(10);

            function makeLi(cat) {
              const li = document.createElement("li");
              li.className = "cat-item-has-children";
              li.innerHTML = `
                <a href="shop.html?cat=${encodeURIComponent(cat.permalink)}">
                  <img src="/uploads/${cat.image}" alt="${cat.name}" />
                  ${cat.name}
                </a>
              `;
              return li;
            }

            visible.forEach((cat) => ul.appendChild(makeLi(cat)));

            let moreLi;
            if (hidden.length > 0) {
              moreLi = document.createElement("li");
              moreLi.className = "more-item";
              moreLi.innerHTML = `<a href="#!">+ More items</a>`;
              ul.appendChild(moreLi);
            }

            if (moreLi) {
              let expanded = false;
              moreLi.addEventListener("click", (e) => {
                e.preventDefault();
                if (!expanded) {
                  hidden.forEach((cat) => ul.insertBefore(makeLi(cat), moreLi));
                  moreLi.querySelector("a").textContent = "– Show fewer";
                } else {
                  Array.from(ul.querySelectorAll("li"))
                    .slice(visible.length, visible.length + hidden.length)
                    .forEach((li) => li.remove());
                  moreLi.querySelector("a").textContent = "+ More items";
                }
                expanded = !expanded;
              });
            }
          });
        </script>

        <div class="rd-tab-product mt-60">
          <div class="container">
            <div class="product__nav-wrap ul_li_between mb-25">
              <h2 class="section-heading">
                <span><span>Smartphone</span> / Tablet / Monitor</span>
              </h2>
              <ul class="product__nav nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="home-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#home"
                    type="button"
                    role="tab"
                    aria-controls="home"
                    aria-selected="true"
                  >
                    Nokia
                  </button>
                </li>

                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="profile-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#profile"
                    type="button"
                    role="tab"
                    aria-controls="profile"
                    aria-selected="false"
                  >
                    Samsung
                  </button>
                </li>

                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="messages-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#messages"
                    type="button"
                    role="tab"
                    aria-controls="messages"
                    aria-selected="true"
                  >
                    Apple
                  </button>
                </li>

                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link active"
                    id="settings-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#settings"
                    type="button"
                    role="tab"
                    aria-controls="settings"
                    aria-selected="false"
                  >
                    Huawei
                  </button>
                </li>

                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="tab-05"
                    data-bs-toggle="tab"
                    data-bs-target="#tab5"
                    type="button"
                    role="tab"
                    aria-controls="tab5"
                    aria-selected="false"
                  >
                    xioami 71
                  </button>
                </li>
              </ul>
            </div>

            <div class="tab-content">
              <div
                class="tab-pane animated fadeInUp"
                id="home"
                role="tabpanel"
                aria-labelledby="home-tab"
              >
                <div class="row mt-none-30">
                  <div class="col-lg-4 mt-30">
                    <div class="row mt-none-30">
                      <div class="col-lg-6 col-md-6 mt-30"></div>

                      <div class="col-lg-6 col-md-6 mt-30"></div>

                      <div class="col-lg-6 col-md-6 mt-30"></div>

                      <div class="col-lg-6 col-md-6 mt-30"></div>
                    </div>
                  </div>
                  <div class="col-lg-4 mt-30"></div>

                  <div class="col-lg-4 mt-30">
                    <div class="row mt-none-30">
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>

                      <div class="col-lg-6 col-md-6 mt-30"></div>
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="tab-pane animated fadeInUp"
                id="profile"
                role="tabpanel"
                aria-labelledby="profile-tab"
              >
                <div class="row mt-none-30">
                  <div class="col-lg-4 mt-30">
                    <div class="row mt-none-30">
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>

                      <div class="col-lg-6 col-md-6 mt-30"></div>
                    </div>
                  </div>

                  <div class="col-lg-4 mt-30"></div>

                  <div class="col-lg-4 mt-30">
                    <div class="row mt-none-30">
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="tab-pane animated fadeInUp"
                id="messages"
                role="tabpanel"
                aria-labelledby="messages-tab"
              >
                <div class="row mt-none-30">
                  <div class="col-lg-4 mt-30">
                    <div class="row mt-none-30">
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>

                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                    </div>
                  </div>

                  <div class="col-lg-4 mt-30"></div>

                  <div class="col-lg-4 mt-30">
                    <div class="row mt-none-30">
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="tab-pane animated fadeInUp show active"
                id="settings"
                role="tabpanel"
                aria-labelledby="settings-tab"
              >
                <div class="row mt-none-30">
                  <div class="col-lg-4 mt-30">
                    <div class="row mt-none-30">
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                    </div>
                  </div>

                  <div class="col-lg-4 mt-30"></div>

                  <div class="col-lg-4 mt-30">
                    <div class="row mt-none-30">
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="tab-pane animated fadeInUp"
                id="tab5"
                role="tabpanel"
                aria-labelledby="tab-05"
              >
                <div class="row mt-none-30">
                  <div class="col-lg-4 mt-30">
                    <div class="row mt-none-30">
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                    </div>
                  </div>

                  <div class="col-lg-4 mt-30"></div>

                  <div class="col-lg-4 mt-30">
                    <div class="row mt-none-30">
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>

                      <div class="col-lg-6 col-md-6 mt-30"></div>
                      <div class="col-lg-6 col-md-6 mt-30"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <script>
          document.addEventListener("DOMContentLoaded", async () => {
            const res = await fetch("/productpagedata");
            let prods = await res.json();
            if (!Array.isArray(prods)) return;

            prods = prods
              .filter((p) => p.status === "Published" || p.status === "Draft")
              .sort((a, b) => new Date(b.date) - new Date(a.date));

            const tabs = {
              Nokia: "home",
              Samsung: "profile",
              Apple: "messages",
              Huawei: "settings",
              "xioami 71": "tab5",
            };

            Object.entries(tabs).forEach(([brand, tabId]) => {
              const container = document.querySelector(`#${tabId} .row`);
              if (!container) return;

              const items = prods
                .filter((p) => p.brand?.toLowerCase() === brand.toLowerCase())
                .slice(0, 9);

              if (items.length < 1) {
                container.innerHTML = `<div class="col-12 mt-30"><h6 class="text-danger">No "${brand}" products found.</h6></div>`;
                return;
              }

              const leftItems = items.slice(0, 4);
              const centerItem = items[4];
              const rightItems = items.slice(5, 9);

              const getCard = (p, isCenter = false) => {
                const percent = parseInt(p.minimumorder) || 0;
                return `
                  <div class="rd-product__single rd-product-index ${
                    isCenter ? "tall-card tall-card1 border-0" : ""
                  } mt-30">
                    <div class="p-wrap ul_li mb-10 ${
                      isCenter ? "d-flex flex-column flex-wrap w-100" : ""
                    }">
                      <div class="rd-product__img">
                        <a href="shop-single.html?id=${p.id}">
                          <img src="/uploads/${p.image}" alt="${p.name}" />
                        </a>
                      </div>
                      <div class="content">
                        ${
                          isCenter
                            ? `<div class="product__review ul_li mb-1">
                                <ul class="rating-star ul_li mr-10">
                                  <li><i class="fas fa-star"></i></li>
                                  <li><i class="fas fa-star"></i></li>
                                  <li><i class="fas fa-star"></i></li>
                                  <li><i class="fas fa-star"></i></li>
                                  <li><i class="far fa-star"></i></li>
                                </ul>
                                <span>(${Math.floor(
                                  Math.random() * 100
                                )})</span>
                              </div>`
                            : ""
                        }
                        <h2 class="title">
                          <a href="shop-single.html?id=${p.id}">${p.name}</a>
                        </h2>
                        <h4 class="product__price d-flex flex-row flex-nowrap">
                          <span class="new">${p.price_sale}</span>
                          <span class="old">${p.price}</span>
                        </h4>
                      </div>
                    </div>
                    <span class="product__available">${
                      percent > 0 ? "Available" : "Sold Out"
                    }: <span>${percent}</span></span>
                    <div class="product__progress progress mb-0 mt-2 h-8 color-primary">
                      <div class="progress-bar" style="width:${percent}%;" aria-valuenow="${percent}" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                  </div>`;
              };

              const leftHtml = leftItems
                .map((p) => `<div class="col-lg-6">${getCard(p)}</div>`)
                .join("");

              const rightHtml = rightItems
                .map((p) => `<div class="col-lg-6">${getCard(p)}</div>`)
                .join("");

              const centerHtml = centerItem
                ? `<div class="col-lg-4">
                     <div class="rd-product__single tall-card mt-30 p-4 border border-warning rounded h-100 tall-card1">
                       <h4 class="mb-3 text-warning">5 Star Review</h4>
                       ${getCard(centerItem, true)}
                     </div>
                   </div>`
                : "";

              container.innerHTML = `
                <div class="col-lg-4"><div class="row">${leftHtml}</div></div>
                ${centerHtml}
                <div class="col-lg-4"><div class="row">${rightHtml}</div></div>`;
            });
          });
        </script>

        <div class="add pt-50 pb-50">
          <div class="container">
            <div
              class="add__wrap bg_img"
              data-background="assets/img/bg/add_bg_01.jpg"
            >
              <div class="add__text">
                <span
                  ><span>10%</span> Free Shipping On All Order Over
                  <span>$99</span></span
                >
              </div>
            </div>
          </div>
        </div>

        <div class="rd-featured-product">
          <div class="container">
            <div class="row mt-none-30">
              <div class="col-lg-3 mt-30">
                <div class="hot-deal__slide-wrap">
                  <h2 class="section-heading mb-25"><span>Hot Deals</span></h2>
                  <div class="hot-deal__slide tx-arrow hot-deals-only"></div>
                </div>
              </div>

              <div class="col-lg-9 mt-30">
                <div class="product__nav-wrap style-2 ul_li_between mb-20">
                  <h2 class="section-heading">
                    <span>Monthly Featured Item</span>
                  </h2>
                  <ul
                    class="product__nav style-2 nav nav-tabs"
                    id="rdm-myTab"
                    role="tablist"
                  >
                    <li class="nav-item" role="presentation">
                      <button
                        class="nav-link"
                        id="rdm-tab-01"
                        data-bs-toggle="tab"
                        data-bs-target="#rdm-tab1"
                        type="button"
                        role="tab"
                        aria-controls="rdm-tab1"
                        aria-selected="true"
                      >
                        Nokia
                      </button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button
                        class="nav-link"
                        id="rdm-tab-02"
                        data-bs-toggle="tab"
                        data-bs-target="#rdm-tab2"
                        type="button"
                        role="tab"
                        aria-controls="rdm-tab2"
                        aria-selected="false"
                      >
                        Samsung
                      </button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button
                        class="nav-link"
                        id="rdm-tab-03"
                        data-bs-toggle="tab"
                        data-bs-target="#rdm-tab3"
                        type="button"
                        role="tab"
                        aria-controls="rdm-tab3"
                        aria-selected="false"
                      >
                        Apple
                      </button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button
                        class="nav-link active"
                        id="rdm-tab-04"
                        data-bs-toggle="tab"
                        data-bs-target="#rdm-tab4"
                        type="button"
                        role="tab"
                        aria-controls="rdm-tab4"
                        aria-selected="false"
                      >
                        xioami 71
                      </button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button
                        class="nav-link"
                        id="rdm-tab-05"
                        data-bs-toggle="tab"
                        data-bs-target="#rdm-tab5"
                        type="button"
                        role="tab"
                        aria-controls="rdm-tab5"
                        aria-selected="false"
                      >
                        Huawei
                      </button>
                    </li>
                  </ul>
                </div>

                <div class="rd-monthly-products">
                  <div class="tab-content" id="rd-monthly-myTabContent">
                    <div
                      class="tab-pane animated fadeInUp"
                      id="rdm-tab1"
                      role="tabpanel"
                      aria-labelledby="rdm-tab-01"
                    >
                      <div class="row mt-none-30">
                        <div class="col-lg-4"></div>
                        <div class="col-lg-4"></div>

                        <div class="col-lg-4"></div>
                      </div>
                    </div>

                    <div
                      class="tab-pane animated fadeInUp"
                      id="rdm-tab2"
                      role="tabpanel"
                      aria-labelledby="rdm-tab-02"
                    >
                      <div class="row mt-none-30">
                        <div class="col-lg-4"></div>
                        <div class="col-lg-4"></div>

                        <div class="col-lg-4"></div>
                      </div>
                    </div>

                    <div
                      class="tab-pane animated fadeInUp"
                      id="rdm-tab3"
                      role="tabpanel"
                      aria-labelledby="rdm-tab-03"
                    >
                      <div class="row mt-none-30">
                        <div class="col-lg-4"></div>
                        <div class="col-lg-4"></div>

                        <div class="col-lg-4"></div>
                      </div>
                    </div>

                    <div
                      class="tab-pane animated fadeInUp show active"
                      id="rdm-tab4"
                      role="tabpanel"
                      aria-labelledby="rdm-tab-04"
                    >
                      <div class="row mt-none-30">
                        <div class="col-lg-4 col-md-6"></div>
                        <div class="col-lg-4 col-md-6"></div>

                        <div class="col-lg-4 col-md-6"></div>
                      </div>
                    </div>

                    <div
                      class="tab-pane animated fadeInUp"
                      id="rdm-tab5"
                      role="tabpanel"
                      aria-labelledby="rdm-tab-05"
                    >
                      <div class="row mt-none-30">
                        <div class="col-lg-4"></div>
                        <div class="col-lg-4"></div>

                        <div class="col-lg-4"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <script>
          document.addEventListener("DOMContentLoaded", () => {
            const slideWrap = document.querySelector(".hot-deals-only");
            if (!slideWrap) return;
            slideWrap.innerHTML = "";

            const pad2 = (n) => String(n).padStart(2, "0");

            function makeCountdown(endTs) {
              const ctr = document.createElement("div");
              ctr.className = "custom-countdown ul_li_center mb-15 mt-15";
              ctr.innerHTML = `
                <div class="cd-box">
                  <span class="cd-time cd-days">00</span>
                  <small>DAYS</small>
                </div>
                <div class="cd-box">
                  <span class="cd-time cd-hours">00</span>
                  <small>HOURS</small>
                </div>
                <div class="cd-box">
                  <span class="cd-time cd-mins">00</span>
                  <small>MINS</small>
                </div>
                <div class="cd-box">
                  <span class="cd-time cd-secs">00</span>
                  <small>SEC</small>
                </div>
              `;

              const tick = () => {
                const diff = endTs - Date.now();
                if (diff <= 0) {
                  clearInterval(iv);
                  slideWrap.innerHTML =
                    '<p class="text-center text-danger">No Deals available.</p>';
                  return;
                }
                let d = Math.floor(diff / 864e5);
                let h = Math.floor((diff % 864e5) / 36e5);
                let m = Math.floor((diff % 36e5) / 6e4);
                let s = Math.floor((diff % 6e4) / 1e3);
                ctr.querySelector(".cd-days").textContent = pad2(d);
                ctr.querySelector(".cd-hours").textContent = pad2(h);
                ctr.querySelector(".cd-mins").textContent = pad2(m);
                ctr.querySelector(".cd-secs").textContent = pad2(s);
              };

              tick();
              const iv = setInterval(tick, 1000);
              return ctr;
            }

            fetch("/flashsalesmaindata")
              .then((r) => {
                if (!r.ok) throw new Error(r.status);
                return r.json();
              })
              .then((deals) => {
                const now = Date.now();
                const active = deals.find(
                  (d) =>
                    d.status === "Published" &&
                    new Date(d.end_date).getTime() > now
                );

                if (!active) {
                  slideWrap.innerHTML =
                    '<p class="text-center text-danger fw-bold">No Deals available.</p>';
                  return;
                }

                const endTs = new Date(active.end_date).getTime();

                const item = document.createElement("div");
                item.className = "hot-deal__item text-center";
                item.innerHTML = `
                  <div class="thumb">
                    <a href="shop-single.html?id=${active.product_id}">
                      <img src="/uploads/${active.image}" alt="${
                  active.product_name
                }" />
                    </a>
                  </div>
                  <div class="content">
                    <h2 class="title">
                      <a href="shop-single.html?id=${active.product_id}">
                        ${active.product_name}
                      </a>
                    </h2>
                    <div class="product__review ul_li_center">
                      <ul class="rating-star ul_li mr-10">
                        <li><i class="fas fa-star"></i></li>
                        <li><i class="fas fa-star"></i></li>
                        <li><i class="fas fa-star"></i></li>
                        <li><i class="far fa-star"></i></li>
                        <li><i class="far fa-star"></i></li>
                      </ul>
                      <span>(${Math.floor(Math.random() * 50) + 1})</span>
                    </div>
                    <div class="countdown-placeholder"></div>
                    <h4 class="product__price">
                      <span class="new">${active.price}</span>
                      <span class="old">${active.price_sale}</span>
                    </h4>
                  </div>
                `;
                slideWrap.appendChild(item);

                const ph = slideWrap.querySelector(".countdown-placeholder");
                ph.replaceWith(makeCountdown(endTs));

                const expiryCheck = setInterval(() => {
                  if (Date.now() >= endTs) {
                    clearInterval(expiryCheck);
                    slideWrap.innerHTML =
                      '<p class="text-center text-danger fw-bold">No Deals available.</p>';
                  }
                }, 1000);
              })
              .catch((err) => {
                console.error("Hot deals load failed:", err);
                slideWrap.innerHTML =
                  '<p class="text-center text-danger fw-bold">No Deals available.</p>';
              });
          });
        </script>

        <script>
          document.addEventListener("DOMContentLoaded", async () => {
            const tabMap = {
              Nokia: "#rdm-tab1",
              Samsung: "#rdm-tab2",
              Apple: "#rdm-tab3",
              "xioami 71": "#rdm-tab4",
              Huawei: "#rdm-tab5",
            };

            const lightbox = document.getElementById("image-lightbox");
            const lightboxImg = document.getElementById("lightbox-image");
            const counterEl = document.getElementById("lightbox-counter");
            const lightboxClose = document.getElementById("lightbox-close");
            const lightboxPrev = document.getElementById("lightbox-prev");
            const lightboxNext = document.getElementById("lightbox-next");

            let allProducts = [];

            try {
              const res = await fetch("/productpagedata");
              allProducts = await res.json();
            } catch (err) {
              console.error("Failed to fetch product data:", err);
              return;
            }

            function renderProducts(tabSelector, brand) {
              const container = document.querySelector(`${tabSelector} .row`);
              if (!container) return;

              const filtered = allProducts.filter(
                (p) =>
                  p.status === "Published" &&
                  p.brand?.toLowerCase().trim() === brand.toLowerCase().trim()
              );

              container.innerHTML = "";

              if (filtered.length === 0) {
                container.innerHTML = `
                          <div class="col-12">
                            <div class="text-center">
                              <h6 class="mt-4 text-danger fw-bold">No "${brand}" products available.</h6>
                            </div>
                          </div>`;
                return;
              }

              const products = filtered.slice(0, 5);
              const left = products.slice(0, 2);
              const center = products[2];
              const right = products.slice(3, 5);

              let html = `<div class="col-lg-4 col-md-6">${left
                .map(renderSingleProduct)
                .join("")}</div>`;

              if (center) {
                html += `
                        <div class="col-lg-4 col-md-6">
                          <div class="feature-product__single2 mt-15 tx-product">
                            <div class="image text-center pos-rel">
                              <a href="shop-single.html?product_id=${
                                center.id
                              }">
                                <img src="/uploads/${center.image}" alt="${
                  center.name
                }" />
                              </a>
                              <ul class="product__action style-2 br-5 ul_li">
                                <li>
                                  <a href="/uploads/${
                                    center.image
                                  }" class="img-popup"><i class="far fa-compress-alt"></i></a>
                                </li>
                                <li>
                                  <a href="#" class="add-to-cart" data-id="${
                                    center.id
                                  }"><i class="far fa-shopping-basket"></i></a>
                                </li>
                                <li>
                                  <a href="#" class="add-to-wishlist" data-id="${
                                    center.id
                                  }"><i class="far fa-heart"></i></a>
                                </li>
                              </ul>
                            </div>
                            <div class="product__content text-center">
                              <div class="product__review ul_li_center">
                                <ul class="rating-star ul_li mr-10">
                                  ${[...Array(5)]
                                    .map(
                                      (_, i) =>
                                        `<li><i class="${
                                          i < 3 ? "fas" : "far"
                                        } fa-star"></i></li>`
                                    )
                                    .join("")}
                                </ul>
                              </div>
                              <h2 class="title"><a href="shop-single.html?product_id=${
                                center.id
                              }">${center.name}</a></h2>
                              <h4 class="product__price mb-10">
                                <span class="new">${center.price}</span>
                                <span class="old">${center.price_sale}</span>
                              </h4>
                              <p class="fs-13">${center.description?.slice(
                                0,
                                80
                              )}...</p>
                            </div>
                          </div>
                        </div>`;
              }

              html += `<div class="col-lg-4 col-md-6">${right
                .map(renderSingleProduct)
                .join("")}</div>`;
              container.innerHTML = html;

              bindLightbox(`${tabSelector} .row`);
            }

            function renderSingleProduct(p) {
              return `
                        <div class="feature-product__single mt-15">
                          <div class="feature-product__product ul_li">
                            <div class="image">
                              <a href="shop-single.html?product_id=${p.id}">
                                <img src="/uploads/${p.image}" alt="${
                p.name
              }" />
                              </a>
                            </div>
                            <div class="content">
                              <ul class="rating-star ul_li">
                                ${[...Array(5)]
                                  .map(
                                    (_, i) =>
                                      `<li><i class="${
                                        i < 4 ? "fas" : "far"
                                      } fa-star"></i></li>`
                                  )
                                  .join("")}
                              </ul>
                              <h3 class="title"><a href="shop-single.html?product_id=${
                                p.id
                              }">${p.name}</a></h3>
                              <h4 class="product__price">
                                <span class="new">${p.price}</span>
                                <span class="old">${p.price_sale}</span>
                              </h4>
                            </div>
                          </div>
                          <span class="fs-13">Available: <span class="color-black">${
                            p.minimumorder
                          }</span></span>
                          <div class="product__progress progress mb-0 color-primary">
                            <div class="progress-bar" role="progressbar" style="width:${
                              p.minimumorder
                            }%;" aria-valuenow="${
                p.minimumorder
              }" aria-valuemin="0" aria-valuemax="100"></div>
                          </div>
                        </div>`;
            }

            function bindLightbox(containerSelector) {
              const links = Array.from(
                document.querySelectorAll(`${containerSelector} a.img-popup`)
              );
              const images = links.map((link) => link.getAttribute("href"));
              let currentIndex = 0;

              links.forEach((link, index) => {
                link.addEventListener("click", (e) => {
                  e.preventDefault();
                  showLightbox(index);
                });
              });

              function showLightbox(index) {
                currentIndex = (index + images.length) % images.length;
                lightboxImg.src = images[currentIndex];
                counterEl.textContent = `${currentIndex + 1} of ${
                  images.length
                }`;
                lightbox.style.display = "flex";
              }

              function closeLightbox() {
                lightbox.style.display = "none";
              }

              lightboxPrev.onclick = () => showLightbox(currentIndex - 1);
              lightboxNext.onclick = () => showLightbox(currentIndex + 1);
              lightboxClose.onclick = closeLightbox;

              window.onkeydown = (e) => {
                if (lightbox.style.display !== "flex") return;
                if (e.key === "Escape") closeLightbox();
                if (e.key === "ArrowLeft") showLightbox(currentIndex - 1);
                if (e.key === "ArrowRight") showLightbox(currentIndex + 1);
              };
            }

            document
              .querySelectorAll('#rdm-myTab button[data-bs-toggle="tab"]')
              .forEach((btn) => {
                btn.addEventListener("shown.bs.tab", (e) => {
                  const brand = e.target.textContent.trim();
                  const tabSelector = tabMap[brand];
                  if (tabSelector) renderProducts(tabSelector, brand);
                });
              });

            renderProducts("#rdm-tab4", "xioami 71");
          });
        </script>

        <div class="product-cat pt-60">
          <div class="container">
            <h2 class="section-heading mb-25">
              <span>Product Catagories</span>
            </h2>
            <div class="product-cat__wrap">
              <div class="row mt-none-50">
                <div class="col-lg-4">
                  <div class="product-cat__item mt-50">
                    <div class="product-cat__images">
                      <div class="tab-content" id="fc-myTabContent">
                        <div
                          class="tab-pane fade show active"
                          id="fc-home"
                          role="tabpanel"
                          aria-labelledby="fc-home-tab"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_33.png" alt=""
                            /></a>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="fc-profile"
                          role="tabpanel"
                          aria-labelledby="fc-profile-tab"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_34.png" alt=""
                            /></a>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="fc-contact"
                          role="tabpanel"
                          aria-labelledby="fc-contact-tab"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_35.png" alt=""
                            /></a>
                          </div>
                        </div>
                      </div>
                      <ul
                        class="nav product-cat__nav nav-tabs"
                        id="fc-myTab"
                        role="tablist"
                      >
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link active"
                            id="fc-home-tab"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-home"
                            type="button"
                            role="tab"
                            aria-controls="home"
                            aria-selected="true"
                          >
                            <img src="assets/img/product/img_33.png" alt="" />
                          </button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="fc-profile-tab"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-profile"
                            type="button"
                            role="tab"
                            aria-controls="fc-profile"
                            aria-selected="false"
                          >
                            <img src="assets/img/product/img_34.png" alt="" />
                          </button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="fc-contact-tab"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-contact"
                            type="button"
                            role="tab"
                            aria-controls="fc-contact"
                            aria-selected="false"
                          >
                            <img src="assets/img/product/img_35.png" alt="" />
                          </button>
                        </li>
                      </ul>
                    </div>
                    <div class="product-cat__content">
                      <h3 class="title">Smartphone & Tablet</h3>
                      <ul class="list-unstyled">
                        <li><a href="#!">Bluetooth speaker</a></li>
                        <li><a href="#!">Robotics vacuum</a></li>
                        <li><a href="#!">Laser printer</a></li>
                        <li><a href="#!">Electric frying pan</a></li>
                        <li><a href="#!">Digital camera</a></li>
                        <li><a href="#!">+ More item</a></li>
                      </ul>
                    </div>
                  </div>

                  <div class="product-cat__item mt-50">
                    <div class="product-cat__images">
                      <div class="tab-content" id="fc-myTabContent2">
                        <div
                          class="tab-pane fade show active"
                          id="fc-home2"
                          role="tabpanel"
                          aria-labelledby="fc-home-tab2"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_34.png" alt=""
                            /></a>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="fc-profile2"
                          role="tabpanel"
                          aria-labelledby="fc-profile-tab2"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_35.png" alt=""
                            /></a>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="fc-contact2"
                          role="tabpanel"
                          aria-labelledby="fc-contact-tab2"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_36.png" alt=""
                            /></a>
                          </div>
                        </div>
                      </div>
                      <ul
                        class="nav product-cat__nav nav-tabs"
                        id="fc-myTab2"
                        role="tablist"
                      >
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link active"
                            id="fc-home-tab2"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-home2"
                            type="button"
                            role="tab"
                            aria-controls="fc-home2"
                            aria-selected="true"
                          >
                            <img src="assets/img/product/img_34.png" alt="" />
                          </button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="fc-profile-tab2"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-profile2"
                            type="button"
                            role="tab"
                            aria-controls="fc-profile2"
                            aria-selected="false"
                          >
                            <img src="assets/img/product/img_35.png" alt="" />
                          </button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="fc-contact-tab2"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-contact2"
                            type="button"
                            role="tab"
                            aria-controls="fc-contact2"
                            aria-selected="false"
                          >
                            <img src="assets/img/product/img_36.png" alt="" />
                          </button>
                        </li>
                      </ul>
                    </div>
                    <div class="product-cat__content">
                      <h3 class="title">Camera & Equipemnt</h3>
                      <ul class="list-unstyled">
                        <li><a href="#!">Bluetooth speaker</a></li>
                        <li><a href="#!">Robotics vacuum</a></li>
                        <li><a href="#!">Laser printer</a></li>
                        <li><a href="#!">Electric frying pan</a></li>
                        <li><a href="#!">Digital camera</a></li>
                        <li><a href="#!">+ More item</a></li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="col-lg-4">
                  <div class="product-cat__item mt-50">
                    <div class="product-cat__images">
                      <div class="tab-content" id="fc-myTabContent3">
                        <div
                          class="tab-pane fade show active"
                          id="fc-home3"
                          role="tabpanel"
                          aria-labelledby="fc-home-tab3"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_35.png" alt=""
                            /></a>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="fc-profile3"
                          role="tabpanel"
                          aria-labelledby="fc-profile-tab3"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_36.png" alt=""
                            /></a>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="fc-contact3"
                          role="tabpanel"
                          aria-labelledby="fc-contact-tab3"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_37.png" alt=""
                            /></a>
                          </div>
                        </div>
                      </div>
                      <ul
                        class="nav product-cat__nav nav-tabs"
                        id="fc-myTab3"
                        role="tablist"
                      >
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link active"
                            id="fc-home-tab3"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-home3"
                            type="button"
                            role="tab"
                            aria-controls="fc-home3"
                            aria-selected="true"
                          >
                            <img src="assets/img/product/img_35.png" alt="" />
                          </button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="fc-profile-tab3"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-profile3"
                            type="button"
                            role="tab"
                            aria-controls="fc-profile3"
                            aria-selected="false"
                          >
                            <img src="assets/img/product/img_36.png" alt="" />
                          </button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="fc-contact-tab3"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-contact3"
                            type="button"
                            role="tab"
                            aria-controls="fc-contact3"
                            aria-selected="false"
                          >
                            <img src="assets/img/product/img_37.png" alt="" />
                          </button>
                        </li>
                      </ul>
                    </div>
                    <div class="product-cat__content">
                      <h3 class="title">Computer & Laptops</h3>
                      <ul class="list-unstyled">
                        <li><a href="#!">Bluetooth speaker</a></li>
                        <li><a href="#!">Robotics vacuum</a></li>
                        <li><a href="#!">Laser printer</a></li>
                        <li><a href="#!">Electric frying pan</a></li>
                        <li><a href="#!">Digital camera</a></li>
                        <li><a href="#!">+ More item</a></li>
                      </ul>
                    </div>
                  </div>

                  <div class="product-cat__item mt-50">
                    <div class="product-cat__images">
                      <div class="tab-content" id="fc-myTabContent4">
                        <div
                          class="tab-pane fade show active"
                          id="fc-home4"
                          role="tabpanel"
                          aria-labelledby="fc-home-tab4"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_36.png" alt=""
                            /></a>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="fc-profile4"
                          role="tabpanel"
                          aria-labelledby="fc-profile-tab4"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_37.png" alt=""
                            /></a>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="fc-contact4"
                          role="tabpanel"
                          aria-labelledby="fc-contact-tab4"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_38.png" alt=""
                            /></a>
                          </div>
                        </div>
                      </div>
                      <ul
                        class="nav product-cat__nav nav-tabs"
                        id="fc-myTab4"
                        role="tablist"
                      >
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link active"
                            id="fc-home-tab4"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-home4"
                            type="button"
                            role="tab"
                            aria-controls="fc-home4"
                            aria-selected="true"
                          >
                            <img src="assets/img/product/img_36.png" alt="" />
                          </button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="fc-profile-tab4"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-profile4"
                            type="button"
                            role="tab"
                            aria-controls="fc-profile4"
                            aria-selected="false"
                          >
                            <img src="assets/img/product/img_37.png" alt="" />
                          </button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="fc-contact-tab4"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-contact4"
                            type="button"
                            role="tab"
                            aria-controls="fc-contact4"
                            aria-selected="false"
                          >
                            <img src="assets/img/product/img_38.png" alt="" />
                          </button>
                        </li>
                      </ul>
                    </div>
                    <div class="product-cat__content">
                      <h3 class="title">Home Equipment</h3>
                      <ul class="list-unstyled">
                        <li><a href="#!">Bluetooth speaker</a></li>
                        <li><a href="#!">Robotics vacuum</a></li>
                        <li><a href="#!">Laser printer</a></li>
                        <li><a href="#!">Electric frying pan</a></li>
                        <li><a href="#!">Digital camera</a></li>
                        <li><a href="#!">+ More item</a></li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="col-lg-4">
                  <div class="product-cat__item mt-50">
                    <div class="product-cat__images">
                      <div class="tab-content" id="fc-myTabContent5">
                        <div
                          class="tab-pane fade show active"
                          id="fc-home5"
                          role="tabpanel"
                          aria-labelledby="fc-home-tab5"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_37.png" alt=""
                            /></a>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="fc-profile5"
                          role="tabpanel"
                          aria-labelledby="fc-profile-tab5"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_38.png" alt=""
                            /></a>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="fc-contact5"
                          role="tabpanel"
                          aria-labelledby="fc-contact-tab5"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_34.png" alt=""
                            /></a>
                          </div>
                        </div>
                      </div>
                      <ul
                        class="nav product-cat__nav nav-tabs"
                        id="fc-myTab5"
                        role="tablist"
                      >
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link active"
                            id="fc-home-tab5"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-home5"
                            type="button"
                            role="tab"
                            aria-controls="fc-home5"
                            aria-selected="true"
                          >
                            <img src="assets/img/product/img_37.png" alt="" />
                          </button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="fc-profile-tab5"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-profile5"
                            type="button"
                            role="tab"
                            aria-controls="fc-profile5"
                            aria-selected="false"
                          >
                            <img src="assets/img/product/img_38.png" alt="" />
                          </button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="fc-contact-tab5"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-contact5"
                            type="button"
                            role="tab"
                            aria-controls="fc-contact5"
                            aria-selected="false"
                          >
                            <img src="assets/img/product/img_34.png" alt="" />
                          </button>
                        </li>
                      </ul>
                    </div>
                    <div class="product-cat__content">
                      <h3 class="title">Electric Accesories</h3>
                      <ul class="list-unstyled">
                        <li><a href="#!">Bluetooth speaker</a></li>
                        <li><a href="#!">Robotics vacuum</a></li>
                        <li><a href="#!">Laser printer</a></li>
                        <li><a href="#!">Electric frying pan</a></li>
                        <li><a href="#!">Digital camera</a></li>
                        <li><a href="#!">+ More item</a></li>
                      </ul>
                    </div>
                  </div>

                  <div class="product-cat__item mt-50">
                    <div class="product-cat__images">
                      <div class="tab-content" id="fc-myTabContent6">
                        <div
                          class="tab-pane fade show active"
                          id="fc-home6"
                          role="tabpanel"
                          aria-labelledby="fc-home-tab6"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_38.png" alt=""
                            /></a>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="fc-profile6"
                          role="tabpanel"
                          aria-labelledby="fc-profile-tab6"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_35.png" alt=""
                            /></a>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="fc-contact6"
                          role="tabpanel"
                          aria-labelledby="fc-contact-tab6"
                        >
                          <div class="product-cat__img">
                            <a href="shop-single.html"
                              ><img src="assets/img/product/img_36.png" alt=""
                            /></a>
                          </div>
                        </div>
                      </div>
                      <ul
                        class="nav product-cat__nav nav-tabs"
                        id="fc-myTab6"
                        role="tablist"
                      >
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link active"
                            id="fc-home-tab6"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-home6"
                            type="button"
                            role="tab"
                            aria-controls="fc-home6"
                            aria-selected="true"
                          >
                            <img src="assets/img/product/img_38.png" alt="" />
                          </button>
                        </li>

                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="fc-profile-tab6"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-profile6"
                            type="button"
                            role="tab"
                            aria-controls="fc-profile6"
                            aria-selected="false"
                          >
                            <img src="#" alt="" />
                          </button>
                        </li>

                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="fc-contact-tab6"
                            data-bs-toggle="tab"
                            data-bs-target="#fc-contact6"
                            type="button"
                            role="tab"
                            aria-controls="fc-contact6"
                            aria-selected="false"
                          >
                            <img src="#" alt="" />
                          </button>
                        </li>
                      </ul>
                    </div>
                    <div class="product-cat__content">
                      <h3 class="title">Gaming Accesiores</h3>
                      <ul class="list-unstyled">
                        <li><a href="#!">Bluetooth speaker</a></li>
                        <li><a href="#!">Robotics vacuum</a></li>
                        <li><a href="#!">Laser printer</a></li>
                        <li><a href="#!">Electric frying pan</a></li>
                        <li><a href="#!">Digital camera</a></li>
                        <li><a href="#!">+ More item</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <script>
          document.addEventListener("DOMContentLoaded", async () => {
            try {
              const res = await fetch("/productcatdata");
              let cats = await res.json();
              if (!Array.isArray(cats)) return;
              cats = cats.filter((c) => c.status === "Published");

              document
                .querySelectorAll(".product-cat__item")
                .forEach((block, idx) => {
                  const cat = cats[idx];
                  if (!cat) return;

                  block.querySelectorAll(".tab-pane img").forEach((img) => {
                    img.src = `/uploads/${cat.image}`;
                    img.alt = cat.name;
                  });

                  block
                    .querySelectorAll(".product-cat__nav img")
                    .forEach((img) => {
                      img.src = `/uploads/${cat.image}`;
                      img.alt = cat.name;
                    });

                  const titleEl = block.querySelector(
                    ".product-cat__content .title"
                  );
                  if (titleEl) titleEl.textContent = cat.name;
                });
            } catch (err) {
              console.error("Error loading categories:", err);
            }
          });
        </script>

        <div class="recent-product pt-60 pb-80">
          <div class="container">
            <div class="row mt-none-30">
              <div class="col-lg-3 col-md-6 mt-30">
                <div
                  id="featured-product-banner"
                  class="add-banner add-banner__3 bg_img add-banner__h555"
                  data-background="assets/img/bg/bg_01.jpg"
                >
                  <div class="add-banner__content">
                    <span class="tagline"></span>
                    <h3 class="product-title"></h3>
                    <span class="price"></span>
                    <a class="add-banner__btn" href="#">Buy Now</a>
                  </div>
                  <div class="add-banner__img">
                    <img src="" alt="Product Image" class="product-image" />
                  </div>
                </div>
              </div>

              <div class="col-lg-9 mt-30">
                <div class="product__nav-wrap style-2 ul_li_between">
                  <h2 class="section-heading"><span>Recently Viewed</span></h2>

                  <ul
                    class="product__nav recent-product__nav nav nav-tabs"
                    id="vdr-myTab"
                    role="tablist"
                  ></ul>
                </div>

                <div class="tab-content" id="vdr-myTabContent"></div>
              </div>
            </div>
          </div>
        </div>

        <script>
          document.addEventListener("DOMContentLoaded", async () => {
            const wanted = [
              "New Arrivals",
              "Accessories",
              "Computers",
              "Electronics",
            ];

            let cats = [],
              prods = [];
            try {
              [cats, prods] = await Promise.all([
                fetch("/productcatdata").then((r) => r.json()),
                fetch("/productpagedata").then((r) => r.json()),
              ]);
            } catch (e) {
              console.error("Data load error:", e);
              return;
            }

            const filteredCats = wanted
              .map((name) => cats.find((c) => c.name === name))
              .filter(Boolean);

            const tabList = document.getElementById("vdr-myTab");
            const contentDiv = document.getElementById("vdr-myTabContent");
            tabList.innerHTML = "";
            contentDiv.innerHTML = "";

            filteredCats.forEach((cat, i) => {
              const idx = String(i + 1).padStart(2, "0");
              const tabId = `vdr-tab-${idx}`;
              const paneId = `vdr-tab${idx}`;
              const active = i === 0 ? " active" : "";
              const show = i === 0 ? " show active" : "";

              tabList.insertAdjacentHTML(
                "beforeend",
                `
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link${active}"
                    id="${tabId}"
                    data-bs-toggle="tab"
                    data-bs-target="#${paneId}"
                    type="button"
                    role="tab"
                    aria-controls="${paneId}"
                    aria-selected="${i === 0}"
                  >${cat.name}</button>
                </li>
              `
              );

              const items = prods.filter((p) =>
                p.categories
                  ?.split(",")
                  .some((str) => str.trim().startsWith(cat.name))
              );
              items.sort((a, b) => new Date(b.date) - new Date(a.date));

              let rowsHtml = "";
              for (let j = 0; j < items.length; j += 3) {
                const chunk = items.slice(j, j + 3);
                const cols = chunk
                  .map(
                    (p) => `
                  <div class="col-lg-4 col-md-6">
                    <div class="recent-product__item tx-product ul_li mt-30 tab-content-2">
                      <div class="thumb">
                        <a href="shop-single.html?id=${p.id}">
                          <img src="/uploads/${p.image}" alt="${p.name}" />
                        </a>
                      </div>
                      <div class="recent-product__content">
                        <ul class="rating-star ul_li mr-10">
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="fas fa-star"></i></li>
                          <li><i class="far fa-star"></i></li>
                          <li><i class="far fa-star"></i></li>
                        </ul>
                        <h3>
                          <a href="shop-single.html?id=${p.id}">
                            ${p.name.split(" ").slice(0, 4).join(" ")}${
                      p.name.split(" ").length > 4 ? "..." : ""
                    }
                          </a>
                        </h3>
                        <h4 class="product__price">
                          <span class="new">${p.price}</span>
                          <span class="old">${p.price_sale}</span>
                        </h4>
                      </div>
                    </div>
                  </div>
                  
                `
                  )
                  .join("");
                rowsHtml += `<div class="row justify-content-md-center">${cols}</div>`;
              }

              contentDiv.insertAdjacentHTML(
                "beforeend",
                `
                <div
                  class="tab-pane animated fadeInUp${show}"
                  id="${paneId}"
                  role="tabpanel"
                  aria-labelledby="${tabId}"
                >
                  ${rowsHtml}
                </div>
              `
              );
            });

            const banner = document.getElementById("featured-product-banner");
            const firstProduct = prods[0];

            if (banner && firstProduct) {
              banner.querySelector(".tagline").textContent =
                firstProduct.label || "Featured";
              banner.querySelector(".product-title").innerHTML = `
                ${firstProduct.name.split(" ").slice(0, 2).join(" ")}<br>
                ${firstProduct.name.split(" ").slice(2).join(" ")}
              `;
              banner.querySelector(".price").textContent =
                firstProduct.price_sale || firstProduct.price;
              banner.querySelector(
                ".add-banner__btn"
              ).href = `shop-single.html?id=${firstProduct.id}`;
              banner.querySelector(
                ".product-image"
              ).src = `/uploads/${firstProduct.image}`;
            }
          });
        </script>

        <div class="vd-banner">
          <div class="container">
            <div class="row mt-none-30">
              <div class="col-lg-7 mt-30">
                <div
                  class="vd-banner__single pos-rel ul_li_between bg_img"
                  data-background="assets/img/bg/bg_02.jpg"
                >
                  <div class="content">
                    <h2></h2>
                    <p></p>
                    <div class="banner__btn mt-20">
                      <a class="thm-btn thm-btn__black" href="#!">
                        <span class="btn-wrap">
                          <span>Shop Now</span>
                          <span>Shop Now</span>
                        </span>
                        <i class="far fa-long-arrow-right"></i>
                      </a>
                    </div>
                  </div>
                  <div class="thumb thumb-index">
                    <img src="assets/img/product/img_49.png" alt="" />
                  </div>
                  <div class="vd-banner__offer">
                    <span class="offer"
                      >25% <br />
                      <span>off</span></span
                    >
                  </div>
                </div>
              </div>

              <div class="col-lg-5 mt-30">
                <div
                  class="vd-banner__single vd-banner__single-two pos-rel ul_li_between bg_img"
                  data-background="assets/img/bg/bg_03.jpg"
                >
                  <div class="content">
                    <h2></h2>
                    <p></p>
                    <div class="banner__btn mt-20">
                      <a
                        class="thm-btn thm-btn__black thm-btn__md text-lowercase"
                        href="#!"
                      >
                        <span class="btn-wrap">
                          <span>Shop Now</span>
                          <span>Shop Now</span>
                        </span>
                      </a>
                    </div>
                  </div>
                  <div class="thumb thumb-index1">
                    <img src="assets/img/product/img_50.png" alt="" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="rd-category pt-60">
          <div class="container">
            <div class="row mt-none-30">
              <div class="col-lg-6 col-md-12 mt-30">
                <div
                  class="rd-banner ul_li"
                  data-background="assets/img/bg/bg_05.jpg"
                >
                  <div class="rd-banner__content">
                    <span>Widesceen 4k ....</span>
                    <h3></h3>
                    <p></p>
                    <div class="ul_li mt-20">
                      <div class="upto-offer ul_li">
                        <span class="upto"
                          >Up <br />
                          To</span
                        >
                        <span class="offer-no">70 <span>%</span></span>
                      </div>
                      <h4 class="price"></h4>
                    </div>
                    <div class="banner__btn mt-40">
                      <a class="thm-btn thm-btn__red" href="#!">
                        <span class="btn-wrap">
                          <span>Shop Now</span>
                          <span>Shop Now</span>
                        </span>
                        <i class="far fa-long-arrow-right"></i>
                      </a>
                    </div>
                  </div>
                  <div class="rd-banner__img rd-banner__img1">
                    <img src="assets/img/product/img_51.png" alt="" />
                  </div>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mt-30">
                <div class="rd-category__wrap">
                  <h2 class="section-heading mb-25">
                    <span>Camera & Dslr Item</span>
                  </h2>
                  <ul
                    class="rd-category__list list-unstyled"
                    data-background="assets/img/bg/bg_04.jpg"
                  >
                    <li class="title">Action Camera</li>
                    <li><a href="#!">Bluetooth speaker</a></li>
                    <li><a href="#!">Robotics vacuum </a></li>
                    <li><a href="#!">external hard Drive</a></li>
                  </ul>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mt-30">
                <div class="rd-category__wrap">
                  <h2 class="section-heading mb-25">
                    <span>Home Accesories</span>
                  </h2>
                  <ul
                    class="rd-category__list list-unstyled"
                    data-background="assets/img/bg/bg_04.jpg"
                  >
                    <li class="title">Action Camera</li>
                    <li><a href="#!">Bluetooth speaker</a></li>
                    <li><a href="#!">Robotics vacuum </a></li>
                    <li><a href="#!">Laser printer</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <script>
          document.addEventListener("DOMContentLoaded", async () => {
            try {
              const res = await fetch("/flashsalesmaindata");
              const data = await res.json();
              if (!Array.isArray(data) || data.length === 0) return;

              const [p1, p2] = data;
              const now = new Date();

              const isLive = (endDateStr) => now <= new Date(endDateStr);
              const bannerWrapper = document.querySelector(".vd-banner");
              if (bannerWrapper) {
                if (!isLive(p1.end_date) && (!p2 || !isLive(p2.end_date))) {
                  bannerWrapper.style.display = "none";
                  const msg = document.createElement("div");
                  msg.textContent = "No offer available";
                  msg.style.textAlign = "center";
                  msg.style.padding = "2rem";
                  msg.style.fontSize = "1.5rem";
                  msg.style.color = "#333";
                  bannerWrapper.parentNode.insertBefore(msg, bannerWrapper);
                } else {
                  const b1 = bannerWrapper.querySelector(
                    ".col-lg-7 .vd-banner__single"
                  );
                  if (b1) {
                    if (isLive(p1.end_date)) {
                      b1.querySelector(".content h2").textContent =
                        p1.product_name;
                      b1.querySelector(
                        ".content p"
                      ).textContent = `${p1.label} • ${p1.price_sale}`;
                      const img1 = b1.querySelector(".thumb img");
                      img1.src = "/uploads/" + p1.image;
                      img1.alt = p1.product_name;
                      b1.querySelector(
                        ".banner__btn a"
                      ).href = `shop-single.html?id=${p1.product_id}`;
                    } else {
                      b1.style.visibility = "hidden";
                    }
                  }
                  const b2 = bannerWrapper.querySelector(
                    ".col-lg-5 .vd-banner__single-two"
                  );
                  if (b2 && p2) {
                    if (isLive(p2.end_date)) {
                      b2.querySelector(".content h2").textContent =
                        p2.product_name;
                      b2.querySelector(
                        ".content p"
                      ).textContent = `${p2.label} • ${p2.price_sale}`;
                      const img2 = b2.querySelector(".thumb img");
                      img2.src = "/uploads/" + p2.image;
                      img2.alt = p2.product_name;
                      b2.querySelector(
                        ".banner__btn a"
                      ).href = `shop-single.html?id=${p2.product_id}`;
                    } else {
                      b2.style.visibility = "hidden";
                    }
                  }
                }
              }

              const rdCol = document.querySelector(
                ".rd-category .col-lg-6.col-md-12.mt-30"
              );
              if (rdCol) {
                const rdLive = now <= new Date(p1.end_date);
                if (!rdLive) {
                  rdCol.style.display = "none";
                } else {
                  const rdBanner = rdCol.querySelector(".rd-banner.ul_li");
                  const titleEl = rdBanner.querySelector(
                    ".rd-banner__content h3"
                  );
                  const descEl = rdBanner.querySelector(
                    ".rd-banner__content p"
                  );
                  const priceEl = rdBanner.querySelector(
                    ".rd-banner__content .price"
                  );
                  const linkEl = rdBanner.querySelector(
                    ".rd-banner__content .banner__btn a"
                  );
                  const imgEl = rdBanner.querySelector(".rd-banner__img img");

                  const words = p1.product_name.trim().split(" ");
                  const mid = Math.ceil(words.length / 2);
                  titleEl.innerHTML =
                    words.slice(0, mid).join(" ") +
                    "<br>" +
                    words.slice(mid).join(" ");

                  descEl.textContent = `${p1.label} – ${p1.price}`;
                  priceEl.textContent = p1.price_sale;
                  linkEl.href = `shop-single.html?id=${p1.product_id}`;
                  imgEl.src = "/uploads/" + p1.image;
                  imgEl.alt = p1.product_name;
                }
              }
            } catch (err) {
              console.error("Flash‑sale banners load error:", err);
            }
          });
        </script>

        <div class="brand pt-80 pb-80">
          <div class="container">
            <div class="brand__active">
              <div class="brand__item">
                <a href="#!">
                  <img src="assets/img/brand/img_01.png" alt="" />
                </a>
              </div>
              <div class="brand__item">
                <a href="#!">
                  <img src="assets/img/brand/img_02.png" alt="" />
                </a>
              </div>
              <div class="brand__item">
                <a href="#!">
                  <img src="assets/img/brand/img_03.png" alt="" />
                </a>
              </div>
              <div class="brand__item">
                <a href="#!">
                  <img src="assets/img/brand/img_04.png" alt="" />
                </a>
              </div>
              <div class="brand__item">
                <a href="#!">
                  <img src="assets/img/brand/img_05.png" alt="" />
                </a>
              </div>
              <div class="brand__item">
                <a href="#!">
                  <img src="assets/img/brand/img_06.png" alt="" />
                </a>
              </div>
              <div class="brand__item">
                <a href="#!">
                  <img src="assets/img/brand/img_03.png" alt="" />
                </a>
              </div>
            </div>
          </div>
        </div>
      </main>

      <footer class="footer" data-background="assets/img/bg/footer_bg.jpg">
        <div class="newslater newslater__border pt-30 pb-30">
          <div class="container">
            <div class="newslater__two ul_li">
              <div class="newslater__content">
                <h2 class="title">We are ready to <span>help</span></h2>
                <p>For information Consult with our expert members</p>
              </div>
              <form class="newslater__form js-newsletter-form">
                <input
                  placeholder="Enter your Email"
                  type="email"
                  name="email"
                  required
                />
                <button type="submit">Subscribe</button>
              </form>
            </div>
          </div>
        </div>

        <div class="container">
          <div class="footer__main pt-90 pb-90">
            <div class="row mt-none-40">
              <div class="footer__widget col-lg-3 col-md-6 mt-40">
                <div class="footer__logo mb-20">
                  <a href="index.html"
                    ><img src="assets/img/logo/logo.svg" alt=""
                  /></a>
                </div>
                <p>
                  4517 Washington Ave. Manchester, Kentucky 39495 Washington
                  Ave. Manchester
                </p>
                <ul class="footer__info mt-30">
                  <li>
                    <i class="far fa-map-marker-alt"></i>254 Lillian Blvd,
                    Holbrook
                  </li>
                  <li><i class="fas fa-phone"></i>1-800-654-3210</li>
                </ul>
                <div class="apps-img mt-15 ul_li">
                  <div class="app mt-15">
                    <a href="#!"
                      ><img src="assets/img/icon/google_play.png" alt=""
                    /></a>
                  </div>
                  <div class="app mt-15">
                    <a href="#!"
                      ><img src="assets/img/icon/app_store.png" alt=""
                    /></a>
                  </div>
                </div>
              </div>
              <div class="footer__widget col-lg-3 col-md-6 mt-40">
                <h2 class="title">Find It Fast</h2>
                <ul class="quick-links">
                  <li><a href="shop.html">Laptops & Computers</a></li>
                  <li><a href="shop.html">Cameras & Photography</a></li>
                  <li><a href="shop.html">Smart Phones & Tablets</a></li>
                  <li><a href="shop.html">Video Games & Consoles</a></li>
                  <li><a href="shop.html">TV & Audio</a></li>
                  <li><a href="shop.html">Gadgets</a></li>
                  <li><a href="shop.html">Waterproof Headphones</a></li>
                </ul>
              </div>

              <div class="footer__widget col-lg-3 col-md-6 mt-40">
                <h2 class="title">Quick Links</h2>
                <ul class="quick-links">
                  <li><a href="account.html">Your Account</a></li>
                  <li><a href="shop.html">Returns & Exchanges</a></li>
                  <li><a href="shop.html">Return Center</a></li>
                  <li><a href="shop.html">Purchase Hisotry</a></li>
                  <li><a href="shop.html">App Download</a></li>
                  <li><a href="news.html">Latest News Blog</a></li>
                  <li><a href="shop.html">Shipping & Delivery</a></li>
                </ul>
              </div>
              <div class="footer__widget col-lg-3 col-md-6 mt-40">
                <h2 class="title">Service us</h2>
                <ul class="category">
                  <li><a href="contact.html">Support Center</a></li>
                  <li><a href="shop.html">Term & Conditions</a></li>
                  <li><a href="shop.html">Shipping</a></li>
                  <li><a href="shop.html">Privacy Policy</a></li>
                  <li><a href="shop.html">Help</a></li>
                  <li><a href="shop.html">Products Return</a></li>
                  <li><a href="shop.html">FAQS</a></li>
                </ul>
              </div>
            </div>
          </div>

          <div class="footer__bottom ul_li_center">
            <div class="footer__copyright mt-15">
              &copy; <span id="currentYear" class="text-dark"></span>
              <a href="index.html">Themexriver</a> . All Rights Reserved.
            </div>

            <script>
              (function () {
                const el = document.getElementById("currentYear");
                if (el) el.textContent = new Date().getFullYear();
              })();
            </script>

            <div class="footer__social mt-15">
              <a href="https://www.facebook.com/"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a href="https://www.twitter.com/"
                ><i class="fab fa-twitter"></i
              ></a>
              <a href="https://www.instagram.com/"
                ><i class="fab fa-instagram"></i
              ></a>
              <a href="https://www.youtube.com/"
                ><i class="fab fa-youtube"></i
              ></a>
              <a href="https://www.pinterest.com/"
                ><i class="fab fa-pinterest"></i
              ></a>
            </div>

            <div class="payment_method mt-15">
              <img src="assets/img/bg/payment_method.png" alt="" />
            </div>
          </div>
        </div>
      </footer>

      <script>
        document.addEventListener("DOMContentLoaded", () => {
          const form = document.querySelector(".js-newsletter-form");
          if (!form) return;

          function showBanner(msg, type = "success") {
            const b = document.createElement("div");
            b.textContent = msg;
            Object.assign(b.style, {
              position: "fixed",
              top: "10px",
              left: "50%",
              transform: "translateX(-50%)",
              padding: "10px 20px",
              background: type === "success" ? "#4caf50" : "#f44336",
              color: "#fff",
              borderRadius: "4px",
              zIndex: 9999,
              boxShadow: "0 2px 6px rgba(0,0,0,0.3)",
            });
            document.body.appendChild(b);
            setTimeout(() => b.remove(), 3000);
          }

          form.addEventListener("submit", async (e) => {
            e.preventDefault();
            const input = form.querySelector('input[name="email"]');
            const email = input.value.trim();
            if (!email) {
              showBanner("Please enter a valid email.", "error");
              return;
            }

            try {
              const res = await fetch("/newsletterpost", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ email }),
              });
              const text = await res.text();
              if (res.ok) {
                showBanner("Subscribed successfully!", "success");
                form.reset();
              } else {
                showBanner(text || "Subscription failed.", "error");
              }
            } catch (err) {
              console.error("Newsletter error:", err);
              showBanner("Network error, please try again.", "error");
            }
          });
        });
      </script>

      <section class="newsletter-popup-area-section">
        <div class="newsletter-popup-area">
          <div class="newsletter-popup-ineer">
            <button class="btn newsletter-close-btn">
              <i class="fal fa-times"></i>
            </button>
            <div class="img-holder">
              <img src="assets/img/bg/newsletter.jpg" alt />
            </div>
            <div class="details">
              <h4>Get 45% discount shipped to your inbox</h4>
              <p>
                Subscribe to the radios eCommerce newsletter to receive timely
                updates to your favorite products
              </p>
              <form>
                <div>
                  <input type="email" placeholder="Enter your email" />
                  <button type="submit">Subscribe</button>
                </div>
                <div>
                  <label class="checkbox-holder">
                    Don't show this popup again!
                    <input type="checkbox" class="show-message" />
                    <span class="checkmark"></span>
                  </label>
                </div>
              </form>
            </div>
          </div>
        </div>
      </section>

      <div class="cookies-area">
        <p>
          This website uses cookies to improve your experience. By using this
          website you agree to our <a href="#">Data Protection Policy</a>.
        </p>
        <a href="#" class="read-more">Read more</a>
        <div>
          <button class="cookie-btn">Accept</button>
        </div>
      </div>
    </div>

    <script src="assets/js/jquery-3.5.1.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/slick.js"></script>
    <script src="assets/js/backToTop.js"></script>
    <script src="assets/js/uikit.min.js"></script>
    <script src="assets/js/resize-sensor.min.js"></script>
    <script src="assets/js/theia-sticky-sidebar.min.js"></script>
    <script src="assets/js/wow.min.js"></script>
    <script src="assets/js/jqueryui.js"></script>
    <script src="assets/js/touchspin.js"></script>
    <script src="assets/js/countdown.js"></script>
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <script src="assets/js/metisMenu.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </body>
</html>
